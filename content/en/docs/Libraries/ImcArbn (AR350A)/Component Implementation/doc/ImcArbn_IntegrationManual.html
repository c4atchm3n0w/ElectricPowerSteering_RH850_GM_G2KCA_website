---
title: ImcArbn_IntegrationManual
linkTitle: ImcArbn_IntegrationManual
weight: 2
---

<p><strong>Integration Manual</strong></p>
<p><strong>For</strong></p>
<p><strong>Imc Arbitration</strong></p>
<p><strong>VERSION: 1.0</strong></p>
<p><strong>DATE: 02-Feb-2017</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Software Group,</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA</strong></p>
<p><strong>Revision History</strong></p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 10%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sl. No.</strong></td>
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>Initial version</td>
<td>Akilan Rathakrishnan</td>
<td>1.0</td>
<td>17-Jan-2017</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Added note about potential compilation issue in case of no signal group configured</td>
<td>Akilan Rathakrishnan</td>
<td>2.0</td>
<td>02-Feb-2017</td>
</tr>
</tbody>
</table>
<p>Table of Contents</p>
<p><a href="#abbrevations-and-acronyms">1 Abbrevations And Acronyms 4</a></p>
<p><a href="#references">2 References 5</a></p>
<p><a href="#dependencies">3 Dependencies 6</a></p>
<p><a href="#swcs">3.1 SWCs 6</a></p>
<p><a href="#global-functionsnon-rte-to-be-provided-to-integration-project">3.2 Global Functions(Non RTE) to be provided to Integration Project 6</a></p>
<p><a href="#configuration-requirements">4 Configuration REQUIREMeNTS 7</a></p>
<p><a href="#build-time-config">4.1 Build Time Config 7</a></p>
<p><a href="#configuration-files-to-be-provided-by-integration-project">4.2 Configuration Files to be provided by Integration Project 7</a></p>
<p><a href="#da-vinci-developer-notes">4.3 Da Vinci Parameter Configuration Changes 7</a></p>
<p><a href="#davinci-interrupt-configuration-changes">4.4 DaVinci Interrupt Configuration Changes 7</a></p>
<p><a href="#manual-configuration-changes">4.5 Manual Configuration Changes 8</a></p>
<p><a href="#integration-dataflow-requirements">5 Integration DATAFLOW REQUIREMENTS 9</a></p>
<p><a href="#required-global-data-inputs">5.1 Required Global Data Inputs 9</a></p>
<p><a href="#required-global-data-outputs">5.2 Required Global Data Outputs 9</a></p>
<p><a href="#specific-include-path-present">5.3 Specific Include Path present 9</a></p>
<p><a href="#runnable-scheduling">6 Runnable Scheduling 10</a></p>
<p><a href="#memory-map-requirements">7 Memory Map REQUIREMENTS 12</a></p>
<p><a href="#mapping">7.1 Mapping 12</a></p>
<p><a href="#usage">7.2 Usage 12</a></p>
<p><a href="#non-rte-nvm-blocks">7.3 Non RTE NvM Blocks 12</a></p>
<p><a href="#rte-nvm-blocks">7.4 RTE NvM Blocks 12</a></p>
<p><a href="#compiler-settings">8 Compiler Settings 13</a></p>
<p><a href="#preprocessor-macro">8.1 Preprocessor MACRO 13</a></p>
<p><a href="#optimization-settings">8.2 Optimization Settings 13</a></p>
<p><a href="#appendix">9 Appendix 14</a></p>
<h1 id="abbrevations-and-acronyms">Abbrevations And Acronyms</h1>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Abbreviation</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="even">
<td>DFD</td>
<td>Design functional diagram</td>
</tr>
<tr class="odd">
<td>MDD</td>
<td>Module design Document</td>
</tr>
<tr class="even">
<td></td>
<td>&lt;ADD more to the table if applicable&gt;</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="references">References</h1>
<p>This section lists the title &amp; version of all the documents that are referred for development of this document</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 22%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sr. No.</strong></td>
<td><strong>Title</strong></td>
<td><strong>Version</strong></td>
</tr>
<tr class="even">
<td>&lt;1&gt;</td>
<td>&lt;FDD - &lt;AR350A_ImcArbn_Design&gt;</td>
<td>Refer Synergy subproject version</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="dependencies">Dependencies</h1>
<h2 id="swcs">SWCs</h2>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Module</strong></td>
<td><strong>Required Feature</strong></td>
</tr>
<tr class="even">
<td><strong>None</strong></td>
<td>N/A</td>
</tr>
</tbody>
</table>
<p>Note : Referencing the external components should be avoided in most cases. Only in unavoidable circumstance external components should be referred. Developer should track the references.</p>
<h2 id="global-functionsnon-rte-to-be-provided-to-integration-project">Global Functions(Non RTE) to be provided to Integration Project</h2>
<p>None</p>
<h1 id="configuration-requirements">Configuration REQUIREMeNTS</h1>
<h2 id="build-time-config">Build Time Config</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 53%" />
<col style="width: 9%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Modules</strong></td>
<td><strong>Notes</strong></td>
<td></td>
</tr>
<tr class="even">
<td><strong>None</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="configuration-files-to-be-provided-by-integration-project">Configuration Files to be provided by Integration Project</h2>
<p>ImcArbn_Private_Cfg.c</p>
<p>ImcArbn_Private_Cfg.h</p>
<p>ImcArbn_ Cfg.h</p>
<p>Note 1: Include “ImcArbn_Private_Cfg.h” in the “Rte_UserTypes.h” file as user defined typedefs are generated in this file.</p>
<p>Note 2: Configuration files “ImcArbn_Private_Cfg.c”, “ImcArbn_Private_Cfg.h” and “ImcArbn_ Cfg.h”</p>
<p>shall be regenerated whenever there is a change in text template files <em>ImcArbn_Private_Cfg.c.tt,</em> <em>ImcArbn_Private_Cfg.h.tt and ImcArbn_Cfg.c.tt.</em></p>
<p>Note 3: If there is no IMC Signal Group / IMC Signals are configured, configuration scripts of this component will end-up in generating zero-size array typedefs, which will cause compilation issues. It is a design limitation and underlying assumption is that if no Signal Group configured, then the component shall be removed from the project altogether.</p>
<h2 id="da-vinci-developer-notes">Da Vinci DEVELOPER NOTES</h2>
<p>Davinci Developer project for this component is just base. Integrator need to import the developer project into the integration project and add all required IMC Signals in order to access the signal using S/R Ports. Also, for every of the signal, based on the Rate Group provided by higher level Architectural and Requirement documents, port access shall be provided to corresponding Transmit periodics (ImcArbnPer1= 2ms, ImcArbnPer2= 10ms and ImcArbnPer3= 100ms). All IMC Signals RTE reads shall be direct reads.</p>
<h2 id="da-vinci-parameter-configuration-changes">Da Vinci Parameter Configuration Changes</h2>
<p>Following configurations shall be made in DaVinci configurator for the component. Configuration data for this component shall be provided by higher level Architectural and Requirement documents.</p>
<p><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/static/media/image1.wmf" style="width:6.29306in;height:1.225in" /></p>
<p><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/static/media/image2.wmf" style="width:6.29306in;height:0.79792in" /></p>
<p><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/static/media/image3.wmf" style="width:6.29306in;height:1.74722in" /></p>
<h2 id="davinci-interrupt-configuration-changes">DaVinci Interrupt Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 9%" />
<col style="width: 38%" />
<col style="width: 34%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>ISR Name</strong></td>
<td><strong>VIM #</strong></td>
<td><strong>Priority Dependency</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td><strong>N/A</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="manual-configuration-changes">Manual Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Constant</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td><strong>N/A</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="exclusive-areas">Exclusive Areas</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Constant</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td><strong>ExclsvAr1DrvrTxRxBuf</strong></td>
<td><p>Exclusive area needs to protect access to Transmit and Receive buffers from asynchronous updates by server runnables and periodic updates by tasks.</p>
<p>Integrator needs to verify if client calls to server runnables can inteerupt periodics and set up exclusive area to properly protect access. If exclusive area is needed, at minimum it must disable OS Task scheduling (It is assumed that all clients call occurs in OS Tasks).</p></td>
<td></td>
</tr>
<tr class="odd">
<td><strong>ExclsvAr2SigDataBuf</strong></td>
<td><p>Exclusive area needs to protect access to Signal data buffers from asynchronous read by server runnables and periodic updates by tasks.</p>
<p>Integrator needs to verify if client calls to server runnables can inteerupt periodics and set up exclusive area to properly protect access. If exclusive area is needed, at minimum it must disable OS Task scheduling (It is assumed that all clients call occurs in OS Tasks).</p></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="integration-dataflow-requirements">Integration DATAFLOW REQUIREMENTS</h1>
<h2 id="required-global-data-inputs">Required Global Data Inputs</h2>
<p>Refer AR350A_ImcArbn_DataDict.m file</p>
<h2 id="required-global-data-outputs">Required Global Data Outputs</h2>
<p>Refer AR350A_ImcArbn_DataDict.m file</p>
<h2 id="specific-include-path-present">Specific Include Path present</h2>
<p>Yes</p>
<h1 id="runnable-scheduling">Runnable Scheduling </h1>
<p>This section specifies the required runnable scheduling.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 54%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Init</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td><strong>ImcArbnInit1</strong></td>
<td>Invoked by RTE during Init</td>
<td>RTE</td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 38%" />
<col style="width: 25%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Runnable</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td><strong>ImcArbnPer1</strong></td>
<td>Refer Notes listed below the table</td>
<td>RTE 2ms Task</td>
</tr>
<tr class="odd">
<td><strong>ImcArbnPer2</strong></td>
<td>Refer Notes listed below the table</td>
<td>RTE 10ms Taks</td>
</tr>
<tr class="even">
<td><strong>ImcArbnPer3</strong></td>
<td>Refer Notes listed below the table</td>
<td>RTE 100ms Task</td>
</tr>
<tr class="odd">
<td><strong>ImcArbnPer4</strong></td>
<td>Refer Notes listed below the table</td>
<td>RTE 2ms Task</td>
</tr>
<tr class="even">
<td><strong>ImcArbnPer5</strong></td>
<td>Refer Notes listed below the table</td>
<td>RTE 10ms Task</td>
</tr>
<tr class="odd">
<td><strong>ImcArbnPer6</strong></td>
<td>Refer Notes listed below the table</td>
<td>RTE 100ms Task</td>
</tr>
<tr class="even">
<td><strong>GetSigImcDataExtdSts_f32_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcDataExtdSts_u32_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetSigImcDataExtdSts_s32_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcDataExtdSts_u16_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetSigImcDataExtdSts_s16_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcDataExtdSts_u08_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetSigImcDataExtdSts_s08_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcDataExtdSts_logl_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetSigImcData_f32_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcData_u32_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetSigImcData_s32_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcData_u16_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetSigImcData_s16_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcData_u08_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetSigImcData_s08_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetSigImcData_logl_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>GetTxRateGroup_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="odd">
<td><strong>GetTxSigGroup_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
<tr class="even">
<td><strong>SetRxSigGroup_Oper</strong></td>
<td>Server Runnable</td>
<td>Client call</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<ol type="1">
<li><p>ImcArbnPer1, ImcArbnPer2 and ImcArbnPer3 periodic functions shall be called prior to calling respective primary and secondary signal source transmit layer functions.</p></li>
<li><p>ImcArbnPer4, ImcArbnPer5 and ImcArbnPer6 periodic functions shall be called after calling respective primary and secondary signal source receive layer functions.</p></li>
<li><p>ImcArbn Receive periodic functions (ImcArbnPer4, ImcArbnPer5 and ImcArbnPer6) shall run prior to the ImcArbn Transmit periodics (ImcArbnPer1, ImcArbnPer2 and ImcArbnPer3) functions.</p></li>
</ol>
<h1 id="memory-map-requirements">Memory Map REQUIREMENTS</h1>
<h2 id="mapping">Mapping</h2>
<table>
<colgroup>
<col style="width: 45%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Memory Section</strong></td>
<td><strong>Contents</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td><strong>None</strong></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>* Each …START_SEC… constant is terminated by a …STOP_SEC… constant as specified in the AUTOSAR Memory Mapping requirements.</p>
<h2 id="usage">Usage</h2>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 23%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Feature</strong></td>
<td><strong>RAM</strong></td>
<td><strong>ROM</strong></td>
</tr>
<tr class="even">
<td><strong>None</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Table 1: ARM Cortex R4 Memory Usage</p>
<h2 id="non-rte-nvm-blocks">Non RTE NvM Blocks</h2>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Block Name</strong></td>
</tr>
<tr class="even">
<td><strong>None</strong></td>
</tr>
</tbody>
</table>
<p>Note : Size of the NVM block if configured in developer</p>
<h2 id="rte-nvm-blocks"> RTE NvM Blocks</h2>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Block Name</strong></td>
</tr>
<tr class="even">
<td><strong>None</strong></td>
</tr>
</tbody>
</table>
<p>Note : Size of the NVM block if configured in developer</p>
<h1 id="compiler-settings">Compiler Settings</h1>
<h2 id="preprocessor-macro"> Preprocessor MACRO</h2>
<p>None</p>
<h2 id="optimization-settings">Optimization Settings</h2>
<p>None</p>
<h1 id="appendix">Appendix</h1>
<p><em>&lt;This section is for appendix&gt;</em></p>
