---
title: TechnicalReference_CANdesc_KWP_GMs
linkTitle: TechnicalReference_CANdesc_KWP_GMs
weight: 40
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>
<b>CANdesc&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>GM /&#160;Opel&#160;specifics&#160;<br/>Version&#160;3.2.0&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Authors&#160;<br/>
Mishel&#160;&#160;Shishmanyan;&#160;&#160;Christoph&#160;&#160;Rätz;&#160;&#160;Oliver&#160;&#160;Garnatz;&#160;<br/>Matthias&#160;&#160;Heil;&#160;&#160;Katrin&#160;&#160;Thurow;&#160;&#160;Vitalij&#160;&#160;Krieger;&#160;&#160;Patrick&#160;<br/>Rieder&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
1&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=2></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Document&#160;Information&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2002-05-07&#160;<br/>
0.9.0&#160;<br/>
Creation&#160;<br/>
Christoph Rätz&#160;<br/>
2002-07-31&#160;<br/>
0.9.4&#160;<br/>
Reworked&#160;and&#160;released&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2002-12-12&#160;<br/>
1.0.0&#160;<br/>
Added&#160;requirements&#160;for&#160;<br/>ProgrammingMode (Sid $A5)&#160;<br/>and DeviceControl(Sid $AE)&#160;<br/>Released&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2003-04-09&#160;<br/>
1.1.0&#160;<br/>
Added&#160;default&#160;CANdelaStudio&#160;<br/>attribute settings&#160;for&#160;<br/>GM/OPEL&#160;ECUs&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
2003-12-19&#160;<br/>
2.0.0&#160;<br/>
Adapted&#160;to CANdesc&#160;2.xx.xx&#160;<br/>New&#160;Word&#160;template used.&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
2004-05-14&#160;<br/>
2.1.0&#160;<br/>
Replaced&#160;AppDesc with&#160;<br/>ApplDesc&#160;<br/>Changed&#160;support&#160;level&#160;of&#160;<br/>‘Security&#160;access’&#160;<br/>
Oliver&#160;Garnatz,&#160;Mishel&#160;<br/>
2004-07-15&#160;<br/>
2.2.0&#160;<br/>
Added&#160;description&#160;of&#160;<br/>
Shishmanyan&#160;<br/>
CANdesc&#160;OBD&#160;support&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2006-05-02&#160;<br/>
2.3.0&#160;<br/>
Added:&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">-&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">Service&#160;<br/>DynamicallyDefineMe<br/>ssage&#160;($2C)&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#40">-&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#40">Service&#160;<br/>DefinePIDByAddress&#160;<br/>($2D)&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">-&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">The&#160;PacketHandler&#160;<br/>(another&#160;type&#160;of&#160;<br/>service processor)&#160;</a><br/>
Modified:&#160;<br/>
-&#160;<br/>
Cosmetics&#160;<br/>
-&#160;<br/>
All&#160;APIs&#160;described&#160;in&#160;<br/>detailed&#160;table&#160;form&#160;<br/>
Removed:&#160;<br/>
-&#160;<br/>
None&#160;<br/>
Jason&#160;Wolbers&#160;<br/>
2006-08-03&#160;<br/>
2.4.0&#160;<br/>
Improved&#160;wording&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2006-10-22&#160;<br/>
2.5.0&#160;<br/>
Added:&#160;<br/>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">&#160;5.1&#160;“ECU&#160;Address&#160;<br/>configuration”</a>&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2006-11-03&#160;<br/>
2.6.0&#160;<br/>
Modified:&#160;<br/>&#160;-&#160;6.1.2&#160;“Multi&#160;address&#160;ECU&#160;<br/>(dynamic&#160;addressing)”&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2007-12-14&#160;<br/>
2.7.0&#160;<br/>
Modified:&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
2&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=3></a>Technical Reference&#160;CANdesc&#160;<br/>
-<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">&#160;7.3&#160;“Service attributes”</a>&#160;<br/>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#34">&#160;6.6&#160;”Service&#160;<br/>DisableNormalCommunicatio<br/>n ($28)”</a>&#160;<br/>&#160;<br/>Removed:&#160;<br/>&#160;-&#160;6.1.2&#160;“Multi&#160;address&#160;ECU&#160;<br/>(dynamic addressing)”&#160;–&#160;only&#160;<br/>target&#160;addresses&#160;0xFE&#160;and&#160;<br/>0xFD&#160;(for&#160;gateways&#160;only)&#160;are&#160;<br/>accepted&#160;by&#160;CANdesc.&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2010-12-21&#160;<br/>
2.8.0&#160;<br/>
Modified:&#160;<br/>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">&#160;5.1&#160;ECU&#160;Address&#160;<br/>configuration&#160;<br/></a>Added:&#160;<br/>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">&#160;6.5&#160;Service&#160;SecurityAccess&#160;<br/>($27)&#160;</a><br/>
Matthias Heil&#160;<br/>
2011-04-20&#160;<br/>
3.0.0&#160;<br/>
Modified:&#160;<br/>&#160;-&#160;Update&#160;to&#160;new&#160;formatting&#160;<br/>&#160;-<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">&#160;6.11&#160;Service&#160;<br/>ProgrammingMode ($A5)&#160;<br/></a>Added:&#160;<br/>&#160;-<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">&#160;4.3&#160;Update&#160;from&#160;earlier&#160;<br/>versions&#160;<br/></a>&#160;-<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">&#160;7.4&#160;State&#160;group&#160;for&#160;the&#160;<br/>Programming&#160;Sequence&#160;</a><br/>
Katrin&#160;Thurow&#160;<br/>
2011-12-16&#160;<br/>
3.1.0&#160;<br/>
Modified:&#160;<br/>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">&#160;5.6.3&#160;High&#160;speed&#160;<br/>programming&#160;mode&#160;state&#160;</a><br/>
Vitalij&#160;Krieger,&#160;Patrick&#160;Rieder&#160;<br/>
2014-05-15&#160;<br/>
3.2.0&#160;<br/>
Added:&#160;<br/>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">&#160;5.5.1&#160;Sending&#160;the&#160;<br/>unsolicited&#160;response&#160;from&#160;a&#160;<br/>different&#160;channel&#160;on&#160;a&#160;<br/>dynamic&#160;TP&#160;<br/></a>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">&#160;6.6.1&#160;Activate&#160;a&#160;$28&#160;post-<br/>handler&#160;for&#160;the&#160;application&#160;<br/></a>&#160;<br/>Modified:&#160;<br/>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">&#160;6.2&#160;Service&#160;<br/>ReadFailureRecordData&#160;<br/>($12)&#160;</a><br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
3&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-4_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>
<b>&#160;</b><br/>
specified&#160;in your&#160;questionnaire,&#160;Vector´s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
4&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=5></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#10"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#10"><b>Related&#160;documents&#160;.....................................................................................................&#160;10</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#11"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#11"><b>Overview&#160;.....................................................................................................................&#160;11</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#12"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#12"><b>CANdesc&#160;support&#160;by&#160;diagnostic&#160;service&#160;..................................................................&#160;12</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#16"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#16"><b>Important&#160;application&#160;requirements&#160;..........................................................................&#160;16</b>&#160;<br/>4.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#16">Initialization&#160;......................................................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">4.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">DeviceControl&#160;($AE)&#160;service requirement&#160;........................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">4.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">Update&#160;from&#160;earlier&#160;versions&#160;............................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18"><b>GM/Opel&#160;specific&#160;functionality&#160;...................................................................................&#160;18</b>&#160;<br/>5.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">ECU&#160;Address configuration&#160;..............................................................................&#160;18&#160;<br/>5.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">Gateway&#160;ECUs&#160;................................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">5.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">Virtual&#160;network&#160;management&#160;............................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">5.1.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">Diagnostic&#160;activity&#160;notification&#160;..........................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">5.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">Request&#160;validation&#160;...........................................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">5.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">Timeout&#160;events&#160;................................................................................................&#160;21&#160;<br/>5.3.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">Tester&#160;present&#160;timeout&#160;......................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">5.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">Using&#160;the&#160;extended&#160;negative response&#160;............................................................&#160;21&#160;<br/>5.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">Sending&#160;an&#160;extended negative response during&#160;service processing&#160;&#160;21&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#22">5.4.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#22">Sending&#160;an&#160;unsolicited&#160;extended negative response&#160;........................&#160;22&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#23">5.5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#23">Sending&#160;an&#160;unsolicited&#160;single&#160;frame&#160;response&#160;.................................................&#160;23&#160;<br/></a><a href="TechnicalReference_CANdesc_KWP_GMs.html#24">5.5.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">Sending&#160;the&#160;unsolicited&#160;response&#160;from&#160;a&#160;different&#160;channel&#160;on&#160;a&#160;<br/>dynamic&#160;TP&#160;......................................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">5.6&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">GM/Opel&#160;CANdesc&#160;state&#160;machine&#160;access&#160;.......................................................&#160;24&#160;<br/></a><a href="TechnicalReference_CANdesc_KWP_GMs.html#25">5.6.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#25">Normal&#160;communication state&#160;............................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#25">5.6.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#25">Programming&#160;mode&#160;state&#160;.................................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">5.6.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">High speed&#160;programming mode&#160;state&#160;..............................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">5.7&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">The&#160;PacketHandler&#160;(another&#160;type&#160;of&#160;service processor)&#160;...................................&#160;26&#160;<br/></a><a href="TechnicalReference_CANdesc_KWP_GMs.html#27">5.7.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#27">PacketHandler&#160;API&#160;...........................................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30"><b>GM/Opel&#160;service&#160;implementations&#160;............................................................................&#160;30</b>&#160;<br/>6.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">Service InitiateDiagnosticOperation&#160;($10)&#160;........................................................&#160;30&#160;<br/>6.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">Service DisableAllDTCs&#160;($10 $02)&#160;...................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">6.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">Service&#160;EnableDTCsDuringDeviceControl&#160;($10&#160;$03)&#160;.......................&#160;30&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">6.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">Service ReadFailureRecordData&#160;($12)&#160;............................................................&#160;31&#160;<br/>6.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">Service ReadFailureRecordIdentifiers&#160;($12&#160;$01)&#160;..............................&#160;31&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">6.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">Service ReadFailureRecordParameters&#160;($12 $02)&#160;...........................&#160;32&#160;</a><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
5&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=6></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">6.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">Service ReturnToNormalMode ($20)&#160;................................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">6.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">Service ReadDataByParameterIdentifier&#160;($22)&#160;................................................&#160;33&#160;<br/>6.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">Reading&#160;a&#160;dynamically&#160;defined PID&#160;(Parameter&#160;Identifier)&#160;...............&#160;33&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">6.5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">Service SecurityAccess ($27)&#160;..........................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#34">6.6&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#34">Service DisableNormalCommunication&#160;($28)&#160;...................................................&#160;34&#160;<br/></a><a href="TechnicalReference_CANdesc_KWP_GMs.html#35">6.6.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">Activate&#160;a $28&#160;post-handler&#160;for&#160;the&#160;application&#160;.................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">6.7&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">Service DynamicallyDefineMessage ($2C)&#160;......................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">6.8&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">Operations&#160;on&#160;dynamically&#160;definable DPIDs&#160;....................................................&#160;36&#160;<br/>6.8.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">Defining&#160;a&#160;dynamically&#160;definable DPID&#160;............................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#37">6.8.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#37">Reading&#160;a&#160;dynamically&#160;definable DPID&#160;............................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#40">6.9&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#40">Service DefinePIDByAddress&#160;($2D)&#160;.................................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">6.10&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">Operations&#160;on&#160;dynamically&#160;definable PIDs&#160;.......................................................&#160;41&#160;<br/>6.10.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">Defining&#160;a&#160;dynamically&#160;definable PID&#160;...............................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">6.10.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">Reading&#160;a&#160;dynamically&#160;definable PID&#160;...............................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">6.11&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">Service ProgrammingMode&#160;($A5)&#160;....................................................................&#160;48&#160;<br/>6.11.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">Allowing&#160;programming mode ($A5 $01/$02)&#160;....................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#49">6.11.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#49">Entering&#160;programming mode ($A5 $03)&#160;...........................................&#160;49&#160;<br/>6.11.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#49">FBL&#160;start&#160;on&#160;EnterProgrammingMode ($A5 $03)&#160;...........&#160;49&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">6.11.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">FBL&#160;start&#160;on&#160;RequestDownload ($34)&#160;............................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">6.11.2.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">Concluding&#160;programming mode&#160;.....................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">6.11.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">Considerations when upgrading&#160;.......................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">6.12&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">Service ReadDiagnosticInformation&#160;($A9)&#160;.......................................................&#160;51&#160;<br/></a><a href="TechnicalReference_CANdesc_KWP_GMs.html#52">6.12.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#52">ReadStatusOfDTCByNumber&#160;($A9&#160;$80)&#160;..........................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#55">6.12.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#55">ReadStatusOfDTCByStatusMask&#160;($A9 $81)&#160;....................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#60">6.12.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#60">SendOnChangeDTCCount&#160;($A9 $82)&#160;..............................................&#160;60&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">6.13&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">Service ReadDataByPacketIdentifier&#160;($AA)&#160;.....................................................&#160;64&#160;<br/></a><a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.13.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">Handling&#160;undefined use&#160;cases&#160;.........................................................&#160;65&#160;<br/>6.13.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">Service $AA&#160;handling&#160;for&#160;undefined dynamically&#160;<br/>definable DPIDs&#160;.............................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.13.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">Service $AA&#160;handling&#160;for&#160;undefined&#160;referenced&#160;<br/>dynamically&#160;defined PIDs&#160;...............................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.13.1.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">Service $AA&#160;handling&#160;for&#160;unaccessible&#160;referenced&#160;PIDs&#160;65&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.14&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">Service DeviceControl&#160;($AE)&#160;...........................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">6.15&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">Service&#160;TesterPresent&#160;($3E)&#160;............................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67"><b>CANdelaStudio default&#160;attribute&#160;settings&#160;.................................................................&#160;67</b>&#160;<br/>7.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">Diagnostic&#160;class attributes&#160;...............................................................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">7.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">Diagnostic&#160;instance&#160;attributes&#160;..........................................................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">7.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">Service attributes&#160;.............................................................................................&#160;69&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">7.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">State&#160;group&#160;for&#160;the&#160;Programming&#160;Sequence&#160;....................................................&#160;72&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73"><b>OBD&#160;support&#160;...............................................................................................................&#160;73</b>&#160;</a><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
6&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=7></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">8.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">CAN&#160;identifiers&#160;.................................................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">8.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">Restrictions&#160;......................................................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">CANdelaStudio default&#160;attribute settings&#160;for&#160;OBD&#160;services&#160;..............................&#160;74&#160;<br/>8.3.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">Diagnostic&#160;classes&#160;...........................................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">CANgen&#160;configuration&#160;......................................................................................&#160;74&#160;<br/>8.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">DBC&#160;attribute settings&#160;for&#160;the&#160;OBD&#160;request&#160;message&#160;.......................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">CANgen&#160;version &lt;&#160;4.15.00&#160;...............................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">CANgen&#160;version&#160;≥&#160;4.15.00&#160;...............................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">GENy&#160;configuration&#160;..........................................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#75">8.5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#75">CANdesc&#160;configuration&#160;(without&#160;a&#160;Powertrain CANdela template)&#160;...................&#160;75&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76"><b>9</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76"><b>Debug&#160;assertion&#160;codes&#160;..............................................................................................&#160;76</b>&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77"><b>10</b>&#160;&#160;<b>Contact&#160;........................................................................................................................&#160;77</b>&#160;<br/></a>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
7&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=8></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Illustrations&#160;</b><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#10">Figure&#160;1-1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#10">Manuals&#160;and References&#160;for&#160;CANdesc&#160;.....................................................&#160;10&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#20">Figure&#160;5-1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#20">Request&#160;message&#160;logical&#160;format&#160;...............................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#23">Figure&#160;5-2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#23">Example code&#160;for&#160;transmitting&#160;an&#160;unsolicited&#160;response&#160;............................&#160;23&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#28">Figure&#160;5-3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#28">Asynchronous&#160;PacketHandler&#160;for&#160;current&#160;CANdesc&#160;versions&#160;....................&#160;28&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">Figure&#160;5-4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">Asynchronous&#160;PacketHandler&#160;with delayed&#160;processing&#160;of&#160;the&#160;first&#160;data&#160;<br/>packet&#160;.......................................................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">Figure&#160;5-5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">Asynchronous&#160;PacketHandler&#160;with dummy&#160;response,&#160;due&#160;to&#160;an&#160;<br/>application error&#160;while obtaining&#160;response&#160;data&#160;........................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">Figure&#160;6-1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">Dynamically&#160;defined DPID&#160;service relations&#160;..............................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#37">Figure&#160;6-2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#37">Dynamically&#160;definable DPID&#160;is&#160;not&#160;defined&#160;...............................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#38">Figure&#160;6-3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#38">Single referenced&#160;PID&#160;cannot&#160;provide&#160;any&#160;data&#160;........................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#39">Figure&#160;6-4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#39">Reading&#160;the&#160;dynamically&#160;defined DPID&#160;succeeds&#160;.....................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#40">Figure&#160;6-5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#40">Dynamically&#160;definable PID,&#160;referenced&#160;by&#160;the&#160;DPID,&#160;is&#160;not&#160;defined&#160;..........&#160;40&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">Figure&#160;6-6&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">Dynamically&#160;defined PID&#160;service relations&#160;................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">Figure&#160;6-7&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">Definition&#160;of&#160;dynamically&#160;definable PID&#160;with valid parameter&#160;....................&#160;41&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">Figure&#160;6-8&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">Defining&#160;of&#160;a&#160;dynamically&#160;definable PID&#160;failed&#160;due&#160;to&#160;security&#160;violation.....&#160;42&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#43">Figure&#160;6-9&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#43">The&#160;dynamically&#160;definable PID&#160;is&#160;not&#160;defined............................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#44">Figure&#160;6-10&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#44">Application error&#160;when reading&#160;the&#160;memory&#160;block&#160;....................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#45">Figure&#160;6-11&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#45">Reading&#160;of&#160;dynamically&#160;defined PID&#160;succeeds&#160;.........................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">Figure&#160;6-12&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">Programming&#160;mode&#160;flowchart&#160;...................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#52">Figure&#160;6-13&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#52">Request&#160;$A9&#160;$80 where&#160;the&#160;requested&#160;fault&#160;type&#160;combination&#160;was&#160;found&#160;&#160;52&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#53">Figure&#160;6-14&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#53">Request&#160;$A9&#160;$80 where&#160;the&#160;requested&#160;fault&#160;type&#160;combination&#160;was not&#160;<br/>found&#160;........................................................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#56">Figure&#160;6-15&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#56">Request&#160;$A9&#160;$81 where&#160;the&#160;application&#160;found&#160;two DTCs&#160;with the&#160;<br/>requested&#160;status&#160;mask&#160;..............................................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#57">Figure&#160;6-16&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#57">Request&#160;$A9&#160;$81 where&#160;the&#160;application cannot&#160;find any&#160;DTCs&#160;with the&#160;<br/>requested&#160;status&#160;mask&#160;..............................................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#60">Figure&#160;6-17&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#60">Request&#160;$A9&#160;$82 with&#160;activation of&#160;the&#160;background DTC&#160;count&#160;monitor&#160;...&#160;60&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#61">Figure&#160;6-18&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#61">Request&#160;$A9&#160;$82 with explicit&#160;deactivation of&#160;the&#160;background&#160;DTC&#160;count&#160;<br/>monitor.&#160;.....................................................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#62">Figure&#160;6-19&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#62">Request&#160;$A9&#160;$82 with deactivation of&#160;the&#160;background&#160;DTC&#160;count&#160;<br/>monitor&#160;by&#160;timeout.&#160;...................................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">Figure&#160;6-20&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">PostHandler&#160;for&#160;“DeviceControl”&#160;($AE)&#160;.....................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">Figure&#160;7-1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">CANdelaStudio views&#160;...............................................................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">Figure&#160;7-2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">Diagnostic&#160;Class level&#160;attributes&#160;...............................................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">Figure&#160;7-3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">Diagnostic&#160;Instance level&#160;attributes&#160;...........................................................&#160;69&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#70">Figure&#160;7-4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#70">Service related&#160;attributes&#160;..........................................................................&#160;70&#160;</a><br/>
<b>&#160;</b><br/>
<b>Tables&#160;<br/></b><a href="TechnicalReference_CANdesc_KWP_GMs.html#16">Table&#160;4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#16">DescInitPowerOn&#160;......................................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">Table&#160;4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">DescInit&#160;....................................................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">Table&#160;5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">ApplDescOnDiagActive&#160;............................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">Table&#160;5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">ApplDescOnDiagInactive&#160;..........................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#22">Table&#160;5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#22">DescSetExtNegResponse&#160;........................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">Table&#160;5-4&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">DescTransmitSingleFrame........................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#25">Table&#160;5-5&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#25">DescGetCommState&#160;.................................................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">Table&#160;5-6&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">DescGetProgMode&#160;...................................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">Table&#160;5-7&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">DescGetHiSpeedMode&#160;.............................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#27">Table&#160;5-8&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#27">PacketHandler&#160;..........................................................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#28">Table&#160;5-9&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#28">DescDataPacketProcessingDone&#160;.............................................................&#160;28&#160;</a><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
8&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=9></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">Table&#160;6-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">ApplDescOnDisableAllDtc&#160;........................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">Table&#160;6-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">ApplDescOnEnableDtcChangeDuringDevCntrl&#160;.........................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">Table&#160;6-3&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">ApplDescOnReturnToNormalMode&#160;...........................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#34">Table&#160;6-4&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#34">ApplDescOnDisableNormalComm&#160;............................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">Table&#160;6-5&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">ApplDescOnEnableNormalComm&#160;.............................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">Table&#160;6-6&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">ApplDescPostDisableNormalCommunication&#160;...........................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#46">Table&#160;6-7&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#46">ApplDescCheckDynPidMemoryArea&#160;........................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#47">Table&#160;6-8&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#47">ApplDescReadDynPidMemContent&#160;..........................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#47">Table&#160;6-9&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#47">DescReadDynPidMemContentDone&#160;.........................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#49">Table&#160;6-10&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#49">ApplDescOnEnterProgMode&#160;.....................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">Table&#160;6-11&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">ApplDescForceEcuReset&#160;..........................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">Table&#160;6-12&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">Service $A9&#160;parallel&#160;execution&#160;matrix&#160;.......................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">Table&#160;6-13&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">ApplDescGetDtcStatusByNumber&#160;............................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">Table&#160;6-14&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">DescRdiDtcStatusByNumberFound&#160;..........................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#55">Table&#160;6-15&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#55">DescRdiDtcStatusByNumberNotFound&#160;....................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#58">Table&#160;6-16&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#58">ApplDescGetDtcStatusByMask&#160;................................................................&#160;58&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#59">Table&#160;6-17&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#59">DescRdiDtcStatusByMaskFound&#160;..............................................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#59">Table&#160;6-18&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#59">DescRdiDtcStatusByMaskNotFound&#160;........................................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">Table&#160;6-19&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">ApplDescEnableOnChangeDtcCount&#160;.......................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">Table&#160;6-20&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">ApplDescDisableOnChangeDtcCount&#160;......................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">Table&#160;6-21&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">DescRdiOnDtcCountChanged&#160;..................................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">Table&#160;6-22&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">DescRdiDeactivateOnChangeDtcCount&#160;...................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">Table&#160;6-23&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">DescActivateS1Timer&#160;...............................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">Table&#160;7-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">Default&#160;‘Diagnostic&#160;Class’&#160;attribute&#160;settings&#160;..............................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">Table&#160;7-2&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">Default&#160;‘Diagnostic&#160;instance’&#160;attribute settings&#160;..........................................&#160;69&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#71">Table&#160;7-3&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#71">Default&#160;‘Service’&#160;attribute&#160;settings&#160;.............................................................&#160;71&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">Table&#160;7-4&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">Programming&#160;Sequence&#160;state&#160;group&#160;........................................................&#160;72&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">Table&#160;8-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#74">Diagnostic&#160;class specific&#160;attributes&#160;...........................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76">Table&#160;9-1&#160;&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76">Debug&#160;assertion&#160;codes&#160;.............................................................................&#160;76&#160;</a><br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
9&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-10_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-10_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-10_3.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>1&#160;&#160;Related&#160;documents&#160;</b><br/>
<b>&#160;&#160;</b>Technical Reference&#160;CANdesc&#160;&#160;<br/>
<b>&#160;&#160;</b>User Manual CANdesc&#160;<br/>
&#160;<br/>
<b>User&#160;Manual</b><br/>
<b>Technical</b><br/>
<b>Technical</b><br/>
<b>Reference</b><br/>
<b>Reference</b><br/>
<b>General</b><br/>
<b>OEM</b><br/>
<b>You&#160;are&#160;here</b><br/>
&#160;<br/>
Figure&#160;1-1&#160;&#160;Manuals&#160;and&#160;References&#160;for&#160;CANdesc&#160;<br/>
All&#160;GM/Opel&#160;specific&#160;CANdesc&#160;topics&#160;are&#160;described&#160;within&#160;this&#160;technical&#160;reference.&#160;Topics&#160;<br/>which&#160;&#160;are&#160;&#160;common&#160;&#160;to&#160;&#160;all&#160;&#160;OEMs&#160;&#160;(e.g.&#160;&#160;features,&#160;&#160;concepts)&#160;&#160;are&#160;&#160;located&#160;&#160;in&#160;&#160;the&#160;&#160;general&#160;<br/>technical reference&#160;document&#160;“TechnicalReference_CANdesc”.&#160;&#160;<br/>For faster integration,&#160;please&#160;refer to&#160;the&#160;user manual&#160;document&#160;“UserManual_CANdesc”.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
10&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=11></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>2&#160;&#160;Overview&#160;</b><br/>
The&#160;&#160;GM/Opel&#160;&#160;version&#160;&#160;of&#160;&#160;CANdesc&#160;&#160;uses&#160;&#160;an&#160;&#160;internal&#160;&#160;implementation&#160;&#160;to&#160;&#160;handle&#160;&#160;many&#160;<br/>diagnostic&#160;&#160;tasks.&#160;&#160;Many&#160;&#160;of&#160;&#160;these&#160;&#160;tasks&#160;&#160;are&#160;&#160;realized&#160;&#160;through&#160;&#160;generated&#160;&#160;code&#160;&#160;(constants,&#160;<br/>state&#160;count,&#160;etc.)&#160;which&#160;gives&#160;more&#160;flexibility&#160;to&#160;the&#160;application&#160;in&#160;case&#160;of&#160;specification&#160;or&#160;<br/>variant&#160;changes.&#160;On&#160;the&#160;other&#160;hand,&#160;there&#160;are&#160;“built-in”&#160;diagnostic&#160;service&#160;implementations&#160;<br/>which&#160;&#160;can&#160;&#160;free&#160;&#160;the&#160;&#160;application&#160;&#160;from&#160;&#160;some&#160;&#160;very&#160;&#160;complex&#160;&#160;tasks&#160;&#160;(e.g.&#160;<br/>ReadDiagnosticInformation&#160;&#160;(SID&#160;&#160;$A9),&#160;&#160;ReadDataByPacketIdentifier&#160;&#160;(SID&#160;&#160;$AA),&#160;&#160;etc.)&#160;&#160;and&#160;<br/>hide&#160;all&#160;of&#160;the&#160;underlying&#160;functionality&#160;under&#160;a&#160;simple&#160;signal&#160;interface&#160;for&#160;the&#160;application.&#160;In&#160;<br/>addition,&#160;CANdesc&#160;also&#160;handles&#160;certain&#160;GM/Opel&#160;specific&#160;management&#160;functionality&#160;(e.g.&#160;<br/>virtual networks)&#160;in&#160;order to&#160;fully&#160;comply&#160;with&#160;GM/Opel diagnostic specifications.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
11&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=12></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>3&#160;&#160;CANdesc support&#160;by&#160;diagnostic&#160;service&#160;</b><br/>
CANdesc&#160;&#160;provides&#160;&#160;three&#160;&#160;possible&#160;&#160;levels&#160;&#160;of&#160;&#160;support&#160;&#160;independently&#160;&#160;for&#160;&#160;each&#160;&#160;diagnostic&#160;<br/>service&#160;–&#160;complete,&#160;assisted,&#160;or&#160;basic.&#160;The&#160;level&#160;of&#160;support&#160;varies&#160;according&#160;to&#160;CANdesc&#160;<br/>capability&#160;&#160;and&#160;&#160;user&#160;&#160;selection&#160;&#160;in&#160;&#160;CANdelaStudio.&#160;&#160;All&#160;&#160;three&#160;&#160;levels&#160;&#160;of&#160;&#160;support&#160;&#160;provide&#160;<br/>complete&#160;&#160;communication&#160;&#160;handling&#160;&#160;(including&#160;&#160;all&#160;&#160;transport&#160;&#160;protocol&#160;&#160;processing&#160;&#160;and&#160;&#160;error&#160;<br/>handling), diagnostic session&#160;and&#160;timer management,&#160;and&#160;basic error checking.&#160;&#160;<br/>Communication&#160;handling&#160;not&#160;only&#160;includes&#160;testing&#160;support&#160;of&#160;service,&#160;but&#160;also&#160;consistency&#160;<br/>of&#160;&#160;service,&#160;&#160;sub-function&#160;&#160;and/or&#160;&#160;identifier&#160;&#160;combination.&#160;&#160;A&#160;&#160;validity&#160;&#160;check&#160;&#160;of&#160;&#160;the&#160;&#160;addressing&#160;<br/>method&#160;and&#160;data&#160;length&#160;is&#160;performed.&#160;Parallel&#160;requests&#160;are&#160;managed&#160;(SID&#160;$3E,&#160;$AA,&#160;and&#160;<br/>$A9)&#160;&#160;when&#160;&#160;allowed.&#160;&#160;As&#160;&#160;error&#160;&#160;handling&#160;&#160;is&#160;&#160;a&#160;&#160;significant&#160;&#160;part&#160;&#160;of&#160;&#160;any&#160;&#160;ECU&#160;&#160;software,&#160;&#160;all&#160;&#160;low&#160;<br/>level&#160;&#160;errors&#160;&#160;are&#160;&#160;handled&#160;&#160;internally&#160;&#160;by&#160;&#160;CANdesc.&#160;&#160;Finally,&#160;&#160;CANdesc&#160;&#160;assists&#160;&#160;with&#160;&#160;the&#160;<br/>connection&#160;&#160;to&#160;&#160;GMLAN&#160;&#160;(e.g.&#160;&#160;supervision&#160;&#160;and&#160;&#160;management&#160;&#160;of&#160;&#160;the&#160;&#160;VN&#160;&#160;timer,&#160;&#160;message&#160;<br/>transmission&#160;mode,&#160;bus speed&#160;switching,&#160;etc.).&#160;<br/>
<b>Complete&#160;</b><br/>
Complete&#160;support&#160;means&#160;that&#160;CANdesc&#160;is&#160;capable&#160;of&#160;handling&#160;the&#160;diagnostic&#160;transaction&#160;<br/>without&#160;&#160;requesting&#160;&#160;support&#160;&#160;from&#160;&#160;the&#160;&#160;ECU&#160;&#160;application.&#160;&#160;The&#160;&#160;ECU&#160;&#160;developer&#160;&#160;need&#160;&#160;not&#160;<br/>provide&#160;&#160;any&#160;&#160;code&#160;&#160;to&#160;&#160;help&#160;&#160;implement&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;feature;&#160;&#160;CANdesc&#160;&#160;handles&#160;&#160;all&#160;<br/>processing.&#160;&#160;In&#160;&#160;the&#160;&#160;case&#160;&#160;where&#160;&#160;diagnostic&#160;&#160;messages&#160;&#160;contain&#160;&#160;real-time&#160;&#160;data,&#160;&#160;or&#160;&#160;“signals”,&#160;<br/>CANdesc&#160;can&#160;map&#160;that&#160;data&#160;to&#160;global&#160;variables&#160;in&#160;the&#160;ECU&#160;application&#160;and&#160;read/write&#160;the&#160;<br/>values&#160;&#160;directly&#160;&#160;to/from&#160;&#160;RAM&#160;&#160;without&#160;&#160;calling&#160;&#160;any&#160;&#160;ECU&#160;&#160;application&#160;&#160;callbacks;&#160;&#160;the&#160;&#160;ECU&#160;<br/>developer&#160;&#160;does&#160;&#160;not&#160;&#160;have&#160;&#160;to&#160;&#160;concern&#160;&#160;himself&#160;&#160;with&#160;&#160;the&#160;&#160;protocol&#160;&#160;level&#160;&#160;implementation.&#160;&#160;If&#160;&#160;a&#160;<br/>service&#160;&#160;modifies&#160;&#160;a&#160;&#160;diagnostic&#160;&#160;state&#160;&#160;group,&#160;&#160;CANdesc&#160;&#160;notifies&#160;&#160;the&#160;&#160;application&#160;&#160;using&#160;&#160;a&#160;<br/>callback&#160;function.&#160;<br/>
<b>Assisted&#160;</b><br/>
Assisted&#160;support&#160;means&#160;that&#160;CANdesc&#160;is&#160;capable&#160;of&#160;fully&#160;parsing&#160;request&#160;messages&#160;and&#160;<br/>building&#160;&#160;response&#160;&#160;messages,&#160;&#160;but&#160;&#160;it&#160;&#160;does&#160;&#160;not&#160;&#160;contain&#160;&#160;the&#160;&#160;logic&#160;&#160;necessary&#160;&#160;to&#160;&#160;execute&#160;&#160;the&#160;<br/>request&#160;&#160;or&#160;&#160;determine&#160;&#160;data&#160;&#160;values.&#160;&#160;The&#160;&#160;ECU&#160;&#160;developer&#160;&#160;must&#160;&#160;provide&#160;&#160;callbacks&#160;&#160;for&#160;<br/>CANdesc&#160;to&#160;fill&#160;these&#160;logic&#160;gaps,&#160;&#160;which&#160;&#160;typically&#160;come&#160;in&#160;the&#160;form&#160;of&#160;calculating&#160;a&#160;signal&#160;<br/>value,&#160;controlling&#160;an&#160;I/O&#160;port,&#160;or&#160;perhaps&#160;executing&#160;an&#160;ECU-specific&#160;feature&#160;such&#160;as&#160;a&#160;self-<br/>test&#160;or&#160;EEPROM&#160;access routine.&#160;<br/>
<b>Basic&#160;</b><br/>
Basic&#160;support&#160;means&#160;that&#160;CANdesc&#160;is&#160;only&#160;capable&#160;of&#160;identifying&#160;that&#160;the&#160;ECU&#160;application&#160;<br/>must&#160;process&#160;the&#160;request.&#160;The&#160;ECU&#160;application&#160;may&#160;have&#160;to&#160;provide&#160;logic&#160;to&#160;validate&#160;the&#160;<br/>request&#160;message&#160;and&#160;build&#160;the&#160;response&#160;byte-by-byte.&#160;This&#160;level&#160;of&#160;support&#160;is&#160;only&#160;used&#160;<br/>where code&#160;generation&#160;is not&#160;practical&#160;or supported.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
12&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=13></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>RequestCurrentDiagnosticData&#160;($01)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;implement&#160;&#160;only&#160;&#160;the&#160;&#160;handling&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;(no&#160;&#160;request&#160;&#160;length&#160;<br/>validation).&#160;&#160;<br/>
<b>RequestFreezeFrameData&#160;($02)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;implement&#160;&#160;only&#160;&#160;the&#160;&#160;handling&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;(no&#160;&#160;request&#160;&#160;length&#160;<br/>validation).&#160;<br/>
<b>RequestEmissionRelatedDTC ($03)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;implement&#160;&#160;only&#160;&#160;the&#160;&#160;handling&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;(no&#160;&#160;request&#160;&#160;length&#160;<br/>validation).<b>&#160;</b><br/>
<b>ClearDiagnosticInformation ($04)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;application&#160;must&#160;provide&#160;a&#160;function&#160;that&#160;clears&#160;fault&#160;memory.&#160;&#160;<br/>
<b>RequestTestResultsForNonContinouslyMonitoredSystems&#160;($06)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;implement&#160;&#160;only&#160;&#160;the&#160;&#160;handling&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;(no&#160;&#160;request&#160;&#160;length&#160;<br/>validation).&#160;<br/>
<b>RequestTestResultsForContinouslyMonitoredSystems&#160;($07)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;implement&#160;&#160;only&#160;&#160;the&#160;&#160;handling&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;(no&#160;&#160;request&#160;&#160;length&#160;<br/>validation).&#160;<br/>
<b>RequestControlOfOnBoardSystemTestOrComponent ($08)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;implement&#160;&#160;only&#160;&#160;the&#160;&#160;handling&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;(no&#160;&#160;request&#160;&#160;length&#160;<br/>validation&#160;when&#160;the&#160;request&#160;data&#160;length&#160;is a&#160;constant&#160;value).&#160;<br/>
<b>RequestVehicleInformation ($09)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;implement&#160;&#160;only&#160;&#160;the&#160;&#160;handling&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;(no&#160;&#160;request&#160;&#160;length&#160;<br/>validation).&#160;<br/>
<b>InitiateDiagnosticOperation ($10)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;provide&#160;&#160;a&#160;&#160;function&#160;&#160;that&#160;&#160;implements&#160;&#160;the&#160;&#160;logic&#160;&#160;to&#160;&#160;enable/disable&#160;&#160;the&#160;<br/>settings of&#160;DTCs.&#160;<br/>
<b>ReadFailureRecordData ($12)&#160;–&#160;Basic&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;provide&#160;&#160;a&#160;&#160;function&#160;&#160;that&#160;&#160;implements&#160;&#160;the&#160;&#160;request&#160;&#160;parsing&#160;&#160;(validation)&#160;<br/>and&#160;the&#160;logic to&#160;report the&#160;failure record&#160;data.&#160;<br/>
<b>ReadDataByIdentifier ($1A)&#160;–&#160;Complete&#160;</b><br/>
CANdesc&#160;&#160;completely&#160;&#160;implements&#160;&#160;this&#160;&#160;service&#160;&#160;for&#160;&#160;DIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;maps&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;&#160;Assisted&#160;&#160;support&#160;&#160;is&#160;&#160;provided&#160;&#160;for&#160;&#160;DIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;does&#160;&#160;not&#160;&#160;map&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
13&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=14></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>ReturnToNormalMode&#160;($20)&#160;–&#160;Complete&#160;</b><br/>
The&#160;application&#160;must&#160;provide&#160;an&#160;implementation&#160;for&#160;the&#160;event-based&#160;callbacks&#160;triggered&#160;by&#160;<br/>this service.&#160;<br/>
<b>ReadDataByParameterIdentifier ($22)&#160;–&#160;Complete&#160;</b><br/>
CANdesc&#160;&#160;completely&#160;&#160;implements&#160;&#160;this&#160;&#160;service&#160;&#160;for&#160;&#160;PIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;maps&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;&#160;Assisted&#160;&#160;support&#160;&#160;is&#160;&#160;provided&#160;&#160;for&#160;&#160;PIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;does&#160;&#160;not&#160;&#160;map&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;In&#160;any&#160;case,&#160;multiple&#160;PID&#160;handling&#160;(in&#160;a&#160;single&#160;request)&#160;is&#160;handled&#160;internally&#160;by&#160;<br/>CANdesc.&#160;<br/>
<b>ReadMemoryByAddress&#160;($23)&#160;–&#160;Basic&#160;</b><br/>
The&#160;application&#160;must&#160;provide&#160;a&#160;function&#160;to&#160;determine&#160;if&#160;the&#160;requested&#160;address&#160;is&#160;valid&#160;and&#160;<br/>a&#160;function&#160;to&#160;return&#160;the&#160;data&#160;stored&#160;at&#160;the&#160;requested&#160;address.&#160;<br/>
<b>SecurityAccess&#160;($27)&#160;–&#160;Basic&#160;</b><br/>
The&#160;application&#160;must&#160;provide&#160;functions,&#160;which&#160;implement&#160;the&#160;security&#160;access mechanism.&#160;<br/>By&#160;&#160;utilizing&#160;&#160;a&#160;&#160;diagnostic&#160;&#160;state&#160;&#160;group,&#160;&#160;CANdesc&#160;&#160;can&#160;&#160;track&#160;&#160;the&#160;&#160;current&#160;&#160;security&#160;&#160;level&#160;&#160;and&#160;<br/>assist the&#160;application&#160;in&#160;determining&#160;if&#160;a&#160;request&#160;is allowed&#160;at&#160;the&#160;given&#160;time.&#160;<br/>
<b>DisableNormalCommunication ($28)&#160;–&#160;Complete&#160;</b><br/>
CANdesc completely&#160;implements&#160;this service.&#160;<br/>
<b>DynamicallyDefineMessage&#160;($2C)&#160;–&#160;Complete&#160;</b><br/>
CANdesc completely&#160;implements&#160;this service.&#160;<br/>
<b>DefinePIDByAddress&#160;($2D)&#160;–&#160;Complete&#160;</b><br/>
CANdesc completely&#160;implements&#160;this service.&#160;<br/>
<b>RequestDownload ($34)&#160;–&#160;Basic&#160;</b><br/>
The&#160;application&#160;must&#160;implement&#160;this service.&#160;<br/>
<b>TransferData&#160;($36)&#160;–&#160;Basic&#160;</b><br/>
The&#160;application&#160;must&#160;implement&#160;this service.&#160;<br/>
<b>WriteDataByIdentifier ($3B)&#160;–&#160;Complete&#160;</b><br/>
CANdesc&#160;&#160;completely&#160;&#160;implements&#160;&#160;this&#160;&#160;service&#160;&#160;for&#160;&#160;DIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;maps&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;&#160;Assisted&#160;&#160;support&#160;&#160;is&#160;&#160;provided&#160;&#160;for&#160;&#160;DIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;does&#160;&#160;not&#160;&#160;map&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;<br/>
<b>TesterPresent&#160;($3E)&#160;–&#160;Complete&#160;</b><br/>
CANdesc completely&#160;implements&#160;this service.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
14&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-15_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>ReportProgrammedState&#160;($A2)&#160;–&#160;Complete&#160;</b><br/>
CANdesc&#160;&#160;completely&#160;&#160;implements&#160;&#160;this&#160;&#160;service&#160;&#160;if&#160;&#160;the&#160;&#160;programmed&#160;&#160;state&#160;&#160;maps&#160;&#160;to&#160;&#160;a&#160;&#160;global&#160;<br/>variable.&#160;Assisted&#160;support&#160;is&#160;provided&#160;if&#160;the&#160;programmed&#160;state&#160;does&#160;not&#160;map&#160;to&#160;a&#160;global&#160;<br/>variable.<b>&#160;</b><br/>
<b>ProgrammingMode&#160;($A5)&#160;–&#160;Assisted&#160;&#160;</b><br/>
The&#160;application&#160;must&#160;only&#160;provide&#160;functions&#160;that&#160;implement&#160;programming&#160;mode&#160;requests.&#160;<br/>CANdesc performs state&#160;checking&#160;internally.&#160;<br/>
<b>ReadDiagnosticInformation ($A9)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;application&#160;must&#160;provide&#160;functions&#160;that&#160;read&#160;fault&#160;memory&#160;and&#160;construct&#160;the&#160;response&#160;<br/>messages&#160;byte-by-byte.&#160;The&#160;application&#160;must&#160;provide&#160;functions&#160;to&#160;retrieve&#160;the&#160;number&#160;of&#160;<br/>fault&#160;&#160;codes&#160;&#160;and&#160;&#160;to&#160;&#160;step&#160;&#160;through&#160;&#160;the&#160;&#160;list&#160;&#160;of&#160;&#160;fault&#160;&#160;codes&#160;&#160;matching&#160;&#160;the&#160;&#160;requested&#160;&#160;mask.&#160;<br/>Moreover,&#160;&#160;it&#160;&#160;has&#160;&#160;to&#160;&#160;detect&#160;&#160;a&#160;&#160;change&#160;&#160;in&#160;&#160;the&#160;&#160;number&#160;&#160;of&#160;&#160;DTCs.&#160;&#160;CANdesc&#160;&#160;handles&#160;&#160;the&#160;<br/>scheduler internally.&#160;<br/>
<b>ReadDataByPacketIdentifier ($AA)&#160;–&#160;Complete&#160;</b><br/>
CANdesc&#160;&#160;completely&#160;&#160;implements&#160;&#160;this&#160;&#160;service&#160;&#160;for&#160;&#160;DPIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;maps&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;&#160;Assisted&#160;&#160;support&#160;&#160;is&#160;&#160;provided&#160;&#160;for&#160;&#160;DPIDs&#160;&#160;whose&#160;&#160;data&#160;&#160;does&#160;&#160;not&#160;&#160;map&#160;&#160;to&#160;&#160;global&#160;<br/>variables.&#160;The&#160;scheduler is handled&#160;internally by&#160;CANdesc.&#160;<br/>
<b>DeviceControl ($AE)&#160;–&#160;Assisted&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;provide&#160;&#160;device-specific&#160;&#160;functions&#160;&#160;that&#160;&#160;implement&#160;&#160;the&#160;&#160;control&#160;<br/>algorithms.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>Diagnostic&#160;services other&#160;than&#160;those listed&#160;above are&#160;not&#160;supported&#160;by&#160;CANdesc&#160;in any&#160;<br/>
<b>&#160;&#160;</b>way&#160;and must&#160;be&#160;implemented&#160;entirely&#160;by&#160;the&#160;ECU&#160;developer&#160;as a&#160;workaround.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
15&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=16></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>4&#160;&#160;Important&#160;application&#160;requirements&#160;</b><br/>
<b>4.1&#160;</b><br/>
<b>Initialization&#160;</b><br/>
In&#160;&#160;order&#160;&#160;to&#160;&#160;initialize&#160;&#160;the&#160;&#160;GM/Opel&#160;&#160;CANdesc&#160;&#160;component,&#160;&#160;the&#160;&#160;application&#160;&#160;must&#160;&#160;call&#160;&#160;the&#160;<br/>following&#160;function:&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescInitPowerOn</b>&#160;(DescInitParam initParameter)&#160;<br/>
<b>Parameter&#160;<br/></b>initParameter&#160;<br/>
Initialization&#160;parameter&#160;<br/>(recommended:&#160;‘kDescPowerOnInitParam’)&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Power-on&#160;initialization of&#160;the CANdesc&#160;component.&#160;&#160;<br/>The&#160;application&#160;must call&#160;this&#160;function&#160;once&#160;after power-on, before&#160;all&#160;other&#160;CANdesc&#160;functions.&#160;<br/>
&#160;<br/>The&#160;GM/Opel&#160;version&#160;of&#160;CANdesc&#160;has&#160;no&#160;special&#160;behavior for initialization; therefore, the initialization&#160;<br/>function&#160;can&#160;be&#160;called&#160;with&#160;any&#160;parameter&#160;value.&#160;Even&#160;so,&#160;it&#160;is&#160;recommended that&#160;the&#160;ECU developer&#160;use&#160;<br/>‘kDescPowerOnInitParam’&#160;for&#160;the&#160;parameter&#160;value.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;DescInitPowerOn (initParameter)&#160;must be called&#160;after&#160;TpInitPowerOn()&#160;(please refer to the transport&#160;<br/>
protocol&#160;documentation)&#160;or&#160;any&#160;reserved diagnostic&#160;connection&#160;will&#160;be lost.&#160;<br/>
&#160;&#160;DescInitPowerOn (initParameter)&#160;calls&#160;DescInit()&#160;internally&#160;for further initializations&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;with&#160;global&#160;interrupts&#160;disabled&#160;&#160;<br/>
Table&#160;4-1&#160;&#160;&#160;DescInitPowerOn&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescInit</b>&#160;(DescInitParam initParameter)&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
16&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=17></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Parameter&#160;<br/></b>initParameter&#160;<br/>
Initialization&#160;parameter&#160;<br/>(recommended:&#160;‘kDescPowerOnInitParam’)&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Re-initializes&#160;the&#160;CANdesc&#160;component.&#160;<br/>The&#160;application&#160;can call&#160;this&#160;function&#160;to&#160;re-initialize CANdesc&#160;(e.g.&#160;after wakeup).&#160;All&#160;internal&#160;states&#160;will&#160;be&#160;<br/>set&#160;to&#160;their&#160;default&#160;values.&#160;<br/>
&#160;<br/>The&#160;GM/Opel&#160;version&#160;of&#160;CANdesc&#160;has&#160;no&#160;special&#160;behavior for initialization; therefore, the initialization&#160;<br/>function&#160;can&#160;be&#160;called&#160;with&#160;any&#160;parameter&#160;value.&#160;Even&#160;so,&#160;it&#160;is&#160;recommended that&#160;the&#160;ECU developer&#160;use&#160;<br/>‘kDescPowerOnInitParam’&#160;for&#160;the&#160;parameter&#160;value.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;The&#160;application&#160;has&#160;already&#160;initialized&#160;CANdesc&#160;once by&#160;calling&#160;<b>DescInitPowerOn()</b>&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;with&#160;global&#160;interrupts&#160;disabled&#160;<br/>
Table&#160;4-2&#160;&#160;&#160;DescInit&#160;<br/>
<b>4.2&#160;</b><br/>
<b>DeviceControl ($AE)&#160;service&#160;requirement&#160;</b><br/>
The&#160;GM/Opel&#160;diagnostic&#160;specification&#160;requires&#160;that&#160;device&#160;control&#160;activity&#160;shall&#160;be&#160;limited&#160;<br/>by&#160;tester present&#160;timeout.&#160;&#160;<br/>Please&#160;refer to&#160;the&#160;section<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">&#160;<i>Service&#160;DeviceControl ($AE)</i>&#160;</a>for more details.&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Update from&#160;earlier versions&#160;</b><br/>
The&#160;&#160;behavior&#160;&#160;of&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;embedded&#160;&#160;module&#160;&#160;has&#160;&#160;not&#160;&#160;changed&#160;&#160;fundamentally&#160;&#160;in&#160;<br/>CANdesc&#160;&#160;version&#160;&#160;6.x,&#160;&#160;but&#160;&#160;the&#160;&#160;configuration&#160;&#160;is&#160;&#160;much&#160;&#160;more&#160;&#160;independent&#160;&#160;from&#160;&#160;the&#160;&#160;CDD&#160;<br/>settings.&#160;Many&#160;options&#160;that&#160;were&#160;previously&#160;only&#160;configurable&#160;as&#160;attributes&#160;in&#160;the&#160;CDD&#160;file&#160;<br/>are now&#160;available&#160;for configuration&#160;in&#160;the&#160;GENy&#160;configuration&#160;tool.&#160;<br/>As&#160;part&#160;of&#160;this&#160;change,&#160;the&#160;naming&#160;scheme&#160;for&#160;service&#160;callbacks&#160;is&#160;now&#160;more&#160;independent&#160;<br/>from&#160;the&#160;CDD&#160;contents&#160;and&#160;more&#160;adherent&#160;to&#160;the&#160;GMW3110&#160;specification.&#160;This&#160;will&#160;require&#160;<br/>modification&#160;of&#160;existing&#160;application&#160;code&#160;to&#160;fit&#160;the&#160;new&#160;naming&#160;scheme.&#160;<br/>In&#160;addition,&#160;the&#160;implementation&#160;of&#160;mode&#160;$A5&#160;was&#160;changed&#160;to&#160;use&#160;the&#160;standard&#160;CANdesc&#160;<br/>state&#160;&#160;management&#160;&#160;feature.&#160;&#160;You&#160;&#160;can&#160;&#160;now&#160;&#160;easily&#160;&#160;have&#160;&#160;service&#160;&#160;execution&#160;&#160;depend&#160;&#160;on&#160;&#160;the&#160;<br/>reprogramming&#160;sequence,&#160;e.g.&#160;prevent&#160;a&#160;service&#160;from&#160;executing&#160;while&#160;programming&#160;mode&#160;<br/>is&#160;&#160;active.&#160;&#160;Please&#160;&#160;also&#160;&#160;refer&#160;&#160;to&#160;&#160;chapte<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">r&#160;&#160;<i>6.11&#160;&#160;</i></a><i>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">&#160;&#160;Service&#160;&#160;ProgrammingMode&#160;&#160;($A5)</i>&#160;&#160;</a>for&#160;&#160;more&#160;<br/>information.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
17&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=18></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>5&#160;&#160;GM/Opel&#160;specific&#160;functionality&#160;&#160;</b><br/>
<b>5.1&#160;</b><br/>
<b>ECU&#160;Address&#160;configuration&#160;</b><br/>
GM/Opel&#160;&#160;use&#160;&#160;extended&#160;&#160;addressing&#160;&#160;for&#160;&#160;the&#160;&#160;functional&#160;&#160;request&#160;&#160;message.&#160;&#160;By&#160;&#160;default,&#160;<br/>CANdesc&#160;&#160;will&#160;&#160;accept&#160;&#160;any&#160;&#160;request&#160;&#160;with&#160;&#160;target&#160;&#160;address&#160;&#160;0xFE.&#160;&#160;There&#160;&#160;are&#160;&#160;some&#160;&#160;other&#160;&#160;use&#160;<br/>cases&#160;that&#160;are&#160;&#160;considered&#160;to&#160;be&#160;supported&#160;with&#160;the&#160;help&#160;of&#160;&#160;user&#160;configuration&#160;files&#160;(refer&#160;<br/>the&#160;“<i>TechnicalReference_CANdesc.pdf</i>”&#160;for configuration&#160;details).&#160;<br/>
<b>5.1.1&#160;</b><br/>
<b>Gateway&#160;ECUs&#160;</b><br/>
According&#160;to&#160;the&#160;GMW3110&#160;v1.6,&#160;gateways&#160;shall&#160;be&#160;accessible&#160;also&#160;via&#160;the&#160;special&#160;target&#160;<br/>address&#160;&#160;0xFD.&#160;&#160;To&#160;&#160;enable&#160;&#160;the&#160;&#160;reception&#160;&#160;on&#160;&#160;this&#160;&#160;address,&#160;&#160;please&#160;&#160;insert&#160;&#160;into&#160;&#160;your&#160;&#160;user&#160;<br/>configuration&#160;file&#160;for CANdesc the&#160;following&#160;definition:&#160;<br/>#define&#160;DESC_ENABLE_GW_ECU_ADDR&#160;&#160;<br/>
<b>5.1.2&#160;</b><br/>
<b>Virtual&#160;network&#160;management&#160;</b><br/>
A&#160;&#160;GMLAN/IVLAN&#160;&#160;specific&#160;&#160;implementation&#160;&#160;is&#160;&#160;built&#160;&#160;into&#160;&#160;CANdesc,&#160;&#160;which&#160;&#160;completely&#160;<br/>integrates&#160;&#160;CANdesc&#160;&#160;into&#160;&#160;a&#160;&#160;GM/Opel&#160;&#160;project.&#160;&#160;CANdesc&#160;&#160;manages&#160;&#160;all&#160;&#160;aspects&#160;&#160;of&#160;&#160;the&#160;<br/>diagnostics VN,&#160;including&#160;activation&#160;of&#160;the&#160;VN&#160;in&#160;the&#160;GMLAN&#160;handler&#160;and&#160;then&#160;deactivation&#160;<br/>of&#160;the&#160;VN&#160;after&#160;diagnostic inactivity&#160;(e.g.&#160;missing&#160;tester)&#160;as&#160;described&#160;in&#160;GMW-3110.&#160;&#160;<br/>When&#160;the&#160;first&#160;diagnostic&#160;request&#160;is&#160;received,&#160;CANdesc&#160;will&#160;activate&#160;the&#160;diagnostics&#160;VN&#160;to&#160;<br/>provide&#160;communication&#160;capability&#160;with&#160;the&#160;tester.&#160;The&#160;VN&#160;is&#160;then&#160;automatically&#160;deactivated&#160;<br/>under the&#160;following&#160;conditions:&#160;<br/>
<b>&#160;&#160;</b>8&#160;seconds&#160;after the&#160;diagnostic request&#160;“ReturnToNormalMode” ($20) is received&#160;<br/>
<b>&#160;&#160;</b>8&#160;seconds&#160;after the&#160;tester present&#160;timeout&#160;<br/>
<b>&#160;&#160;</b>8&#160;seconds&#160;after the&#160;last&#160;response&#160;is sent,&#160;or in&#160;the&#160;case&#160;of&#160;requests&#160;that&#160;do&#160;not&#160;send&#160;a&#160;<br/>
response,&#160;8&#160;seconds&#160;after the&#160;request&#160;is completely&#160;processed&#160;<br/>
<b>5.1.3&#160;</b><br/>
<b>Diagnostic&#160;activity&#160;notification&#160;</b><br/>
CANdesc&#160;notifies&#160;the&#160;application&#160;via&#160;a&#160;callback&#160;function&#160;when&#160;a&#160;diagnostic&#160;session&#160;begins&#160;<br/>(the&#160;first&#160;&#160;diagnostic&#160;request)&#160;and&#160;when&#160;it&#160;ends&#160;(the&#160;deactivation&#160;conditions&#160;listed&#160;above).&#160;<br/>These&#160;callbacks&#160;are listed&#160;below.&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnDiagActive</b>&#160;(void)&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
18&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=19></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
When&#160;the first diagnostic&#160;request (after ECU power-on&#160;or wakeup) is&#160;received,&#160;regardless&#160;of&#160;the&#160;addressing&#160;<br/>method, CANdesc&#160;calls&#160;this&#160;function&#160;to notify&#160;the&#160;application that&#160;ECU diagnostics&#160;are now active&#160;(so that&#160;<br/>the&#160;application&#160;can&#160;begin&#160;diagnostic&#160;specific&#160;tasks, for instance).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;None&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Interrupt&#160;context,&#160;if&#160;the&#160;CAN-driver is&#160;configured to handle receive&#160;messages&#160;in interrupt mode&#160;&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context,&#160;if&#160;the CAN-driver&#160;is&#160;configured&#160;to handle&#160;receive messages&#160;in&#160;<br/>
polling&#160;mode&#160;<br/>
Table&#160;5-1&#160;&#160;&#160;ApplDescOnDiagActive&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnDiagInactive</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Once the&#160;conditions&#160;for deactivating&#160;the diagnostics&#160;VN are met&#160;(i.e.&#160;the&#160;diagnostics&#160;VN timer reaches&#160;<br/>zero), CANdesc&#160;calls&#160;this&#160;function to&#160;notify&#160;the application&#160;that ECU diagnostics&#160;are no&#160;longer&#160;active (so&#160;<br/>that the&#160;application can&#160;end&#160;diagnostic&#160;specific&#160;tasks&#160;to&#160;lower&#160;CPU&#160;utilization, for&#160;instance).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;None&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;<b>DescTimerTask()</b>.&#160;<br/>
Table&#160;5-2&#160;&#160;&#160;ApplDescOnDiagInactive&#160;<br/>
<b>5.2&#160;</b><br/>
<b>Request validation&#160;</b><br/>
The&#160;&#160;GM/Opel&#160;&#160;version&#160;&#160;of&#160;&#160;CANdesc&#160;&#160;is&#160;&#160;capable&#160;&#160;of&#160;&#160;performing&#160;&#160;the&#160;&#160;following&#160;&#160;request&#160;<br/>validations:&#160;<br/>
<b>&#160;&#160;</b>Is&#160;the&#160;designed&#160;diagnostic buffer big&#160;enough&#160;to&#160;hold&#160;the&#160;whole&#160;request?&#160;If&#160;the&#160;request&#160;is&#160;<br/>
physically&#160;addressed,&#160;the&#160;GM/Opel CANdesc&#160;implementation&#160;will accept&#160;it&#160;even&#160;if&#160;the&#160;<br/>length&#160;is greater than&#160;the&#160;defined&#160;buffer&#160;and&#160;let&#160;the&#160;“request&#160;length&#160;validation” routine&#160;<br/>handle&#160;the&#160;situation.&#160;If&#160;the&#160;request&#160;is&#160;functionally&#160;addressed&#160;and&#160;the&#160;length&#160;is greater&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
19&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-20_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
than&#160;the&#160;defined&#160;buffer,&#160;it&#160;will be&#160;ignored&#160;(regardless of&#160;whether it would&#160;normally&#160;send&#160;a&#160;<br/>response).&#160;&#160;<br/>
<b>&#160;&#160;</b>Is&#160;the&#160;requested&#160;SID supported?&#160;If&#160;the&#160;SID is&#160;not&#160;relevant&#160;for the&#160;ECU,&#160;CANdesc will&#160;<br/>
automatically&#160;send&#160;a&#160;negative&#160;response&#160;with&#160;error code&#160;“ServiceNotSupported” ($11).&#160;<br/>Further processing&#160;will&#160;be&#160;aborted.&#160;<br/>
<b>&#160;&#160;</b>Is&#160;the&#160;request&#160;addressing&#160;method&#160;for the&#160;SID&#160;correct?&#160;Two&#160;cases are&#160;possible:&#160;<br/>
<b>&#160;&#160;</b>The&#160;requested&#160;SID normally&#160;provides a&#160;response&#160;(as&#160;defined&#160;in&#160;CANdelaStudio).&#160;In&#160;<br/>
this case,&#160;CANdesc&#160;will send&#160;a&#160;negative&#160;response&#160;with&#160;error code&#160;<br/>“ConditionsNotCorrect” ($22).&#160;Further processing&#160;will be&#160;aborted.&#160;<br/>
<b>&#160;&#160;</b>The&#160;requested&#160;SID normally&#160;does&#160;not&#160;provide&#160;a&#160;response&#160;(as&#160;defined&#160;in&#160;<br/>
CANdelaStudio).&#160;In&#160;this case,&#160;the&#160;request&#160;will&#160;be&#160;ignored.&#160;<br/>
<b>&#160;&#160;</b>Does the&#160;request&#160;meet&#160;the&#160;minimum&#160;required&#160;length&#160;(to&#160;be&#160;distinguishable&#160;from&#160;other&#160;<br/>
instances)?&#160;Each&#160;request&#160;is&#160;formatted&#160;as shown&#160;in&#160;the&#160;figure below:&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;5-1&#160;&#160;Request&#160;message&#160;logical&#160;format&#160;<br/>
<b>&#160;&#160;</b>In&#160;order to&#160;process&#160;the&#160;request&#160;further,&#160;the&#160;service&#160;instance&#160;must&#160;be&#160;found&#160;(which&#160;<br/>
provides more&#160;detailed&#160;information&#160;about&#160;the&#160;request&#160;than&#160;the&#160;SID&#160;alone); therefore,&#160;<br/>the&#160;request&#160;must&#160;be&#160;at&#160;least&#160;n&#160;+ 1&#160;bytes in&#160;length,&#160;where n&#160;is service&#160;dependent.&#160;<br/>
<b>&#160;&#160;</b>If&#160;the&#160;length&#160;is less&#160;than&#160;the&#160;minimum&#160;allowed&#160;(as&#160;defined&#160;in&#160;CANdelaStudio),&#160;<br/>
CANdesc will send&#160;a&#160;negative&#160;response&#160;with&#160;error code&#160;<br/>“SubfunctionNotSupportedInvalidFormat” ($12).&#160;Further&#160;processing&#160;will&#160;be&#160;aborted.&#160;<br/>
<b>&#160;&#160;</b>Is&#160;the&#160;requested&#160;service&#160;instance&#160;supported&#160;by&#160;the&#160;ECU?&#160;If&#160;not,&#160;CANdesc will send&#160;a&#160;<br/>
negative&#160;response&#160;with&#160;error code&#160;“SubfunctionNotSupportedInvalidFormat” ($12).&#160;<br/>Further processing&#160;will&#160;be&#160;aborted.&#160;<br/>
<b>&#160;&#160;</b>Is&#160;the&#160;total request&#160;length&#160;correct?&#160;Two&#160;cases are possible:&#160;<br/>
<b>&#160;&#160;</b>The&#160;request&#160;length&#160;is&#160;dynamic.&#160;In&#160;this case,&#160;no&#160;automated&#160;check can&#160;be&#160;performed,&#160;<br/>
and&#160;the&#160;task will be&#160;left&#160;to&#160;the&#160;application.&#160;<br/>
<b>&#160;&#160;</b>The&#160;request&#160;length&#160;is&#160;fixed.&#160;In&#160;this case,&#160;CANdesc will check if&#160;the&#160;current&#160;request&#160;<br/>
length&#160;matches the&#160;expected&#160;length&#160;(as&#160;defined&#160;in&#160;CANdelaStudio).&#160;If&#160;not,&#160;a&#160;<br/>negative&#160;response&#160;with&#160;error code&#160;“SubfunctionNotSupportedInvalidFormat” ($12)&#160;<br/>will&#160;be&#160;sent.&#160;Further processing&#160;will be&#160;aborted.&#160;<br/>
<b>&#160;&#160;</b>Does the&#160;requested&#160;service&#160;instance&#160;have&#160;a&#160;defined&#160;pre-handler&#160;function&#160;(please&#160;refer&#160;<br/>
to&#160;the&#160;user manual CANdesc document&#160;“UserManual_CANdesc”&#160;for&#160;more&#160;details about&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
20&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-21_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-21_2.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
pre-handlers)?&#160;If&#160;so,&#160;it&#160;will&#160;be&#160;called.&#160;This&#160;allows the&#160;application&#160;to&#160;extend&#160;the&#160;built-in&#160;<br/>validation&#160;with&#160;additional custom&#160;checks.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>If&#160;the&#160;request&#160;passes&#160;all&#160;of&#160;the&#160;above validation&#160;checks,&#160;the&#160;main-handler&#160;is&#160;called&#160;<br/>
&#160;&#160;(please&#160;refer&#160;to&#160;the&#160;user&#160;manual&#160;CANdesc&#160;for&#160;more details&#160;about&#160;main-handlers)&#160;for&#160;<br/>
further&#160;processing.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>5.3&#160;</b><br/>
<b>Timeout&#160;events&#160;</b><br/>
<b>5.3.1&#160;</b><br/>
<b>Tester&#160;present&#160;timeout&#160;</b><br/>
Once&#160;&#160;the&#160;&#160;tester&#160;&#160;present&#160;&#160;timer&#160;&#160;has&#160;&#160;been&#160;&#160;activated,&#160;&#160;the&#160;&#160;tester&#160;&#160;must&#160;&#160;send&#160;&#160;the&#160;&#160;diagnostic&#160;<br/>service&#160;“Tester Present” ($3E)&#160;periodically&#160;in&#160;order to&#160;keep&#160;the&#160;timer running.&#160;<br/>In&#160;&#160;case&#160;&#160;of&#160;&#160;a&#160;&#160;timeout,&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;state&#160;&#160;will&#160;&#160;be&#160;&#160;initialized&#160;&#160;exactly&#160;&#160;the&#160;&#160;same&#160;&#160;a<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">s&#160;&#160;<i>Service&#160;<br/>ReturnToNormalMode&#160;($20)</i>.&#160;</a>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>CANdesc&#160;will&#160;automatically&#160;send an&#160;unsolicited&#160;positive response&#160;for&#160;the&#160;<br/>
&#160;&#160;“ReturnToNormalMode”&#160;($20)&#160;diagnostic&#160;service (see&#160;section<a href="TechnicalReference_CANdesc_KWP_GMs.html#23">&#160;<i>5.5</i>&#160;<i>Sending&#160;an&#160;</i></a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#23"><i>unsolicited&#160;single frame&#160;response</i>)</a>.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>5.4&#160;</b><br/>
<b>Using the&#160;extended negative&#160;response&#160;</b><br/>
The&#160;&#160;GM/Opel&#160;&#160;version&#160;&#160;of&#160;&#160;CANdesc&#160;&#160;supports&#160;&#160;the&#160;&#160;extended&#160;&#160;negative&#160;&#160;response&#160;&#160;format&#160;&#160;to&#160;<br/>specify&#160;service&#160;faults&#160;more&#160;precisely.&#160;This&#160;response&#160;has&#160;the&#160;following&#160;format:&#160;<br/>
<b>$7F $AE&#160;$E3&#160;$xx&#160;$yy&#160;(DeviceControlLimitsExceeded)</b>&#160;<br/>
where&#160;&#160;$xx&#160;&#160;and&#160;&#160;$yy&#160;&#160;are&#160;&#160;the&#160;&#160;extended&#160;&#160;failure&#160;&#160;codes&#160;&#160;(as&#160;&#160;defined&#160;&#160;in&#160;&#160;an&#160;&#160;ECU&#160;&#160;specific&#160;<br/>diagnostic specification).&#160;<br/>There are&#160;two&#160;possible&#160;ways to&#160;send&#160;an&#160;extended&#160;negative&#160;response:&#160;<br/>
<b>5.4.1&#160;</b><br/>
<b>Sending an&#160;extended&#160;negative&#160;response&#160;during service&#160;processing&#160;</b><br/>
If&#160;&#160;the&#160;&#160;application&#160;&#160;is&#160;&#160;currently&#160;&#160;processing&#160;&#160;a&#160;&#160;request&#160;&#160;which&#160;&#160;requires&#160;&#160;an&#160;&#160;extended&#160;&#160;negative&#160;<br/>response,&#160;&#160;the&#160;&#160;standard&#160;&#160;function&#160;&#160;<b>DescSetNegResponse(errorCode)</b>&#160;&#160;(please&#160;&#160;refer&#160;&#160;to&#160;&#160;the&#160;<br/>general&#160;&#160;technical&#160;&#160;reference&#160;&#160;document&#160;&#160;“TechnicalReference_CANdesc”&#160;&#160;for&#160;&#160;more&#160;&#160;details)&#160;<br/>cannot&#160;be&#160;used.&#160;Instead,&#160;the&#160;following&#160;function&#160;is defined:&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
21&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=22></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>
void&#160;<b>DescSetExtNegResponse</b>&#160;(DescNegResCode errorCode,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;DescExtNegResCode &#160;extErrorCode)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescSetExtNegResponse</b>&#160;(vuint8 iContext,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;DescNegResCode errorCode,&#160;&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;DescExtNegResCode &#160;extErrorCode)&#160;<br/>
<b>Parameter&#160;<br/></b>iContext&#160;<br/>
Reference to the&#160;corresponding request context&#160;<br/>
errorCode&#160;<br/>
One&#160;of&#160;the&#160;error code constants&#160;defined&#160;by&#160;CANdesc&#160;(located&#160;in&#160;the&#160;<br/>generated&#160;desc.h&#160;file)&#160;with&#160;the&#160;following&#160;naming&#160;convention:&#160;<br/><b>kDescNrc&lt;error&#160;name&gt;</b>.&#160;<br/>Normally, only&#160;error code 0xE3 is&#160;used.&#160;<br/>
extErrorCode&#160;<br/>
A&#160;two byte value&#160;which&#160;is&#160;ECU/use-case dependent&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
In&#160;the pre-handler or&#160;main-handler callback, the application can&#160;call&#160;this&#160;function&#160;to send&#160;an&#160;extended&#160;<br/>negative response.&#160;<br/>Normally, this&#160;extended negative&#160;response&#160;is&#160;only&#160;useful&#160;for service $AE,&#160;but&#160;the&#160;function&#160;may&#160;be&#160;used&#160;for&#160;<br/>any&#160;currently&#160;active service&#160;(prior&#160;to&#160;calling&#160;<b>DescProcessingDone()</b>).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;The&#160;application&#160;must&#160;already&#160;have&#160;initialized CANdesc&#160;by&#160;calling&#160;<b>DescInitPowerOn()</b>&#160;<br/>&#160;&#160;The&#160;define&#160;DESC_ENABLE_EXT_NEG_RES_CODE_HANDLING&#160;must exist in&#160;the&#160;generated&#160;code&#160;<br/>&#160;&#160;Once an&#160;error code&#160;has&#160;been&#160;set&#160;it cannot&#160;be&#160;overwritten&#160;or reset.&#160;&#160;<br/>&#160;&#160;This&#160;function&#160;does&#160;not&#160;finish the&#160;processing of&#160;the request.&#160;The&#160;application&#160;must confirm&#160;that&#160;the&#160;<br/>
request processing&#160;is&#160;completely&#160;finished&#160;by&#160;calling&#160;<b>DescProcessingDone()</b>.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Within a&#160;service&#160;pre-handler&#160;callback&#160;and&#160;within&#160;or after&#160;a&#160;service&#160;main-handler&#160;callback&#160;<br/>
Table&#160;5-3&#160;&#160;&#160;DescSetExtNegResponse&#160;<br/>
<b>5.4.2&#160;</b><br/>
<b>Sending an unsolicited extended negative&#160;response&#160;</b><br/>
If&#160;the&#160;application&#160;is&#160;not&#160;currently&#160;processing&#160;a&#160;request&#160;but&#160;an&#160;extended&#160;negative&#160;response&#160;<br/>must&#160;be&#160;sent,&#160;the&#160;function&#160;above&#160;cannot&#160;be&#160;used.&#160;Instead,&#160;a&#160;generic&#160;API&#160;for&#160;transmitting&#160;<br/>an&#160;&#160;unsolicited&#160;&#160;response&#160;&#160;can&#160;&#160;be&#160;&#160;used.&#160;&#160;In&#160;&#160;this&#160;&#160;case,&#160;&#160;the&#160;&#160;application&#160;&#160;must&#160;&#160;compose&#160;&#160;the&#160;<br/>response&#160;message&#160;on&#160;its&#160;own.&#160;The&#160;following&#160;is&#160;an&#160;example&#160;&#160;using&#160;the&#160;format&#160;&#160;description&#160;<br/>from&#160;the&#160;beginning&#160;of&#160;section&#160;6.4:&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
22&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-23_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;5-2&#160;&#160;Example&#160;code&#160;for&#160;transmitting&#160;an&#160;unsolicited&#160;response&#160;<br/>
<b>5.5&#160;</b><br/>
<b>Sending an unsolicited single&#160;frame&#160;response&#160;</b><br/>
If&#160;&#160;service&#160;&#160;“DeviceControl”&#160;&#160;($AE)&#160;&#160;has&#160;&#160;been&#160;&#160;activated&#160;&#160;and&#160;&#160;the&#160;&#160;application&#160;&#160;detects&#160;&#160;that&#160;<br/>conditions&#160;&#160;have&#160;&#160;changed&#160;&#160;detrimentally&#160;&#160;(e.g.&#160;&#160;they&#160;&#160;are&#160;&#160;“out&#160;&#160;of&#160;&#160;limits”)&#160;&#160;since&#160;&#160;service&#160;<br/>activation,&#160;GM/Opel&#160;requires&#160;that&#160;an&#160;unsolicited&#160;extended&#160;negative&#160;response&#160;shall&#160;be&#160;sent&#160;<br/>by&#160;&#160;the&#160;&#160;ECU.&#160;&#160;To&#160;&#160;accomplish&#160;&#160;this,&#160;&#160;the&#160;&#160;following&#160;&#160;API&#160;&#160;is&#160;&#160;provided&#160;&#160;which&#160;&#160;allows&#160;&#160;the&#160;&#160;ECU&#160;<br/>developer&#160;&#160;to&#160;&#160;send&#160;&#160;any&#160;&#160;single&#160;&#160;frame&#160;&#160;message&#160;&#160;using&#160;&#160;the&#160;&#160;physically&#160;&#160;addressed&#160;&#160;diagnostic&#160;<br/>response&#160;&#160;CAN&#160;&#160;ID.&#160;&#160;This&#160;API&#160;&#160;is&#160;&#160;not&#160;&#160;just&#160;&#160;a&#160;&#160;simple&#160;&#160;“re-transmitter”,&#160;&#160;calling&#160;&#160;the&#160;&#160;TP&#160;&#160;with&#160;&#160;the&#160;<br/>application&#160;&#160;data,&#160;&#160;but&#160;&#160;it&#160;&#160;also&#160;&#160;synchronizes&#160;&#160;the&#160;&#160;request&#160;&#160;with&#160;&#160;the&#160;&#160;current&#160;&#160;CANdesc&#160;<br/>reception/transmission&#160;state&#160;machine:&#160;<br/>
<b>&#160;&#160;</b>If&#160;CANdesc is currently&#160;receiving&#160;a&#160;request,&#160;the&#160;unsolicited&#160;response&#160;will&#160;be&#160;delayed&#160;<br/>
until the&#160;reception&#160;finishes (either with&#160;success or&#160;failure).&#160;<br/>
<b>&#160;&#160;</b>If&#160;CANdesc is currently&#160;transmitting&#160;a&#160;response,&#160;the&#160;unsolicited&#160;response&#160;will be&#160;delay&#160;<br/>
until the&#160;transmission&#160;finishes (either with&#160;success or&#160;failure).&#160;<br/>
See<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">&#160;Table&#160;5-4&#160;&#160;DescTransmitSingleFrame&#160;</a>for the&#160;API&#160;description.&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescTransmitSingleFrame</b>(DescMsg resData, vuint8 resLen)&#160;<br/>
<b>Parameter&#160;</b><br/>
resData&#160;<br/>
Pointer&#160;to the application&#160;data&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
23&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=24></a>Technical Reference&#160;CANdesc&#160;<br/>
resLen&#160;<br/>
The&#160;length of&#160;the&#160;data&#160;(in bytes)&#160;to&#160;be&#160;sent&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;is&#160;called by&#160;CANdesc&#160;to&#160;send&#160;the&#160;unsolicited&#160;positive response&#160;on&#160;a&#160;tester present timeout&#160;or&#160;<br/>by&#160;the&#160;application to send&#160;an unsolicited&#160;extended&#160;negative response.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;The&#160;application&#160;must&#160;already&#160;have&#160;initialized CANdesc&#160;by&#160;calling&#160;<b>DescInitPowerOn().</b>&#160;<br/>&#160;&#160;The&#160;data&#160;pointed to&#160;by&#160;resData&#160;is&#160;not&#160;cached (copied&#160;to&#160;another buffer)&#160;by&#160;CANdesc, so the&#160;ECU&#160;<br/>
developer should be careful&#160;not to&#160;use automatic&#160;variable references&#160;(non-static&#160;function local&#160;<br/>variables).&#160;<br/>
&#160;&#160;The&#160;length of&#160;the&#160;data&#160;may&#160;not exceed the transport layer&#160;single frame length&#160;(seven&#160;bytes&#160;in the case&#160;<br/>
of&#160;normal&#160;addressing&#160;and&#160;six&#160;bytes&#160;in the case of&#160;extended&#160;addressing).&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context&#160;<br/>
Table&#160;5-4&#160;&#160;&#160;DescTransmitSingleFrame&#160;<br/>
<b>5.5.1&#160;</b><br/>
<b>Sending the&#160;unsolicited response&#160;from a&#160;different&#160;channel&#160;on a&#160;dynamic&#160;TP&#160;</b><br/>
In&#160;case&#160;of&#160;a&#160;static&#160;TP&#160;(Transport&#160;Protocol)&#160;CANdesc&#160;sends&#160;the&#160;unsolicited&#160;response&#160;on&#160;the&#160;<br/>logical&#160;CAN&#160;channel&#160;CANdesc&#160;is&#160;configured&#160;to&#160;run.&#160;However,&#160;in&#160;case&#160;of&#160;a&#160;dynamic&#160;TP&#160;with&#160;<br/>multiple&#160;channels&#160;configured&#160;it’s&#160;necessary&#160;to&#160;define&#160;the&#160;logical&#160;CAN&#160;channel&#160;on&#160;which&#160;the&#160;<br/>unsolicited&#160;&#160;response&#160;&#160;should&#160;&#160;be&#160;&#160;sent.&#160;&#160;By&#160;&#160;default,&#160;&#160;CANdesc&#160;&#160;will&#160;&#160;send&#160;&#160;the&#160;&#160;unsolicited&#160;<br/>response&#160;on&#160;the&#160;lowest&#160;logical&#160;CAN&#160;channel.&#160;Still&#160;it’s&#160;possible&#160;that&#160;CANdesc&#160;doesn’t&#160;run&#160;<br/>on&#160;&#160;the&#160;&#160;lowest&#160;&#160;logical&#160;&#160;CAN&#160;&#160;channel.&#160;&#160;If&#160;&#160;that&#160;&#160;is&#160;&#160;the&#160;&#160;case,&#160;&#160;it’s&#160;&#160;necessary&#160;&#160;to&#160;&#160;configure&#160;&#160;the&#160;<br/>channel&#160;on&#160;which&#160;the&#160;unsolicited&#160;response&#160;should&#160;be&#160;sent.&#160;You&#160;can&#160;configure&#160;the&#160;channel&#160;<br/>with&#160;a&#160;user configuration&#160;file&#160;in&#160;GENy&#160;with&#160;the&#160;following&#160;content:&#160;<br/>
&#160;<br/>
#define&#160;kDescOemSpontanResComChannel &#160;&lt;channel&gt;&#160;<br/>
Please&#160;replace&#160;&lt;channel&gt;&#160;with&#160;the&#160;number&#160;of&#160;the&#160;channel&#160;the&#160;unsolicited&#160;response&#160;should&#160;<br/>be&#160;sent&#160;on.&#160;The&#160;value&#160;must&#160;be&#160;in&#160;the&#160;range&#160;[0..(Number of&#160;logical channels&#160;–&#160;1)].&#160;<br/>
<b>5.6&#160;</b><br/>
<b>GM/Opel&#160;CANdesc&#160;state machine&#160;access&#160;</b><br/>
The&#160;&#160;states&#160;&#160;relevant&#160;&#160;to&#160;&#160;the&#160;&#160;programming&#160;&#160;sequence&#160;&#160;are&#160;&#160;modeled&#160;&#160;as&#160;&#160;a&#160;&#160;normal&#160;&#160;CANdesc&#160;<br/>state&#160;group.&#160;This&#160;also&#160;enables&#160;all&#160;the&#160;usual&#160;state&#160;group&#160;related&#160;callbacks&#160;and&#160;functions&#160;for&#160;<br/>transition&#160;&#160;notification,&#160;&#160;access&#160;&#160;to&#160;&#160;the&#160;&#160;current&#160;&#160;state,&#160;&#160;and&#160;&#160;a&#160;&#160;function&#160;&#160;to&#160;&#160;modify&#160;&#160;the&#160;&#160;current&#160;<br/>state.&#160;For&#160;naming&#160;convention&#160;and&#160;an&#160;API&#160;description,&#160;please&#160;refer&#160;to&#160;the&#160;general&#160;CANdesc&#160;<br/>technical reference.&#160;<br/>The&#160;&#160;state&#160;&#160;group&#160;&#160;and&#160;&#160;its&#160;&#160;states’&#160;&#160;names&#160;&#160;have&#160;&#160;been&#160;&#160;fixed&#160;&#160;to&#160;&#160;provide&#160;&#160;a&#160;&#160;consistent&#160;&#160;API&#160;<br/>independent&#160;from&#160;the&#160;configuration.&#160;Normally&#160;the&#160;names&#160;would&#160;depend&#160;on&#160;the&#160;settings&#160;in&#160;<br/>the&#160;CDD&#160;file.&#160;Please&#160;refer to<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">&#160;<i>Table&#160;7-4&#160;&#160;Programming&#160;&#160;Sequence&#160;&#160;state&#160;&#160;group</i>&#160;&#160;</a>for&#160;&#160;the&#160;&#160;exact&#160;<br/>names.&#160;<br/>For compatibility&#160;reasons CANdesc still provides the&#160;API&#160;described&#160;in&#160;this chapter although&#160;<br/>they&#160;be&#160;replaced&#160;by&#160;the&#160;state&#160;machine&#160;API.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
24&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=25></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>5.6.1&#160;</b><br/>
<b>Normal&#160;communication state&#160;</b><br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
vuint8&#160;<b>DescGetCommState</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
kDescCommDisabled&#160;<br/>
Normal&#160;message transmission&#160;is&#160;deactivated&#160;<br/>
kDescCommEnabled&#160;<br/>
Normal&#160;message transmission&#160;is&#160;activated&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;at&#160;any&#160;time to obtain&#160;the&#160;current&#160;transmission&#160;state.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;The&#160;application&#160;must&#160;already&#160;have&#160;initialized CANdesc&#160;by&#160;calling&#160;<b>DescInitPowerOn()</b>.&#160;<br/>&#160;&#160;The&#160;same information&#160;can&#160;be&#160;retrieved&#160;using&#160;<b>DescGetStateProgrammingMode&#160;()</b>.&#160;<br/>&#160;&#160;State information&#160;updates&#160;<b>after</b>&#160;any&#160;post-handler of&#160;mode $28.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Any&#160;<br/>
Table&#160;5-5&#160;&#160;&#160;DescGetCommState&#160;<br/>
<b>5.6.2&#160;</b><br/>
<b>Programming mode&#160;state&#160;</b><br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
vuint8&#160;<b>DescGetProgMode</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
kDescProgModeIdle&#160;<br/>
No enter programming&#160;mode request up&#160;to&#160;now&#160;<br/>
kDescProgModeAccepted&#160;&#160;Enter&#160;programming&#160;mode accepted&#160;(but not&#160;active&#160;yet)&#160;<br/>
kDescProgModeActive&#160;<br/>
Enter&#160;programming&#160;mode&#160;sequence complete&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;at&#160;any&#160;time to read&#160;the “enter programming&#160;mode” sequence state.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;The&#160;application&#160;must&#160;already&#160;have&#160;initialized CANdesc&#160;by&#160;calling&#160;<b>DescInitPowerOn()</b>.&#160;<br/>&#160;&#160;The&#160;same information&#160;can&#160;be&#160;retrieved&#160;using&#160;<b>DescGetStateProgrammingMode&#160;().</b>&#160;<br/>&#160;&#160;State information&#160;updates&#160;<b>after</b>&#160;any&#160;post-handler of&#160;mode $A5.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Any&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
25&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=26></a>Technical Reference&#160;CANdesc&#160;<br/>
Table&#160;5-6&#160;&#160;&#160;DescGetProgMode&#160;<br/>
<b>5.6.3&#160;</b><br/>
<b>High&#160;speed programming mode&#160;state&#160;</b><br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single channel&#160;<br/>
vuint8&#160;<b>DescGetHiSpeedMode</b>&#160;(void)&#160;<br/>
Multiple channel&#160;<br/>
vuint8&#160;<b>DescGetHiSpeedMode</b>&#160;(vuint8 commChannel)&#160;<br/>
<b>Parameter&#160;</b><br/>
c<b>ommChannel&#160;</b><br/>
Communication&#160;channel&#160;on&#160;which&#160;CANdesc&#160;is&#160;running&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
kDescHiSpeedModeIdle&#160;<br/>
No enter programming&#160;mode request up&#160;to&#160;now.&#160;<br/>
kDescHiSpeedModeAccepted&#160;&#160;Enter&#160;high&#160;speed&#160;programming&#160;mode accepted (but&#160;not&#160;active&#160;yet)&#160;<br/>
kDescHiSpeedModeActive&#160;<br/>
Enter&#160;high&#160;speed&#160;programming&#160;mode sequence complete&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;can&#160;be&#160;called&#160;by&#160;the&#160;application at&#160;any&#160;time to see&#160;if&#160;the programming&#160;mode requires&#160;a&#160;switch&#160;<br/>to&#160;high&#160;speed&#160;mode.&#160;&#160;<br/>If&#160;the define DESC_ENABLE_FLASHABLE_ECU exists&#160;in the generated&#160;code,&#160;then&#160;the application&#160;should&#160;<br/>call&#160;this&#160;function&#160;within the&#160;callback<a href="TechnicalReference_CANdesc_KWP_GMs.html#49">&#160;<i>ApplDescOnEnterProgMode</i>&#160;</a>to&#160;decide&#160;whether to switch&#160;into&#160;high&#160;<br/>speed&#160;mode.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;The&#160;result is&#160;only&#160;valid&#160;for&#160;the&#160;channel&#160;on&#160;which CANdesc&#160;is&#160;running.&#160;<br/>&#160;&#160;The&#160;application&#160;has&#160;already&#160;initialized&#160;CANdesc&#160;once by&#160;calling&#160;<b>DescInitPowerOn().</b>&#160;<br/>&#160;&#160;The&#160;define&#160;DESC_ENABLE_REQ_HISPEED_PROG&#160;must exist in the&#160;generated&#160;code (if&#160;the&#160;ECU must&#160;<br/>
support service&#160;$A5 $02).&#160;<br/>
&#160;&#160;Idle&#160;and&#160;Accepted&#160;can&#160;be retrieved using&#160;<b>DescGetStateProgrammingMode&#160;()</b>&#160;<br/>&#160;&#160;Active&#160;can&#160;be&#160;queried&#160;using&#160;IlNwmGetState()&#160;<br/>&#160;&#160;State information&#160;updates&#160;after any&#160;post-handler of&#160;mode&#160;$A5.&#160;<br/>&#160;<br/>Call&#160;context&#160;<br/>&#160;&#160;Any&#160;<br/>
Table&#160;5-7&#160;&#160;&#160;DescGetHiSpeedMode&#160;<br/>
&#160;<br/>
<b>5.7&#160;</b><br/>
<b>The&#160;PacketHandler (another&#160;type&#160;of&#160;service&#160;processor)&#160;</b><br/>
A&#160;main-handler&#160;is&#160;the&#160;typical&#160;callback&#160;function&#160;for&#160;request&#160;processing&#160;(please&#160;refer&#160;to&#160;the&#160;<br/>general&#160;&#160;technical&#160;&#160;reference&#160;&#160;document&#160;&#160;“TechnicalReference_CANdesc”&#160;&#160;for&#160;&#160;more&#160;&#160;details).&#160;<br/>For&#160;&#160;the&#160;&#160;GM/Opel&#160;&#160;version&#160;&#160;of&#160;&#160;CANdesc,&#160;&#160;a&#160;&#160;different&#160;&#160;type&#160;&#160;of&#160;&#160;service&#160;&#160;processor&#160;&#160;for<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">&#160;&#160;<i>Service&#160;<br/>ReadDataByPacketIdentifier ($AA)</i>&#160;</a>is&#160;necessary&#160;–&#160;the&#160;PacketHandler.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
26&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=27></a>Technical Reference&#160;CANdesc&#160;<br/>
A&#160;PacketHandler&#160;is&#160;a&#160;very&#160;simple&#160;callback&#160;that&#160;has&#160;only&#160;one&#160;task&#160;–&#160;to&#160;query&#160;the&#160;application&#160;<br/>data&#160;and&#160;place&#160;it&#160;into&#160;the&#160;correct&#160;position&#160;of&#160;the&#160;response&#160;data&#160;buffer.&#160;The&#160;application&#160;may&#160;<br/>not&#160;use&#160;the&#160;negative&#160;response&#160;API&#160;with&#160;a&#160;PackedHandler.&#160;The&#160;API&#160;works asynchrounously,&#160;<br/>to&#160;allow&#160;moving&#160;time-consuming&#160;operations to&#160;different&#160;task contexts.&#160;<br/>.&#160;<br/>
<b>5.7.1&#160;</b><br/>
<b>PacketHandler&#160;API&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescReadPack</b>&lt;Instance-Qualifier&gt; (DescMsg pMsg)&#160;<br/>
<b>Parameter&#160;</b><br/>
pMsg&#160;<br/>
A&#160;pointer&#160;to a&#160;buffer where the&#160;application&#160;must copy&#160;its&#160;data&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;to&#160;query&#160;the&#160;application&#160;for the&#160;response&#160;data&#160;related&#160;to &lt;Instance-Qualifier&gt;.&#160;<br/>The&#160;application&#160;can provide&#160;the&#160;data&#160;within this&#160;function,&#160;or it can&#160;exit the&#160;function&#160;and&#160;provide it&#160;later on&#160;<br/>the&#160;task&#160;level.&#160;When the&#160;data&#160;is&#160;ready,&#160;the&#160;application&#160;must call&#160;<b>DescDataPacketProcessingDone()</b>.&#160;<br/>Once the&#160;application calls&#160;<b>DescDataPacketProcessingDone()</b>, the&#160;PacketHandler assembles&#160;the&#160;data&#160;to&#160;<br/>be&#160;sent&#160;with the response (the&#160;response&#160;length&#160;is&#160;predefined&#160;in CANdelaStudio&#160;by&#160;the DPID&#160;data structure&#160;<br/>definition).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;The&#160;application&#160;may&#160;not&#160;call&#160;<b>DescProcessingDone()</b>.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;5-8&#160;&#160;&#160;PacketHandler&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescDataPacketProcessingDone</b>&#160;(DescDataPacketProcessStatus status)&#160;<br/>
<b>Parameter&#160;</b><br/>
status&#160;<br/>
Valid&#160;values:&#160;<br/>&#160;&#160;kDescDataPacketOk&#160;–&#160;if&#160;the&#160;application&#160;copied&#160;the&#160;data&#160;<br/>
successfully&#160;<br/>
&#160;&#160;kDescDataPacketFailedSendDummy&#160;–&#160;if&#160;the&#160;application&#160;<br/>
encountered&#160;an&#160;error&#160;while obtaining&#160;the&#160;requested data.&#160;CANdesc&#160;<br/>will&#160;transmit&#160;the&#160;UUDT&#160;response,&#160;but&#160;it&#160;will&#160;contain only&#160;the&#160;<br/>message&#160;padding&#160;pattern and no&#160;actual&#160;data.&#160;<br/>
&#160;&#160;kDescDataPacketFailedDoNotSend&#160;-&#160;if&#160;the&#160;application&#160;<br/>
encountered&#160;an&#160;error&#160;while obtaining&#160;the&#160;requested data.&#160;No&#160;UUDT&#160;<br/>response will&#160;be&#160;sent.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
27&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=28></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;must call&#160;this&#160;function&#160;when it&#160;has&#160;finished the&#160;<b>ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;<br/>(DescMsg pMsg)</b>&#160;request.&#160;<br/>This&#160;function&#160;allows&#160;the&#160;ECU developer to&#160;have a&#160;very&#160;slow&#160;PacketHandler (e.g.&#160;read&#160;data&#160;from&#160;another&#160;<br/>CPU).&#160;<br/>The&#160;CANdesc&#160;scheduler can&#160;process&#160;only&#160;one DPID at&#160;a&#160;time,&#160;so once&#160;the&#160;data has&#160;been copied&#160;to&#160;the&#160;<br/>pMsg buffer the&#160;application&#160;should call&#160;this&#160;function immediately&#160;to&#160;avoid long&#160;scheduler delays&#160;(time jitter&#160;<br/>from&#160;the configured&#160;scheduler rates).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;CANdesc&#160;must have&#160;previously&#160;called&#160;a PacketHandler&#160;callback&#160;<b>ApplDescReadPack&lt;Instance-</b><br/>
<b>Qualifier&gt;&#160;(DescMsg pMsg)</b>.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;5-9&#160;&#160;&#160;DescDataPacketProcessingDone&#160;<br/>
&#160;<br/>
<b>sd&#160;PacketHandler&#160;for&#160;CANdesc&#160;4.xx</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;$01&#160;[DPID]<br/>
ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;(pMessage)<br/>
[UUDT]&#160;[DPID]&#160;[pMsg]<br/>
[status&#160;==&#160;kDescDataPacketOk&#160;]:&#160;DescDataPacketProcessingDone&#160;(status&#160;)<br/>
&#160;<br/>
Figure&#160;5-3&#160;&#160;Asynchronous&#160;PacketHandler&#160;for&#160;current&#160;CANdesc&#160;versions&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
28&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=29></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>sd&#160;PacketHandler&#160;for&#160;CANdesc&#160;4.xx&#160;($78)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;$01&#160;[DPID]<br/>
ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;(pMessage)<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;[USDT]&#160;$7F&#160;$AA&#160;$78<br/>
[status&#160;==&#160;kDescDataPacketOk&#160;]:&#160;DescDataPacketProcessingDone&#160;(status&#160;)<br/>
[UUDT]&#160;[DPID]&#160;[pMsg]<br/>
&#160;<br/>
Figure&#160;5-4&#160;&#160;Asynchronous&#160;PacketHandler&#160;with&#160;delayed&#160;processing&#160;of&#160;the&#160;first&#160;data&#160;packet&#160;&#160;<br/>
&#160;<br/>
<b>sd&#160;PacketHandler&#160;for&#160;CANdesc&#160;4.xx&#160;(Dummy)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;$01&#160;[DPID]<br/>
ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;(pMessage)<br/>
[status==kDescDataPacketFailedSendDummy]:&#160;DescDataPacketProcessingDone&#160;(status&#160;)<br/>
[UUDT]&#160;[DPID]&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00&#160;00<br/>
&#160;<br/>
Figure&#160;5-5&#160;&#160;Asynchronous&#160;PacketHandler&#160;with&#160;dummy&#160;response,&#160;due&#160;to&#160;an&#160;application&#160;error&#160;while&#160;obtaining&#160;response&#160;data&#160;&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
29&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-30_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>6&#160;&#160;GM/Opel&#160;service&#160;implementations&#160;</b><br/>
<b>6.1&#160;</b><br/>
<b>Service&#160;InitiateDiagnosticOperation ($10)&#160;</b><br/>
CANdesc implements&#160;a&#160;special handling&#160;of&#160;the&#160;following&#160;sub-functions of&#160;this service:&#160;<br/>
<b>&#160;&#160;</b>“DisableAllDtcs”&#160;(sub-function&#160;$02)&#160;<br/>
<b>&#160;&#160;</b>“EnableDtcsDuringDeviceControl” (sub-function&#160;$03)&#160;<br/>
WakeUpLinks&#160;&#160;(sub-function&#160;&#160;$04)&#160;&#160;can&#160;&#160;be&#160;&#160;implemented&#160;&#160;using&#160;&#160;standard&#160;&#160;main-&#160;&#160;and&#160;&#160;post-<br/>handlers.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>The&#160;actual&#160;implementation&#160;of&#160;these&#160;services&#160;is&#160;still&#160;left&#160;to&#160;the&#160;application,&#160;controlled&#160;by&#160;<br/>
&#160;&#160;the&#160;callbacks&#160;mentioned&#160;below.&#160;CANdesc&#160;only&#160;manages&#160;the&#160;internal&#160;states&#160;and&#160;<br/>
performs&#160;service validation.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>6.1.1&#160;</b><br/>
<b>Service&#160;DisableAllDTCs&#160;($10&#160;$02)&#160;</b><br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnDisableAllDtc</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Once the&#160;service&#160;$10 $02 execution&#160;has&#160;completed&#160;with success, CANdesc&#160;calls&#160;this&#160;function to&#160;notify&#160;the&#160;<br/>application&#160;about the&#160;new&#160;state&#160;of&#160;the diagnostics&#160;module.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;In&#160;this&#160;callback&#160;the application&#160;must implement the&#160;actual&#160;disabling&#160;of&#160;DTCs.&#160;<br/>&#160;&#160;Also ref<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">er to&#160;<i>ApplDescOnReturnToNormalMode</i>&#160;</a>in order to re-enable DTCs.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask()&#160;<br/>
Table&#160;6-1&#160;&#160;&#160;ApplDescOnDisableAllDtc&#160;<br/>
<b>6.1.2&#160;</b><br/>
<b>Service&#160;EnableDTCsDuringDeviceControl ($10&#160;$03)&#160;</b><br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnEnableDtcsChangeDuringDevCntrl</b>&#160;(void)&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
30&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-31_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Once the&#160;service&#160;$10 $03 execution&#160;has&#160;completed&#160;with success, CANdesc&#160;calls&#160;this&#160;function to&#160;notify&#160;the&#160;<br/>application&#160;about the&#160;new&#160;state&#160;of&#160;the diagnostics&#160;module.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;In&#160;this&#160;callback, the application&#160;must enable&#160;DTCs&#160;during&#160;device control.&#160;<br/>&#160;&#160;Also refer to<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">&#160;<i>ApplDescOnReturnToNormalMode.</i></a>&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-2&#160;&#160;&#160;ApplDescOnEnableDtcChangeDuringDevCntrl&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>CANdesc&#160;activates&#160;the&#160;tester&#160;present&#160;timer&#160;for&#160;both&#160;service instances&#160;above.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>6.2&#160;</b><br/>
<b>Service&#160;ReadFailureRecordData ($12)&#160;</b><br/>
CANdesc&#160;generates&#160;only&#160;one&#160;function&#160;callback&#160;(main-handler)&#160;for&#160;all&#160;service&#160;$12&#160;requests&#160;<br/>and&#160;&#160;does&#160;&#160;not&#160;&#160;offer&#160;&#160;any&#160;&#160;special&#160;&#160;support&#160;&#160;for&#160;&#160;this&#160;&#160;service.&#160;&#160;Therefore&#160;&#160;all&#160;&#160;dispatching&#160;&#160;and&#160;<br/>validation&#160;&#160;steps&#160;&#160;(e.g.&#160;&#160;dispatching&#160;&#160;on&#160;&#160;sub-function&#160;&#160;level,&#160;&#160;check&#160;&#160;the&#160;&#160;request&#160;&#160;length&#160;&#160;or&#160;<br/>validate&#160;&#160;the&#160;&#160;PID&#160;&#160;parameter&#160;&#160;if&#160;&#160;applicable),&#160;&#160;as&#160;&#160;well&#160;&#160;as&#160;&#160;the&#160;&#160;assembly&#160;&#160;of&#160;&#160;the&#160;&#160;response&#160;<br/>message&#160;(including&#160;the&#160;sub-function&#160;byte) have&#160;to&#160;be&#160;performed&#160;by&#160;the&#160;application.&#160;<br/>
&#160;<br/>
<b>6.2.1&#160;</b><br/>
<b>Service&#160;ReadFailureRecordIdentifiers&#160;($12&#160;$01)&#160;</b><br/>
Depending&#160;on&#160;the&#160;report&#160;type&#160;requested&#160;(PID&#160;or&#160;DPID)&#160;the&#160;application&#160;must&#160;place&#160;one&#160;of&#160;<br/>the&#160;following&#160;values into&#160;the&#160;first&#160;data&#160;byte&#160;of&#160;the&#160;response&#160;message:&#160;<br/>
<b>&#160;&#160;</b>0x00&#160;-&#160;for report by&#160;PID&#160;<br/>
<b>&#160;&#160;</b>0x01&#160;-&#160;for report by&#160;DPID&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
31&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-32_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>The&#160;ECU&#160;can&#160;support&#160;either&#160;reports&#160;by&#160;PID&#160;or&#160;DPID,&#160;but&#160;not&#160;both.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>6.2.2&#160;</b><br/>
<b>Service&#160;ReadFailureRecordParameters&#160;($12&#160;$02)&#160;</b><br/>
CANdesc&#160;does&#160;not&#160;automatically&#160;include&#160;the&#160;PID&#160;parameter&#160;in&#160;the&#160;response&#160;message&#160;for&#160;<br/>service&#160;$12&#160;$02.&#160;The&#160;application&#160;must&#160;perform&#160;this task.&#160;<br/>
<b>6.3&#160;</b><br/>
<b>Service&#160;ReturnToNormalMode&#160;($20)&#160;</b><br/>
CANdesc&#160;&#160;completely&#160;&#160;handles&#160;&#160;this&#160;&#160;service&#160;&#160;and&#160;&#160;performs&#160;&#160;the&#160;&#160;following&#160;&#160;actions&#160;&#160;after&#160;&#160;a&#160;<br/>positive&#160;&#160;response&#160;&#160;has&#160;&#160;been&#160;&#160;sent&#160;&#160;(or&#160;&#160;after&#160;&#160;finishing&#160;&#160;service&#160;&#160;execution&#160;&#160;when&#160;&#160;the&#160;&#160;request&#160;<br/>does&#160;not&#160;require&#160;a&#160;response):&#160;<br/>
<b>&#160;&#160;</b>The&#160;tester present&#160;timer will be&#160;deactivated.&#160;<br/>
<b>&#160;&#160;</b>If&#160;communication&#160;was&#160;disabled,&#160;it will be&#160;re-enabled.&#160;CANdesc will&#160;notify&#160;the&#160;application&#160;<br/>
via&#160;the&#160;callback&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">&#160;<i>ApplDescOnEnableNormalComm</i>.</a>&#160;<br/>
<b>&#160;&#160;</b>The&#160;network management&#160;timer will be&#160;started&#160;by&#160;a&#160;new&#160;request&#160;(timeout:&#160;8&#160;seconds).&#160;<br/>
<b>&#160;&#160;</b>If&#160;the&#160;serv<a href="TechnicalReference_CANdesc_KWP_GMs.html#60">ice&#160;<i>SendOnChangeDTCCount&#160;($A9&#160;$82)</i>&#160;</a>was active,&#160;CANdesc will notify&#160;the&#160;<br/>
application&#160;to&#160;deactivate&#160;it&#160;by&#160;calling&#160;the&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">&#160;<i>ApplDescDisableOnChangeDtcCount</i>.</a>&#160;<br/>
<b>&#160;&#160;</b>The&#160;scheduling&#160;mechanism&#160;for the<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">&#160;<i>Service&#160;ReadDataByPacketIdentifier ($AA)</i>&#160;</a>will be&#160;<br/>
deactivated,&#160;and&#160;the&#160;scheduler lists&#160;will be&#160;cleared.&#160;<br/>
CANdesc&#160;also&#160;notifies&#160;the&#160;application&#160;of&#160;the&#160;return&#160;to&#160;normal&#160;mode&#160;event&#160;via&#160;the&#160;function&#160;<br/>call<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">&#160;<i>ApplDescOnReturnToNormalMode</i>:</a>&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnReturnToNormalMode</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;on&#160;completion&#160;of&#160;service $20&#160;processing&#160;(after the response&#160;has&#160;been&#160;sent,&#160;if&#160;<br/>applicable)&#160;or a tester present timeout.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;None&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-3&#160;&#160;&#160;ApplDescOnReturnToNormalMode&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
32&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=33></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>6.4&#160;</b><br/>
<b>Service&#160;ReadDataByParameterIdentifier&#160;($22)&#160;</b><br/>
The&#160;&#160;description&#160;&#160;for&#160;&#160;this&#160;&#160;service&#160;&#160;is&#160;&#160;located&#160;&#160;in&#160;&#160;the&#160;&#160;general&#160;&#160;technical&#160;&#160;reference&#160;&#160;document&#160;<br/>“TechnicalReference_CANdesc”.&#160;Detailed&#160;below&#160;are&#160;only&#160;the&#160;deviations&#160;and&#160;behavior&#160;not&#160;<br/>defined&#160;in&#160;the&#160;general technical reference.&#160;<br/>
<b>6.4.1&#160;</b><br/>
<b>Reading a&#160;dynamically&#160;defined&#160;PID (Parameter&#160;Identifier)&#160;</b><br/>
Some&#160;PIDs&#160;are&#160;statically&#160;defined&#160;in&#160;CANdelaStudio&#160;(i.e.&#160;their&#160;data&#160;structure&#160;is&#160;predefined&#160;<br/>at&#160;&#160;compile&#160;time);&#160;however,&#160;&#160;others&#160;can&#160;only&#160;be&#160;defined&#160;at&#160;&#160;runtime&#160;using&#160;a&#160;special&#160;service&#160;<br/>request&#160;(see<a href="TechnicalReference_CANdesc_KWP_GMs.html#40">&#160;<i>&#160;<br/>Service&#160;&#160;DefinePIDByAddress&#160;&#160;</i>($2D).&#160;&#160;</a>These&#160;&#160;dynamically&#160;&#160;definable&#160;&#160;PIDs&#160;&#160;have&#160;&#160;no&#160;&#160;data&#160;<br/>definitions&#160;at&#160;power-on,&#160;so&#160;if&#160;the&#160;tester&#160;tries&#160;to&#160;read&#160;them&#160;the&#160;result&#160;is&#160;undefined&#160;(according&#160;<br/>to&#160;GMW-3110&#160;version&#160;1.6).&#160;In&#160;this&#160;situation,&#160;CANdesc&#160;sends&#160;a&#160;positive&#160;response&#160;with&#160;no&#160;<br/>actual&#160;data&#160;(only&#160;the&#160;response&#160;service&#160;ID ($62) and&#160;the&#160;PID number&#160;from&#160;the&#160;request).&#160;&#160;<br/>Please&#160;refer to&#160;the&#160;sequence&#160;in<a href="TechnicalReference_CANdesc_KWP_GMs.html#43">&#160;<i>The&#160;dynamically&#160;definable&#160;PID is not&#160;defined.</i></a>&#160;<br/>
<b>6.5&#160;</b><br/>
<b>Service&#160;SecurityAccess&#160;($27)&#160;</b><br/>
In&#160;&#160;general,&#160;&#160;the&#160;&#160;application&#160;&#160;shall&#160;&#160;implement&#160;&#160;this&#160;&#160;service&#160;&#160;by&#160;&#160;itself,&#160;&#160;but&#160;&#160;CANdesc&#160;&#160;already&#160;<br/>handles&#160;&#160;some&#160;of&#160;&#160;the&#160;&#160;tasks&#160;&#160;regarding&#160;&#160;this&#160;&#160;implementation.&#160;&#160;In&#160;&#160;the&#160;following,&#160;&#160;you&#160;&#160;will&#160;&#160;learn&#160;<br/>about&#160;what&#160;already&#160;has&#160;been&#160;done&#160;for&#160;you&#160;by&#160;CANdesc&#160;and&#160;about&#160;the&#160;remained&#160;parts&#160;to&#160;<br/>be&#160;implemented&#160;by&#160;your application.&#160;<br/>
<b>CANdesc&#160;tasks:&#160;</b><br/>
<b>&#160;&#160;</b>Service&#160;format&#160;verification.&#160;<br/>
This step&#160;includes:&#160;request&#160;length&#160;and&#160;supported&#160;sub-service&#160;checks.&#160;<br/>
<b>&#160;&#160;</b>Sub-service&#160;execution&#160;preconditions specified&#160;in&#160;the&#160;CDD&#160;file.&#160;<br/>
<b>&#160;&#160;</b>SecurityAccess state&#160;change&#160;<br/>
according&#160;to&#160;the&#160;CDD&#160;file&#160;on&#160;positive&#160;response&#160;for “send-key” service(s).&#160;<br/>
<b>Application tasks:&#160;</b><br/>
<b>&#160;&#160;</b>Additional preconditions checks (pre-handling).&#160;<br/>
<b>&#160;&#160;</b>Seed-key&#160;sequence&#160;verification.&#160;<br/>
<b>&#160;&#160;</b>Timeout&#160;monitoring&#160;for next&#160;seed&#160;retry.&#160;<br/>
<b>&#160;&#160;</b>MEC and&#160;vulnerability&#160;flag&#160;implementation&#160;(if&#160;applicable).&#160;<br/>
<b>&#160;&#160;</b>Seed&#160;generation.&#160;<br/>
<b>&#160;&#160;</b>Key&#160;computation&#160;and&#160;verification&#160;upon&#160;requested&#160;key.&#160;<br/>
<b>&#160;&#160;</b>In&#160;case&#160;of&#160;valid&#160;keys,&#160;starting&#160;of&#160;the&#160;TesterPresent&#160;timer in&#160;CANdesc&#160;(see&#160;API<i>&#160;</i><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">DescActivateS1Timer).</a>&#160;The&#160;best&#160;place&#160;to&#160;do&#160;that&#160;would&#160;be&#160;the&#160;post-handler of&#160;a&#160;“send-<br/>key” service.&#160;Just&#160;verify&#160;if&#160;the&#160;service&#160;has been&#160;responded&#160;positively,&#160;and&#160;the&#160;response&#160;<br/>was&#160;sent&#160;successfully.&#160;For details about&#160;service&#160;post-handling,&#160;please&#160;refer the&#160;OEM&#160;<br/>independent&#160;CANdesc&#160;TechnicalReference&#160;file&#160;located&#160;in&#160;the&#160;delivered&#160;software&#160;<br/>package.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
33&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=34></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>6.6&#160;</b><br/>
<b>Service&#160;DisableNormalCommunication ($28)&#160;</b><br/>
The&#160;&#160;GM/Opel&#160;&#160;version&#160;&#160;of&#160;&#160;CANdesc&#160;&#160;takes&#160;&#160;the&#160;&#160;following&#160;&#160;actions&#160;&#160;prior&#160;&#160;sending&#160;&#160;the&#160;&#160;positive&#160;<br/>response:&#160;<br/>
<b>&#160;&#160;</b>Requests&#160;GMLAN/IVLAN to&#160;disable&#160;normal communication&#160;<br/>
<b>&#160;&#160;</b>If&#160;the&#160;disable&#160;normal communication&#160;request&#160;succeeds:&#160;<br/>
<b>&#160;&#160;</b>Sets&#160;the&#160;new&#160;communication&#160;status (<i>kDescCommDisabled</i>)&#160;<br/>
<b>&#160;&#160;</b>Activates the&#160;tester present&#160;timer&#160;<br/>
<b>&#160;&#160;</b>Notifies the&#160;application&#160;via&#160;the&#160;function&#160;call<a href="TechnicalReference_CANdesc_KWP_GMs.html#34">&#160;<i>ApplDescOnDisableNormalComm</i>.</a>&#160;<br/>
<b>&#160;&#160;</b>Positive&#160;response&#160;will&#160;be&#160;sent&#160;<br/>
<b>&#160;&#160;</b>If&#160;the&#160;disable&#160;normal communication&#160;request&#160;fails:&#160;<br/>
<b>&#160;&#160;</b>A&#160;negative&#160;response&#160;with&#160;NRC&#160;$22&#160;(ConditionsNotCorrect) will be&#160;sent&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnDisableNormalComm</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;once normal&#160;message transmission&#160;has&#160;been&#160;disabled by&#160;a&#160;service&#160;$28&#160;<br/>request and&#160;the&#160;resulting&#160;positive response&#160;has&#160;been&#160;sent.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;None&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-4&#160;&#160;&#160;ApplDescOnDisableNormalComm&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnEnableNormalComm</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Once normal&#160;message transmission&#160;has&#160;been restored, CANdesc&#160;calls&#160;this&#160;function to&#160;notify&#160;the&#160;<br/>application.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
34&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=35></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;None&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-5&#160;&#160;&#160;ApplDescOnEnableNormalComm&#160;<br/>
<b>6.6.1&#160;</b><br/>
<b>Activate&#160;a&#160;$28&#160;post-handler&#160;for&#160;the&#160;application&#160;</b><br/>
Since&#160;&#160;version&#160;&#160;6.17.00&#160;&#160;of&#160;&#160;CANdesc&#160;&#160;the&#160;&#160;post-handler&#160;&#160;of&#160;&#160;service&#160;&#160;$28&#160;&#160;is&#160;&#160;implemented&#160;<br/>internally.&#160;&#160;If&#160;&#160;required&#160;&#160;or&#160;&#160;for&#160;&#160;compatibility&#160;&#160;reasons,&#160;&#160;an&#160;&#160;application&#160;&#160;post-handler&#160;&#160;can&#160;&#160;be&#160;<br/>activated&#160;&#160;additionally.&#160;&#160;You&#160;&#160;can&#160;&#160;activate&#160;&#160;this&#160;&#160;post-handler&#160;&#160;with&#160;&#160;a&#160;&#160;user&#160;&#160;configuration&#160;&#160;file&#160;&#160;in&#160;<br/>GENy&#160;with&#160;the&#160;following&#160;content:&#160;<br/>#define&#160;DESC_ENABLE_SID_28_APPL_POST_HANDLER&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>
void&#160;<b>ApplDescPostDisableNormalCommunication&#160;</b>(&#160;vuint8 status&#160;)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescPostDisableNormalCommunication&#160;</b>(&#160;vuint8 iContext, vuint8 status&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
Current request&#160;handle&#160;(reserved&#160;for future use)&#160;<br/>
status&#160;&#160;<br/>
For a detailed description please refer to&#160;the&#160;post-handler description in the&#160;<br/>document&#160;“TechnicalReference_CANdesc”&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
For a detailed description please refer to&#160;the&#160;post-handler description in the document&#160;<br/>“TechnicalReference_CANdesc”&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;activated&#160;via user configuration&#160;file&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-6&#160;<br/>
ApplDescPostDisableNormalCommunication&#160;<br/>
<b>6.7&#160;</b><br/>
<b>Service&#160;DynamicallyDefineMessage&#160;($2C)&#160;</b><br/>
The&#160;&#160;GM&#160;&#160;diagnostic&#160;&#160;specification&#160;&#160;(GMW-3110&#160;&#160;version&#160;&#160;1.6)&#160;&#160;allows&#160;&#160;some&#160;&#160;DPIDs&#160;&#160;to&#160;&#160;be&#160;<br/>defined&#160;&#160;at&#160;&#160;runtime&#160;&#160;by&#160;&#160;the&#160;&#160;tester,&#160;&#160;rather&#160;&#160;than&#160;&#160;at&#160;&#160;compile&#160;&#160;time.&#160;&#160;Using&#160;&#160;this&#160;&#160;technique,&#160;&#160;the&#160;<br/>tester&#160;can&#160;map&#160;one&#160;or&#160;more&#160;PIDs&#160;(statically&#160;or&#160;dynamically&#160;defined)&#160;to&#160;a&#160;DPID&#160;and&#160;then&#160;<br/>read&#160;them&#160;back via<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">&#160;<i>Service&#160;ReadDataByPacketIdentifier ($AA)</i>.</a>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
35&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_6.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_7.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_8.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_9.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_10.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_11.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_12.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
CANdesc completely&#160;implements&#160;this service;&#160;no&#160;application&#160;implementation&#160;is required.&#160;<br/>The&#160;&#160;diagram&#160;&#160;below&#160;&#160;depicts&#160;&#160;the&#160;&#160;relationship&#160;&#160;between&#160;&#160;statically&#160;&#160;and&#160;&#160;dynamically&#160;&#160;defined&#160;<br/>DPIDs and&#160;PIDs&#160;and&#160;the&#160;services&#160;that&#160;can&#160;access them.&#160;<br/>
&#160;<br/>
Read&#160;<br/>
PID pool&#160;<br/>
Service ID $22&#160;<br/>
(static and&#160;<br/>
Find&#160;<br/>
dynamic)&#160;<br/>
&#160;<br/>
Service ID $2C&#160;<br/>
&#160;<br/>
Refer&#160;<br/>
Define&#160;<br/>
Dynamically&#160;<br/>
Read&#160;<br/>
definable&#160;<br/>
&#160;<br/>
DPID&#160;pool&#160;<br/>
&#160;<br/>
Service ID $AA<br/>
Read<br/>
&#160;<br/>
&#160;<br/>
Static defined&#160;<br/>
DPID pool&#160;<br/>
&#160;<br/>
Figure&#160;6-1&#160;&#160;Dynamically&#160;defined&#160;DPID&#160;service&#160;relations&#160;<br/>
<b>6.8&#160;</b><br/>
<b>Operations&#160;on dynamically&#160;definable&#160;DPIDs&#160;</b><br/>
Dynamically&#160;&#160;definable&#160;&#160;DPIDs&#160;&#160;can&#160;&#160;be&#160;&#160;defined&#160;&#160;and&#160;&#160;read.&#160;&#160;The&#160;&#160;following&#160;&#160;sections&#160;&#160;illustrate&#160;<br/>these&#160;operations with&#160;sequence&#160;charts involving&#160;the&#160;tester,&#160;CANdesc,&#160;and&#160;application.&#160;<br/>
<b>6.8.1&#160;</b><br/>
<b>Defining a&#160;dynamically&#160;definable&#160;DPID&#160;</b><br/>
If&#160;the&#160;requested&#160;parameters&#160;are&#160;valid&#160;(both&#160;PIDs&#160;referenced&#160;and&#160;DPID&#160;to&#160;be&#160;defined&#160;are&#160;<br/>valid,&#160;request&#160;has&#160;the&#160;correct&#160;length,&#160;etc.),&#160;CANdesc&#160;overwrites&#160;the&#160;current&#160;DPID&#160;definition&#160;<br/>with&#160;the&#160;new&#160;list of&#160;PIDs.&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
36&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-37_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>If&#160;the&#160;tester&#160;request&#160;contains multiple instances of&#160;the&#160;same&#160;PID,&#160;the&#160;resulting&#160;DPID&#160;<br/>
<b>&#160;&#160;</b>definition&#160;will&#160;contain multiple instances&#160;as well.&#160;CANdesc&#160;does not&#160;verify&#160;that&#160;all&#160;of&#160;the&#160;<br/>
requested&#160;PIDs&#160;are&#160;unique.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>6.8.2&#160;</b><br/>
<b>Reading a&#160;dynamically&#160;definable&#160;DPID&#160;</b><br/>
When&#160;a&#160;read&#160;operation&#160;is&#160;performed&#160;on&#160;a&#160;dynamically&#160;definable&#160;DPID,&#160;four&#160;scenarios&#160;are&#160;<br/>possible:&#160;<br/>
<b>&#160;&#160;</b>The&#160;DPID is&#160;not&#160;defined&#160;<br/>
<b>&#160;&#160;</b>The&#160;DPID is&#160;defined,&#160;but&#160;the&#160;data&#160;is not&#160;accessible&#160;at&#160;the&#160;moment&#160;<br/>
<b>&#160;&#160;</b>The&#160;DPID is&#160;defined,&#160;and&#160;the&#160;data&#160;is accessible&#160;<br/>
<b>&#160;&#160;</b>The&#160;DPID is&#160;defined,&#160;but&#160;one&#160;of&#160;the&#160;contained&#160;PIDs is dynamically&#160;definable&#160;and&#160;it&#160;has&#160;<br/>
not&#160;been&#160;defined&#160;<br/>
&#160;<br/>
If&#160;&#160;the&#160;&#160;DPID&#160;&#160;is&#160;&#160;not&#160;&#160;defined,&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;scheduler&#160;&#160;will&#160;&#160;send&#160;&#160;UUDT&#160;&#160;messages&#160;&#160;with&#160;&#160;no&#160;<br/>actual&#160;data&#160;content&#160;(only&#160;zeros):&#160;<br/>
<b>sd&#160;Read&#160;DynDPID&#160;(not&#160;defined)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;[rate&#160;=&#160;fast]&#160;[DPID]<br/>
[UUDT]&#160;$DPID&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00<br/>
[UUDT]&#160;$DPID&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00<br/>
&#160;<br/>
Figure&#160;6-2&#160;&#160;Dynamically&#160;definable&#160;DPID&#160;is&#160;not&#160;defined&#160;<br/>
The&#160;next&#160;example&#160;assumes&#160;that&#160;the&#160;dynamically&#160;definable&#160;DPID&#160;has&#160;already&#160;been&#160;defined&#160;<br/>and&#160;references&#160;a&#160;single&#160;PID.&#160;In&#160;addition,&#160;the&#160;reading&#160;of&#160;this&#160;PID&#160;is&#160;not&#160;possible&#160;at&#160;the&#160;time&#160;<br/>of&#160;&#160;data&#160;&#160;access&#160;&#160;(e.g.&#160;&#160;the&#160;&#160;data&#160;&#160;is&#160;&#160;corrupted),&#160;&#160;and&#160;&#160;therefore&#160;&#160;the&#160;&#160;application&#160;&#160;would&#160;&#160;like&#160;&#160;to&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
37&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-38_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
reject&#160;&#160;the&#160;&#160;PID&#160;&#160;processing.&#160;&#160;In&#160;&#160;this&#160;&#160;situation,&#160;&#160;the&#160;&#160;UUDT&#160;&#160;response&#160;&#160;message&#160;&#160;would&#160;&#160;once&#160;<br/>again&#160;contain&#160;no&#160;actual data&#160;(only&#160;zeros):&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>In&#160;the&#160;case where&#160;multiple PIDs&#160;are&#160;contained&#160;in&#160;the&#160;DPID,&#160;and some&#160;of&#160;them&#160;cannot&#160;<br/>
<b>&#160;&#160;</b>be&#160;processed&#160;with success,&#160;these&#160;PIDs&#160;will&#160;be&#160;skipped&#160;in the&#160;UUDT&#160;response.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>sd&#160;Read&#160;DynDPID&#160;(PID&#160;failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc[MAIN]</b><br/>
<b>CANdesc[DYN_DPID]</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;[rate&#160;=&#160;fast]&#160;[DPID]<br/>
DescProcessDynDPID(DPID)<br/>
Send&#160;virtual&#160;request($22&#160;[PID])<br/>
ApplDescReadDataByIdentifier_PID<br/>
DescSetNegResponse(kDescNrcConditionsNotCorrect)<br/>
DescProcessingDone<br/>
Send&#160;Response($7F&#160;$22&#160;$22)<br/>
[UUDT]&#160;$DPID&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00<br/>
&#160;<br/>
Figure&#160;6-3&#160;&#160;Single&#160;referenced&#160;PID&#160;cannot&#160;provide&#160;any&#160;data&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
38&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=39></a>Technical Reference&#160;CANdesc&#160;<br/>
If&#160;the&#160;PID is&#160;accessible&#160;at&#160;the&#160;time&#160;of&#160;the&#160;request,&#160;the&#160;UUDT&#160;message&#160;will contain&#160;its data:&#160;<br/>
<b>sd&#160;Read&#160;DynDPID&#160;(PID&#160;ok)</b><br/>
<b>Tester</b><br/>
<b>CANdesc[MAIN]</b><br/>
<b>CANdesc[DYN_DPID]</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;[rate&#160;=&#160;fast]&#160;[DPID]<br/>
DescProcessDynDPID(DPID)<br/>
Send&#160;virtual&#160;request($22&#160;[PID])<br/>
ApplDescReadDataByIdentifier_PID<br/>
Copy&#160;data<br/>
DescProcessingDone<br/>
Send&#160;Response($62&#160;[PID]&#160;[Data])<br/>
[UUDT]&#160;$DPID&#160;[Data]<br/>
&#160;<br/>
Figure&#160;6-4&#160;&#160;Reading&#160;the&#160;dynamically&#160;defined&#160;DPID&#160;succeeds&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
39&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-40_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
Since&#160;&#160;dynamically&#160;&#160;defined&#160;&#160;DPIDs&#160;&#160;can&#160;&#160;also&#160;&#160;contain&#160;&#160;dynamically&#160;&#160;definable&#160;&#160;PIDs,&#160;&#160;any&#160;<br/>dynamically&#160;&#160;definable&#160;&#160;PIDs&#160;&#160;within&#160;&#160;the&#160;&#160;requested&#160;&#160;DPID&#160;&#160;must&#160;&#160;be&#160;&#160;defined,&#160;&#160;or&#160;&#160;the&#160;&#160;resulting&#160;<br/>UUDT&#160;response&#160;will not&#160;contain&#160;any&#160;actual&#160;data&#160;(only&#160;zeros):&#160;<br/>
<b>sd&#160;Read&#160;DynDPID&#160;(DynPID&#160;not&#160;defined)</b><br/>
<b>Tester</b><br/>
<b>CANdesc[MAIN]</b><br/>
<b>CANdesc[DYN_DPID]</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;[rate&#160;=&#160;fast]&#160;[DPID]<br/>
DescProcessDynDPID(DPID)<br/>
Send&#160;virtual&#160;request($22&#160;[PID])<br/>
Send&#160;Response($62&#160;[PID])<br/>
[UUDT]&#160;$DPID&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00&#160;$00<br/>
&#160;<br/>
Figure&#160;6-5&#160;&#160;Dynamically&#160;definable&#160;PID,&#160;referenced&#160;by&#160;the&#160;DPID,&#160;is&#160;not&#160;defined&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>When a&#160;read&#160;operation&#160;is&#160;performed&#160;on&#160;a&#160;DPID&#160;which contains a&#160;dynamically&#160;definable&#160;<br/>
<b>&#160;&#160;</b>PID&#160;that&#160;is&#160;not&#160;defined&#160;but&#160;also other&#160;defined&#160;PIDs,&#160;the&#160;resulting&#160;UUDT&#160;response&#160;will&#160;<br/>
not&#160;contain&#160;the&#160;data&#160;for&#160;this&#160;PID.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>6.9&#160;</b><br/>
<b>Service&#160;DefinePIDByAddress&#160;($2D)&#160;</b><br/>
The&#160;GM&#160;diagnostic&#160;specification&#160;(GMW-3110&#160;version&#160;1.6)&#160;allows&#160;some&#160;PIDs&#160;to&#160;be&#160;defined&#160;<br/>at&#160;runtime&#160;by&#160;the&#160;tester,&#160;rather&#160;than&#160;at&#160;compile&#160;time.&#160;Using&#160;this&#160;technique,&#160;the&#160;tester&#160;can&#160;<br/>map&#160;&#160;a&#160;&#160;certain&#160;&#160;memory&#160;&#160;area&#160;&#160;to&#160;&#160;a&#160;&#160;PID&#160;&#160;and&#160;&#160;then&#160;&#160;read&#160;&#160;it&#160;&#160;back&#160;&#160;via&#160;&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#33"><i>Service&#160;<br/>ReadDataByParameterIdentifier&#160;&#160;($22)</i>&#160;&#160;</a>or&#160;&#160;pack&#160;&#160;the&#160;&#160;PID&#160;&#160;into&#160;&#160;a&#160;&#160;DPID&#160;&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">(Service&#160;<br/>DynamicallyDefineMessage&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">($2C))&#160;</a><br/>
for&#160;<br/>
future&#160;<br/>
read&#160;<br/>
operations&#160;<br/>
via&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64"><i>Service&#160;</i></a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#64"><i>ReadDataByPacketIdentifier ($AA)</i>.</a>&#160;<br/>CANdesc&#160;&#160;completely&#160;&#160;implements&#160;&#160;this&#160;&#160;service.&#160;&#160;The&#160;&#160;application&#160;&#160;must&#160;&#160;only&#160;&#160;implement&#160;&#160;the&#160;<br/>memory&#160;area&#160;validation&#160;and&#160;access&#160;functionality.&#160;&#160;<br/>The&#160;&#160;diagram&#160;&#160;below&#160;&#160;depicts&#160;&#160;the&#160;&#160;relationship&#160;&#160;between&#160;&#160;statically&#160;&#160;and&#160;&#160;dynamically&#160;&#160;defined&#160;<br/>PIDs and&#160;the&#160;services&#160;that&#160;can&#160;access&#160;them.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
40&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=41></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Read<br/>
Service&#160;ID&#160;$22<br/>
PID&#160;pool<br/>
Read<br/>
Dynamically<br/>
definable&#160;PID&#160;<br/>
Service&#160;ID&#160;$2D<br/>
Define<br/>
pool<br/>
&#160;<br/>
Figure&#160;6-6&#160;&#160;Dynamically&#160;defined&#160;PID&#160;service&#160;relations&#160;<br/>
<b>6.10&#160;&#160;Operations&#160;on dynamically&#160;definable&#160;PIDs&#160;</b><br/>
Dynamically&#160;&#160;definable&#160;&#160;PIDs&#160;&#160;can&#160;&#160;be&#160;&#160;defined&#160;&#160;and&#160;&#160;read.&#160;&#160;The&#160;&#160;following&#160;&#160;sections&#160;&#160;illustrate&#160;<br/>these&#160;operations with&#160;sequence&#160;charts involving&#160;the&#160;tester,&#160;CANdesc,&#160;and&#160;application.&#160;<br/>
<b>6.10.1&#160;&#160;Defining a&#160;dynamically&#160;definable&#160;PID&#160;<br/></b>If&#160;the&#160;requested&#160;memory&#160;area&#160;parameters&#160;are&#160;valid&#160;and&#160;do&#160;not&#160;refer&#160;to&#160;a&#160;secured&#160;location,&#160;<br/>the&#160;following&#160;diagram&#160;applies:&#160;<br/>
<b>sd&#160;Definition&#160;of&#160;memory&#160;block&#160;(ok)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$2D&#160;[PID]&#160;[memAddress]&#160;[memSize]<br/>
ApplDescCheckDynPidMemoryArea(memAddress,&#160;memSize)<br/>
memBlockOk<br/>
Update&#160;definition&#160;of&#160;PID<br/>
$6D&#160;[PID]<br/>
&#160;<br/>
Figure&#160;6-7&#160;&#160;Definition&#160;of&#160;dynamically&#160;definable&#160;PID&#160;with&#160;valid&#160;parameter&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
41&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=42></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
If&#160;&#160;the&#160;&#160;application&#160;&#160;detects&#160;&#160;a&#160;&#160;problem&#160;&#160;with&#160;&#160;the&#160;&#160;requested&#160;&#160;memory&#160;&#160;area&#160;&#160;(e.g.&#160;&#160;bad&#160;&#160;location&#160;<br/>reference,&#160;security&#160;protection,&#160;etc.),&#160;the&#160;sequence&#160;below&#160;will take&#160;place:&#160;<br/>
<b>sd&#160;Definition&#160;of&#160;memory&#160;block&#160;(failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$2D&#160;[PID]&#160;[memAddress]&#160;[memSize]<br/>
ApplDescCheckDynPidMemoryArea(memAddress,&#160;memSize)<br/>
memBlockInvSecurity<br/>
Convert&#160;UseCase-&gt;NRC<br/>
$7F&#160;$2D&#160;[NRC&#160;=&#160;$31]<br/>
&#160;<br/>
Figure&#160;6-8&#160;&#160;Defining&#160;of&#160;a&#160;dynamically&#160;definable&#160;PID&#160;failed&#160;due&#160;to&#160;security&#160;violation&#160;<br/>
&#160;<br/>
<b>6.10.2&#160;&#160;Reading a&#160;dynamically&#160;definable&#160;PID&#160;<br/></b>When&#160;a&#160;read&#160;operation&#160;is&#160;performed&#160;on&#160;a&#160;dynamically&#160;definable&#160;PID,&#160;three&#160;scenarios&#160;are&#160;<br/>possible:&#160;<br/>
<b>&#160;&#160;</b>The&#160;PID is&#160;not&#160;defined&#160;<br/>
<b>&#160;&#160;</b>The&#160;PID is&#160;defined,&#160;but&#160;the&#160;data&#160;is not&#160;accessible&#160;at&#160;the&#160;moment&#160;<br/>
<b>&#160;&#160;</b>The&#160;PID is&#160;defined,&#160;and&#160;the&#160;data&#160;is&#160;accessible&#160;<br/>
&#160;<br/>
If&#160;the&#160;PID is&#160;not&#160;defined,&#160;CANdesc&#160;returns&#160;a&#160;positive&#160;response&#160;with&#160;no&#160;actual&#160;data&#160;bytes:&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
42&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=43></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>sd&#160;Read&#160;DynPID&#160;(not&#160;defined)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$22&#160;[PID]<br/>
$62&#160;[PID]<br/>
&#160;<br/>
Figure&#160;6-9&#160;&#160;The&#160;dynamically&#160;definable&#160;PID&#160;is&#160;not&#160;defined&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
43&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=44></a>Technical Reference&#160;CANdesc&#160;<br/>
If&#160;<br/>
the&#160;<br/>
application&#160;<br/>
has&#160;<br/>
already&#160;<br/>
accepted&#160;<br/>
the&#160;<br/>
PID&#160;<br/>
read&#160;<br/>
request&#160;<br/>
(in&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#46"><i>ApplDescCheckDynPidMemoryArea</i>)&#160;</a>but&#160;it&#160;cannot&#160;complete&#160;the&#160;read&#160;operation,&#160;a&#160;negative&#160;<br/>response&#160;can&#160;still be&#160;sent&#160;back to&#160;the&#160;tester:&#160;<br/>
<b>sd&#160;Read&#160;DynPID&#160;(failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$22&#160;[PID]<br/>
ApplDescReadDynPidMemContent(memAddress,&#160;memSize)<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;$7F&#160;$22&#160;$78<br/>
DescReadDynPidMemContentDone(memBlockInvCondition)<br/>
$7F&#160;$22&#160;$22<br/>
&#160;<br/>
Figure&#160;6-10&#160;&#160;Application&#160;error&#160;when&#160;reading&#160;the&#160;memory&#160;block&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
44&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=45></a>Technical Reference&#160;CANdesc&#160;<br/>
In&#160;&#160;the&#160;&#160;ideal&#160;&#160;case,&#160;&#160;the&#160;&#160;application&#160;&#160;writes&#160;&#160;the&#160;&#160;data&#160;&#160;into&#160;&#160;the&#160;&#160;supplied&#160;&#160;data&#160;&#160;buffer&#160;&#160;(see&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#46"><i>ApplDescCheckDynPidMemoryArea</i>) an</a>d&#160;acknowledges the&#160;end&#160;of&#160;writing&#160;with&#160;success:&#160;<br/>
<b>sd&#160;Read&#160;DynPID&#160;(ok)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$22&#160;[PID]<br/>
ApplDescReadDynPidMemContent(memAddress,&#160;memSize)<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;$7F&#160;$22&#160;$78<br/>
DescReadDynPidMemContentDone(memBlockOk)<br/>
$62&#160;[PID]&#160;[Data]<br/>
&#160;<br/>
Figure&#160;6-11&#160;&#160;Reading&#160;of&#160;dynamically&#160;defined&#160;PID&#160;succeeds&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>
DescDynPidMemAccessResult&#160;<b>ApplDescCheckDynPidMemoryArea</b>&#160;(&#160;<br/>const DescDynPidMemBlockInfo* const memArea)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescDynPidMemAccessResult&#160;<b>ApplDescCheckDynPidMemoryArea</b>&#160;(&#160;<br/>vuint8&#160;iContext,&#160;<br/>const DescDynPidMemBlockInfo* const memArea)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
Current request&#160;handle&#160;(reserved&#160;for future use)&#160;<br/>
memArea&#160;<br/>
A&#160;pointer&#160;to the memory&#160;area&#160;definition&#160;which must be validated by&#160;the&#160;<br/>
&#160;<br/>
application&#160;<br/>
Address[]&#160;<br/>
The&#160;requested&#160;start address&#160;(can&#160;be&#160;a&#160;2,&#160;3&#160;or 4&#160;byte array)&#160;<br/>
size&#160;<br/>
The&#160;requested&#160;memory&#160;block&#160;size&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
memBlockOk&#160;<br/>
The&#160;requested&#160;area&#160;is&#160;valid&#160;(no&#160;memory&#160;protection&#160;violation,&#160;range&#160;ok, etc.)&#160;<br/>
memBlockInvAddress&#160;<br/>
The&#160;requested&#160;memory&#160;address&#160;is&#160;invalid (wrong&#160;memory&#160;access)&#160;<br/>
memBlockInvSize&#160;<br/>
The&#160;requested&#160;memory&#160;size is&#160;invalid (e.g.&#160;out&#160;of&#160;range)&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
45&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=46></a>Technical Reference&#160;CANdesc&#160;<br/>
memBlockInvSecurity&#160;&#160;The&#160;requested&#160;memory&#160;address&#160;and size&#160;are&#160;valid,&#160;but the&#160;area&#160;is&#160;protected&#160;<br/>
by&#160;security&#160;<br/>
memBlockInvCondition&#160;&#160;The&#160;access&#160;conditions&#160;are&#160;not correct&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;when&#160;the&#160;tester requests&#160;a&#160;valid $2D service (according&#160;to&#160;the&#160;specification).&#160;<br/>The&#160;application&#160;must validate&#160;the memory&#160;area parameters.&#160;<br/>When&#160;the application&#160;exits&#160;the&#160;function,&#160;CANdesc&#160;generates&#160;the&#160;appropriate&#160;NRC&#160;based&#160;on&#160;the&#160;application&#160;<br/>return&#160;value.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;service&#160;$2D.&#160;<br/>&#160;&#160;This&#160;function&#160;runs&#160;synchronously,&#160;so the application&#160;should exit&#160;the&#160;function&#160;as&#160;quickly&#160;as&#160;possible.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-7&#160;&#160;&#160;ApplDescCheckDynPidMemoryArea&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>
void&#160;<b>ApplDescReadDynPidMemContent</b>&#160;(DescMsg pMsg,&#160;<br/>const DescDynPidMemBlockInfo* const memArea)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescReadDynPidMemContent</b>&#160;(vuint8&#160;iContext,&#160;<br/>DescMsg pMsg,&#160;<br/>const&#160;DescDynPidMemBlockInfo* const memArea)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
Current request&#160;handle&#160;(reserved&#160;for future use)&#160;<br/>
pMsg&#160;<br/>
A&#160;pointer&#160;to a&#160;buffer where the&#160;application&#160;must write&#160;the requested&#160;memory&#160;<br/>contents&#160;<br/>
memArea&#160;<br/>
A&#160;pointer&#160;to the memory&#160;area&#160;definition&#160;which the application&#160;can&#160;use for data&#160;<br/>
&#160;<br/>
acquisition:&#160;<br/>
Address[]&#160;<br/>
The&#160;requested&#160;start address&#160;(can&#160;be&#160;a&#160;2,&#160;3&#160;or 4&#160;byte array)&#160;<br/>
size&#160;<br/>
The&#160;requested&#160;memory&#160;block&#160;size&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Once defined,&#160;a&#160;dynamically&#160;definable&#160;PID can be read by&#160;the tester&#160;using service $22.&#160;Dynamically&#160;<br/>defined&#160;PIDs&#160;have special&#160;main-handlers&#160;which&#160;are&#160;implemented&#160;internally&#160;by&#160;CANdesc.&#160;These main-<br/>handlers&#160;call&#160;this&#160;function to retrieve&#160;the&#160;data at&#160;the&#160;requested memory&#160;address.&#160;&#160;<br/>CANdesc&#160;does&#160;not&#160;use&#160;a&#160;direct memory&#160;access&#160;implementation&#160;for this&#160;service&#160;since certain ranges&#160;may&#160;<br/>be&#160;located in slow (external)&#160;memory&#160;chips&#160;that&#160;require&#160;extended&#160;periods&#160;of&#160;time to access.&#160;As&#160;a&#160;result, this&#160;<br/>data&#160;acquisition&#160;function&#160;is&#160;designed&#160;to&#160;be asynchronous.&#160;<br/>Once the&#160;requested&#160;data&#160;bytes&#160;have been&#160;written&#160;into&#160;the&#160;buffer pointed to by&#160;pMsg,&#160;the&#160;application must&#160;<br/>call<a href="TechnicalReference_CANdesc_KWP_GMs.html#47">&#160;<i>DescReadDynPidMemContentDone</i>&#160;</a>to acknowledge&#160;that&#160;the&#160;operation&#160;is&#160;complete.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
46&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=47></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;service&#160;$2D.&#160;<br/>&#160;&#160;This&#160;function&#160;runs&#160;asynchronously, so&#160;once the&#160;application&#160;exits&#160;this&#160;function it&#160;can&#160;take as&#160;much time&#160;<br/>
as&#160;necessary&#160;to complete&#160;the&#160;requested operation&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-8&#160;&#160;&#160;ApplDescReadDynPidMemContent&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>
void&#160;<b>DescReadDynPidMemContentDone</b>&#160;(DescDynPidMemAccessResult result)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescReadDynPidMemContentDone</b>&#160;(vuint8 iContext,&#160;&#160;<br/>
DescDynPidMemAccessResult result)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;request handle&#160;previously&#160;passed&#160;as&#160;a&#160;parameter&#160;to&#160;the application&#160;in the&#160;<br/>callback<a href="TechnicalReference_CANdesc_KWP_GMs.html#47">&#160;<i>ApplDescReadDynPidMemContent.</i></a>&#160;<br/>
result&#160;<br/>
The&#160;result of&#160;the&#160;operation:&#160;<br/>
&#160;&#160;memBlockOk:&#160;The&#160;requested&#160;area&#160;is&#160;valid (no&#160;memory&#160;protection&#160;<br/>
violation,&#160;range&#160;ok,&#160;etc.)&#160;<br/>
&#160;&#160;memBlockInvAddress:&#160;The&#160;requested&#160;memory&#160;address&#160;is&#160;not&#160;<br/>
valid (bad&#160;memory&#160;access)&#160;<br/>
&#160;&#160;memBlockInvSize:&#160;The requested&#160;memory&#160;size is invalid (e.g.&#160;<br/>
out&#160;of&#160;range)&#160;<br/>
&#160;&#160;memBlockInvSecurity:&#160;The&#160;requested&#160;memory&#160;address&#160;and&#160;<br/>
size are valid,&#160;but&#160;the&#160;area&#160;is&#160;protected&#160;by&#160;security&#160;<br/>
&#160;&#160;memBlockInvCondition:&#160;The&#160;access&#160;conditions&#160;are&#160;not&#160;correct&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Once the&#160;data requested&#160;by<a href="TechnicalReference_CANdesc_KWP_GMs.html#47">&#160;<i>ApplDescReadDynPidMemContent</i>&#160;</a>has&#160;been&#160;written&#160;into&#160;the&#160;buffer pointed to&#160;<br/>by&#160;pMsg,&#160;the&#160;application must call&#160;this&#160;function&#160;to&#160;acknowledge&#160;that the operation&#160;is&#160;complete.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;service&#160;$2D.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-9&#160;&#160;&#160;DescReadDynPidMemContentDone&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
47&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=48></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
<b>6.11&#160;&#160;Service&#160;ProgrammingMode&#160;($A5)&#160;</b><br/>
This service&#160;is implemented&#160;completely&#160;using&#160;the&#160;CANdesc state&#160;management.&#160;&#160;<br/>The&#160;programming&#160;sequence&#160;follows the&#160;state&#160;graph&#160;shown&#160;below:&#160;<br/>
<b>&#160;</b><br/>
<b>stm&#160;PreProgramming&#160;Sequence</b><br/>
<b>Normal</b><br/>
DescInitPowerOn()<br/>
+&#160;&#160;kDescStateProgrammingModeNormal<br/>
ECUPowerOn<br/>
Successfully&#160;processed&#160;SID&#160;$28<br/>
<b>CommHalted</b><br/>
+&#160;&#160;kDescStateProgrammingModeCommHalted<br/>
Request&#160;$A5&#160;$02<br/>
Request&#160;$A5&#160;$01<br/>
[ApplDescPreRequestProgrammingMode_HiSpeed]<br/>
[ApplDescPreRequestProgrammingMode]<br/>
<b>Requested</b><br/>
Request&#160;$A5&#160;$02&#160;[ApplDescPreRequestProgrammingMode]<br/>
<b>Requested_HiSpeed</b><br/>
+&#160;&#160;kDescStateProgrammingModeRequested<br/>
+&#160;&#160;kDescStateProgrammingModeRequested_HiSpeed<br/>
Request&#160;$A5&#160;$01&#160;[ApplDescPreRequestProgrammingMode_HiSpeed]<br/>
Request&#160;$A5&#160;$03<br/>
Request&#160;$A5&#160;$03<br/>
<b>Activ&#160;e</b><br/>
+&#160;&#160;kDescStateProgrammingModeActive<br/>
&#160;<br/>
Figure&#160;6-12&#160;&#160;Programming&#160;mode&#160;flowchart&#160;<br/>
To&#160;&#160;further&#160;&#160;restrict&#160;&#160;service&#160;&#160;execution&#160;&#160;based&#160;&#160;on&#160;&#160;the&#160;&#160;current&#160;&#160;state&#160;&#160;in&#160;&#160;the&#160;&#160;programming&#160;<br/>sequence,&#160;please&#160;refer&#160;to<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">&#160;<i>7&#160;</i></a><i>-<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">&#160;CANdelaStudio&#160;default&#160;attribute&#160;settings</i>&#160;</a>regarding&#160;the&#160;setup&#160;<br/>of&#160;the&#160;corresponding&#160;state&#160;group&#160;in&#160;CANdela&#160;studio.&#160;<br/>
<b>6.11.1&#160;&#160;Allowing programming mode&#160;($A5&#160;$01/$02)&#160;<br/></b>Prior&#160;&#160;to&#160;&#160;activating&#160;&#160;programming&#160;&#160;mode,&#160;&#160;the&#160;&#160;tester&#160;&#160;must&#160;&#160;ask&#160;&#160;the&#160;&#160;ECU&#160;&#160;for&#160;&#160;permission.&#160;The&#160;<br/>application&#160;may&#160;accept&#160;or&#160;deny&#160;this&#160;request&#160;using&#160;a&#160;standard&#160;prehandler&#160;for&#160;the&#160;respective&#160;<br/>level. CANdesc will activate&#160;these&#160;prehanders&#160;per default.&#160;<br/>Prehandler&#160;&#160;names&#160;&#160;can&#160;&#160;be&#160;&#160;changed&#160;&#160;in&#160;&#160;the&#160;&#160;CDD&#160;&#160;file&#160;&#160;or&#160;&#160;the&#160;&#160;configuration&#160;&#160;tool,&#160;&#160;for&#160;&#160;your&#160;<br/>reference&#160;the&#160;default names&#160;are:&#160;<br/>
<b>&#160;&#160;</b>$A5&#160;$01:&#160;ApplDescPreRequestProgrammingMode&#160;<br/>
<b>&#160;&#160;</b>Compatibility&#160;note:&#160;This&#160;completely&#160;replaces&#160;the&#160;dedicated&#160;callback&#160;<br/>
ApplDescMayEnterProgMode&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
48&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-49_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;&#160;</b>$A5&#160;$02:&#160;ApplDescPreRequestProgrammingMode_HiSpeed&#160;<br/>
<b>&#160;&#160;</b>Compatibility&#160;note:&#160;This&#160;completely&#160;replaces&#160;the&#160;dedicated&#160;callback&#160;<br/>
ApplDescMayEnterHiSpeedProgMode&#160;<br/>
Please&#160;also&#160;refer&#160;to&#160;the&#160;general&#160;CANdesc&#160;technical&#160;reference&#160;for&#160;further&#160;information&#160;about&#160;<br/>prehandler implementation.&#160;<br/>
<b>6.11.2&#160;&#160;Entering&#160;programming mode&#160;($A5&#160;$03)&#160;<br/></b>Once&#160;the&#160;entire&#160;programming&#160;mode&#160;sequence&#160;is&#160;complete,&#160;the&#160;application&#160;usually&#160;makes&#160;<br/>the&#160;jump&#160;to&#160;the&#160;bootloader&#160;(FBL)&#160;in&#160;one&#160;of&#160;two&#160;ways.&#160;Both&#160;strategies&#160;are&#160;discussed&#160;in&#160;the&#160;<br/>following&#160;sections.&#160;<br/>
<b>6.11.2.1&#160;&#160;FBL&#160;start on EnterProgrammingMode&#160;($A5&#160;$03)&#160;<br/></b>If&#160;the&#160;application&#160;&#160;jumps&#160;&#160;to&#160;&#160;the&#160;&#160;FBL&#160;&#160;on&#160;&#160;this&#160;&#160;service,&#160;&#160;the&#160;&#160;ECU&#160;&#160;developer&#160;&#160;must&#160;&#160;<b>enable</b>&#160;&#160;the&#160;<br/>“Flashable&#160;&#160;ECU”&#160;&#160;option&#160;&#160;in&#160;&#160;the&#160;&#160;generation&#160;&#160;tool.&#160;&#160;CANdesc&#160;&#160;will&#160;&#160;notify&#160;&#160;the&#160;&#160;application&#160;&#160;to&#160;<br/>perform&#160;the&#160;FBL&#160;jump&#160;by&#160;calling&#160;the&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#49">&#160;<i>ApplDescOnEnterProgMode</i>.&#160;</a>The&#160;application&#160;<br/>can&#160;&#160;use&#160;&#160;the&#160;&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#26"><i>&#160;&#160;DescGetHiSpeedMode&#160;&#160;</i></a>to&#160;&#160;determine&#160;&#160;if&#160;&#160;a&#160;&#160;high&#160;&#160;speed&#160;&#160;mode&#160;&#160;switch&#160;<br/>must&#160;be&#160;performed&#160;manually.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>If&#160;the&#160;application&#160;jumps&#160;to the&#160;FBL&#160;on&#160;this&#160;service,&#160;it&#160;must&#160;manage&#160;the&#160;bus&#160;speed&#160;<br/>
&#160;&#160;switching&#160;manually.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescOnEnterProgMode</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;will&#160;call&#160;this&#160;function&#160;so the&#160;application can&#160;perform&#160;the FBL&#160;jump.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;To enable&#160;this&#160;notification, the&#160;ECU developer must&#160;<b>enable</b>&#160;the “Flashable&#160;ECU”&#160;option in the&#160;<br/>
generation&#160;tool&#160;(the&#160;define&#160;DESC_ENABLE_FLASHABLE_ECU exists&#160;in the&#160;generated&#160;code).&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-10&#160;&#160;&#160;ApplDescOnEnterProgMode&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
49&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>6.11.2.2&#160;&#160;FBL&#160;start on RequestDownload ($34)&#160;<br/></b>If&#160;the&#160;application&#160;jumps&#160;to&#160;the&#160;FBL&#160;on&#160;this&#160;service,&#160;the&#160;ECU&#160;developer&#160;must&#160;&#160;<b>disable</b>&#160;the&#160;<br/>option&#160;“Flashable&#160;ECU”&#160;in&#160;the&#160;generation&#160;tool.&#160;CANdesc&#160;will&#160;automatically&#160;handle&#160;the&#160;high&#160;<br/>speed&#160;switching&#160;(if&#160;necessary) to&#160;comply&#160;with&#160;the&#160;tester expectations.&#160;The&#160;application&#160;must&#160;<br/>only&#160;&#160;implement&#160;&#160;the&#160;&#160;service&#160;&#160;main-handler&#160;&#160;and&#160;&#160;perform&#160;&#160;the&#160;&#160;jump&#160;&#160;to&#160;&#160;the&#160;&#160;FBL.&#160;&#160;In&#160;&#160;order&#160;&#160;to&#160;<br/>verify&#160;&#160;that&#160;&#160;the&#160;&#160;programming&#160;&#160;mode&#160;&#160;sequence&#160;&#160;was&#160;&#160;completed&#160;&#160;successfully,&#160;&#160;the&#160;&#160;ECU&#160;<br/>developer can&#160;call&#160;the&#160;function&#160;<b>DescGetProgMode()</b>&#160;in&#160;the&#160;main-handler.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>The&#160;ECU&#160;developer&#160;must&#160;<b>disable</b>&#160;the&#160;option&#160;“Flashable ECU”&#160;in&#160;the&#160;generation&#160;tool&#160;<br/>
&#160;&#160;when no&#160;FBL&#160;is&#160;present&#160;in the&#160;ECU.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>6.11.2.3&#160;&#160;Concluding programming mode&#160;<br/></b>Once&#160;&#160;the&#160;&#160;flashing&#160;&#160;activity&#160;&#160;has&#160;&#160;concluded&#160;&#160;(through&#160;&#160;a&#160;&#160;service&#160;&#160;$20&#160;&#160;tester&#160;&#160;request&#160;&#160;or&#160;&#160;tester&#160;<br/>present&#160;timeout),&#160;the&#160;GM/Opel&#160;diagnostic&#160;specification&#160;states&#160;that&#160;the&#160;ECU&#160;shall&#160;perform&#160;a&#160;<br/>software reset.&#160;Two&#160;scenarios&#160;are possible:&#160;<br/>
<b>&gt;&#160;&#160;</b>If&#160;the&#160;ECU&#160;was actually&#160;re-flashed,&#160;the&#160;FBL&#160;should&#160;perform&#160;the&#160;reset.&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>If&#160;the&#160;ECU&#160;was not&#160;actually&#160;re-flashed&#160;(the&#160;tester was re-flashing&#160;another&#160;ECU&#160;or the&#160;<br/>
ECU&#160;is not&#160;flashable),&#160;CANdesc notifies&#160;the&#160;application&#160;to&#160;perform&#160;an&#160;ECU&#160;reset&#160;via&#160;the&#160;<br/>function&#160;call<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">&#160;<i>ApplDescForceEcuReset</i>.</a>&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescForceEcuReset</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;to&#160;notify&#160;the&#160;application that it shall&#160;perform&#160;an&#160;ECU&#160;reset.&#160;<br/>It is&#160;not&#160;required that&#160;the application perform&#160;the reset&#160;within this&#160;function&#160;call&#160;since it may&#160;need&#160;to&#160;prepare&#160;<br/>first (by&#160;saving&#160;RAM variables&#160;into EEPROM,&#160;for instance).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;None&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context of&#160;DescStateTask().&#160;<br/>
Table&#160;6-11&#160;&#160;&#160;ApplDescForceEcuReset&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
50&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=51></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
<b>6.11.3&#160;&#160;Considerations&#160;when&#160;upgrading&#160;<br/></b>The&#160;callback&#160;functions&#160;used&#160;by&#160;CANdesc&#160;have&#160;changed&#160;in&#160;version&#160;6.x.&#160;The&#160;following&#160;APIs&#160;<br/>are no&#160;longer used&#160;and&#160;need&#160;to&#160;be&#160;replaced&#160;by&#160;service&#160;prehandlers:&#160;<br/>
<b>&#160;&#160;</b>ApplDescMayEnterProgMode&#160;<br/>
<b>&#160;&#160;</b>ApplDescMayEnterHiSpeedProgMode&#160;<br/>
<b>6.12&#160;&#160;Service&#160;ReadDiagnosticInformation ($A9)&#160;</b><br/>
This&#160;&#160;service&#160;&#160;supplies&#160;&#160;the&#160;&#160;tester&#160;&#160;with&#160;&#160;information&#160;&#160;about&#160;&#160;various&#160;&#160;DTC&#160;&#160;statuses&#160;&#160;(e.g.&#160;&#160;on&#160;<br/>change&#160;count&#160;of&#160;the&#160;DTCs, a&#160;list of&#160;all&#160;DTCs&#160;matching&#160;a&#160;given&#160;status mask,&#160;etc.).&#160;<br/>Since&#160;the&#160;DTC&#160;storage&#160;and&#160;management&#160;is&#160;application&#160;specific,&#160;the&#160;implementation&#160;of&#160;the&#160;<br/>diagnostic&#160;&#160;service&#160;&#160;“ReadDiagnosticInformation”&#160;&#160;(RDI)&#160;&#160;($A9)&#160;&#160;generalizes&#160;&#160;this&#160;&#160;functionality,&#160;<br/>reducing&#160;the&#160;application&#160;task&#160;to&#160;a&#160;few&#160;callback implementations.&#160;<br/>
&#160;<br/>
The&#160;&#160;ECU&#160;&#160;developer&#160;&#160;should&#160;&#160;keep&#160;&#160;the&#160;&#160;following&#160;&#160;important&#160;&#160;properties&#160;&#160;in&#160;&#160;mind&#160;&#160;when&#160;<br/>designing&#160;the&#160;application:&#160;<br/>
1.&#160;&#160;When&#160;an&#160;$A9&#160;sub-function&#160;has&#160;been&#160;requested,&#160;CANdesc&#160;cannot&#160;process&#160;another&#160;<br/>
request&#160;until after the&#160;first UUDT&#160;response&#160;message&#160;has&#160;been&#160;sent.&#160;<br/>
2.&#160;&#160;While&#160;&#160;processing&#160;&#160;and&#160;&#160;sending&#160;&#160;the&#160;&#160;list&#160;&#160;of&#160;&#160;matching&#160;&#160;DTCs&#160;&#160;for&#160;&#160;an&#160;&#160;$A9&#160;&#160;$81&#160;&#160;request,&#160;<br/>
CANdesc can&#160;process&#160;another request&#160;except&#160;$A9&#160;$80.&#160;<br/>
3.&#160;&#160;CANdesc can&#160;process&#160;the&#160;requests&#160;$A9&#160;$80&#160;and&#160;$A9&#160;$81&#160;in&#160;parallel&#160;with&#160;$A9&#160;$82.&#160;<br/>
4.&#160;&#160;Application&#160;callbacks are handled&#160;asynchronously.&#160;<br/>
&#160;<br/>
Here&#160;is a&#160;parallel service&#160;execution&#160;matrix:&#160;<br/>
<b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Active&#160;</b><br/>
<b>$A9 $80&#160;</b><br/>
<b>$A9 $81&#160;</b><br/>
<b>$A9 $82&#160;</b><br/>
<b>Other&#160;requests&#160;</b><br/>
<b>&#160;</b><br/>
<b>(except&#160;scheduled&#160;<br/>$AA&#160;)&#160;</b><br/>
<b>Requested&#160;</b><br/>
<b>$A9 $80&#160;</b><br/>
Not&#160;possible&#160;<br/>
Not&#160;possible&#160;<br/>
Possible after&#160;<br/>
Not&#160;possible&#160;<br/>
the&#160;first&#160;UUDT&#160;is&#160;<br/>sent&#160;<br/>
<b>$A9 $81&#160;</b><br/>
Not&#160;possible&#160;<br/>
Not&#160;possible&#160;<br/>
Possible after&#160;<br/>
Not&#160;possible&#160;<br/>
the&#160;first&#160;UUDT&#160;is&#160;<br/>sent&#160;<br/>
<b>$A9 $82&#160;</b><br/>
Not&#160;possible&#160;<br/>
Possible after&#160;<br/>
Possible after&#160;<br/>
Not&#160;possible&#160;<br/>
the&#160;first&#160;UUDT&#160;is&#160;&#160;the&#160;first&#160;UUDT&#160;is&#160;<br/>sent&#160;<br/>
sent&#160;<br/>
<b>Other&#160;requests&#160;&#160;</b>Not&#160;possible&#160;<br/>
Possible after&#160;<br/>
Possible after&#160;<br/>
Not&#160;possible&#160;<br/>
the&#160;first&#160;UUDT&#160;is&#160;&#160;the&#160;first&#160;UUDT&#160;is&#160;<br/>sent&#160;<br/>
sent&#160;<br/>
Table&#160;6-12&#160;&#160;&#160;Service&#160;$A9&#160;parallel&#160;execution&#160;matrix&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
51&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-52_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>The&#160;RCR-RP&#160;responses&#160;in the&#160;sequence&#160;diagrams&#160;below&#160;are&#160;shown&#160;for&#160;better&#160;timing&#160;<br/>
&#160;&#160;request-response&#160;relation understanding;&#160;however,&#160;if&#160;the&#160;application&#160;is&#160;fast&#160;enough&#160;<br/>
there&#160;will&#160;be&#160;no&#160;RCR-RP&#160;response&#160;sent.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>6.12.1&#160;&#160;ReadStatusOfDTCByNumber ($A9&#160;$80)&#160;<br/></b>CANdesc processes this service&#160;as shown&#160;below.&#160;<br/>
&#160;<br/>
If&#160;&#160;the&#160;&#160;application&#160;&#160;finds&#160;&#160;the&#160;&#160;requested&#160;&#160;DTC&#160;&#160;number&#160;&#160;with&#160;&#160;the&#160;&#160;given&#160;&#160;failure&#160;&#160;type&#160;&#160;byte,&#160;&#160;the&#160;<br/>following&#160;sequence&#160;will&#160;be&#160;executed:&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByNumber&#160;(good)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$A9&#160;$80&#160;[DTC]&#160;[FailureTypeByte]<br/>
ApplDescGetDtcStatusByNumber(DTC,&#160;FailureTypeByte)<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;time&#160;=&#160;P3Max]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
DescRdiDtcStatusByNumberFound(StatusByte)<br/>
[UUDT]&#160;$80&#160;[DTC][FailureTypeByte][StatusByte]<br/>
&#160;<br/>
Figure&#160;6-13&#160;&#160;Request&#160;$A9&#160;$80&#160;where&#160;the&#160;requested&#160;fault&#160;type&#160;combination&#160;was&#160;found&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
52&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=53></a>Technical Reference&#160;CANdesc&#160;<br/>
If&#160;&#160;the&#160;&#160;requested&#160;&#160;fault&#160;&#160;type&#160;&#160;combination&#160;&#160;is&#160;&#160;not&#160;&#160;supported&#160;&#160;by&#160;&#160;the&#160;&#160;ECU,&#160;&#160;the&#160;&#160;following&#160;<br/>sequence&#160;will be&#160;executed:&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByNumber&#160;(failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$A9&#160;$80&#160;[DTC]&#160;[FailureTypeByte]<br/>
ApplDescGetDtcStatusByNumber(DTC,&#160;FailureTypeByte)<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;time&#160;=&#160;P3Max]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
DescRdiDtcStatusByNumberNotFound<br/>
[USDT]&#160;$7F&#160;$A9&#160;$31<br/>
&#160;<br/>
Figure&#160;6-14&#160;&#160;Request&#160;$A9&#160;$80&#160;where&#160;the&#160;requested&#160;fault&#160;type&#160;combination&#160;was&#160;not&#160;found&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
53&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=54></a>Technical Reference&#160;CANdesc&#160;<br/>
Here&#160;are the&#160;detailed&#160;descriptions&#160;of&#160;the&#160;APIs&#160;used&#160;in&#160;the&#160;above&#160;diagrams:&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescGetDtcStatusByNumber</b>&#160;(vuint16 dtcNum, vuint8 failureTypeByte)&#160;<br/>
<b>Parameter&#160;</b><br/>
dtcNum&#160;<br/>
The&#160;requested&#160;DTC number&#160;<br/>
failureTypeByte&#160;<br/>
The&#160;requested&#160;failure-type&#160;byte&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;to&#160;query&#160;the&#160;application&#160;for the&#160;request combination of&#160;DTC number&#160;and&#160;<br/>failure-type&#160;byte.&#160;When the&#160;application&#160;finds&#160;this&#160;combination,&#160;it must acknowledge this&#160;by&#160;calling the&#160;<br/>function<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">&#160;<i>DescRdiDtcStatusByNumberFound</i>.&#160;</a>If&#160;the application cannot find a&#160;matching entry,&#160;it must&#160;<br/>acknowledge&#160;this&#160;by&#160;calling&#160;the function<a href="TechnicalReference_CANdesc_KWP_GMs.html#55">&#160;<i>DescRdiDtcStatusByNumberNotFound</i>.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$80&#160;<br/>&#160;&#160;The&#160;application&#160;can call<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">&#160;<i>DescRdiDtcStatusByNumberFound&#160;</i></a><a href="TechnicalReference_CANdesc_KWP_GMs.html#55">or&#160;<i>DescRdiDtcStatusByNumberNotFound&#160;</i></a><br/>
within this&#160;function,&#160;or it can exit&#160;this&#160;function&#160;and call&#160;one&#160;of&#160;them&#160;later&#160;on&#160;the&#160;application task&#160;level.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context (same as&#160;DescStateTask()).&#160;<br/>
Table&#160;6-13&#160;&#160;&#160;ApplDescGetDtcStatusByNumber&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescRdiDtcStatusByNumberFound</b>&#160;(vuint8 statusByte)&#160;<br/>
<b>Parameter&#160;</b><br/>
statusByte&#160;<br/>
The&#160;current status&#160;of&#160;the&#160;DTC which&#160;was&#160;passed&#160;as&#160;a&#160;parameter&#160;in the&#160;<br/>callback<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">&#160;<i>ApplDescGetDtcStatusByNumber</i>&#160;</a><br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;to&#160;acknowledge&#160;the&#160;successful&#160;search result&#160;of&#160;the DTC number&#160;and&#160;<br/>failure-type&#160;byte combination&#160;which&#160;were&#160;passed&#160;as&#160;parameters&#160;in the&#160;callback&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#54"><i>ApplDescGetDtcStatusByNumber.</i></a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$80&#160;<br/>&#160;&#160;CANdesc&#160;must have&#160;previously&#160;called<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">&#160;<i>ApplDescGetDtcStatusByNumber</i>&#160;</a><br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context&#160;<br/>
Table&#160;6-14&#160;&#160;&#160;DescRdiDtcStatusByNumberFound&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
54&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-55_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescRdiDtcStatusByNumberNotFound</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;to&#160;acknowledge&#160;the&#160;unsuccessful&#160;search result&#160;of&#160;the DTC number&#160;<br/>and failure-type&#160;byte&#160;combination&#160;which&#160;were&#160;passed&#160;as&#160;parameters&#160;in the callback&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#54"><i>ApplDescGetDtcStatusByNumber</i>&#160;</a><br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$80&#160;<br/>&#160;&#160;CANdesc&#160;must have&#160;previously&#160;called<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">&#160;<i>ApplDescGetDtcStatusByNumber</i>&#160;</a><br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context&#160;<br/>
Table&#160;6-15&#160;&#160;&#160;DescRdiDtcStatusByNumberNotFound&#160;<br/>
<b>6.12.2&#160;&#160;ReadStatusOfDTCByStatusMask&#160;($A9&#160;$81)&#160;<br/></b>This&#160;service&#160;transmits a&#160;list&#160;of&#160;DTCs&#160;and&#160;their&#160;properties&#160;back to&#160;the&#160;tester.&#160;CANdesc&#160;uses&#160;<br/>an&#160;iteration-based&#160;process to&#160;request&#160;each&#160;element&#160;of&#160;the&#160;list&#160;from&#160;the&#160;application.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>The&#160;iterator&#160;parameter&#160;discussed below&#160;is&#160;only&#160;provided to help the&#160;application&#160;keep&#160;<br/>
&#160;&#160;track&#160;of&#160;where it&#160;should begin/continue searching&#160;the&#160;list.&#160;The&#160;value&#160;of&#160;this&#160;parameter&#160;<br/>
has&#160;no&#160;meaning&#160;to CANdesc.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
CANdesc processes this service&#160;as shown&#160;below.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
55&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-56_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
If&#160;&#160;the&#160;&#160;application&#160;&#160;finds&#160;&#160;DTCs&#160;&#160;that&#160;&#160;match&#160;&#160;the&#160;&#160;given&#160;&#160;status&#160;&#160;mask&#160;&#160;byte,&#160;&#160;the&#160;&#160;following&#160;<br/>sequence&#160;will be&#160;executed:&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByStatusMask&#160;(At&#160;Least&#160;one&#160;DTC&#160;found)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$A9&#160;$81&#160;[DTC]&#160;[StatusMask]<br/>
ApplDescGetDtcStatusByMask(iter&#160;=&#160;0,&#160;StatusMask)<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:<br/>[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;time&#160;=&#160;P3Max]:<br/>[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
DescRdiDtcStatusByMaskFound(iter&#160;=&#160;X,&#160;DTC0,&#160;FailureTypeByte0,&#160;StatusByte0)<br/>
[UUDT]&#160;$81&#160;[DTC0][FailureTypeByte0][StatusByte0]<br/>
ApplDescGetDtcStatusByMask(iter&#160;=&#160;X,&#160;StatusMask)<br/>
DescRdiDtcStatusByMaskFound(iter&#160;=&#160;Y,&#160;DTC1,&#160;FailureTypeByte1,&#160;StatusByte1)<br/>
[UUDT]&#160;$81&#160;[DTC1][FailureTypeByte1][StatusByte1]<br/>
ApplDescGetDtcStatusByMask(iter&#160;=Y,&#160;StatusMask)<br/>
DescRdiDtcStatusByMaskNotFound(StatusAvailabilityMask)<br/>
[UUDT]&#160;$81&#160;$00&#160;$00&#160;$00&#160;[StatusAvailabilityMask]<br/>
&#160;<br/>
Figure&#160;6-15&#160;&#160;Request&#160;$A9&#160;$81&#160;where&#160;the&#160;application&#160;found&#160;two&#160;DTCs&#160;with&#160;the&#160;requested&#160;status&#160;mask&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Notes&#160;<br/></b>1.&#160;If&#160;the&#160;application cannot&#160;send the&#160;second&#160;and&#160;the&#160;following&#160;DTCs&#160;matching the&#160;<br/>
&#160;<br/>
requested&#160;mask&#160;within P2ecu time,&#160;CANdesc&#160;will&#160;not&#160;send&#160;further&#160;RCR-RP&#160;<br/>messages&#160;back&#160;to&#160;the&#160;tester.&#160;<br/>
2.&#160;Although&#160;CANdesc&#160;can&#160;process&#160;another&#160;request&#160;after&#160;the&#160;first&#160;UUDT&#160;response has&#160;<br/>
been&#160;sent,&#160;if&#160;that&#160;next&#160;request&#160;is&#160;either&#160;$A9&#160;$80&#160;or&#160;$A9 $81&#160;the&#160;request&#160;will&#160;be&#160;<br/>rejected&#160;with negative response&#160;“ConditionsNotCorrect”&#160;($22).&#160;<br/>
3.&#160;CANdesc&#160;can&#160;process&#160;$A9 $80 or&#160;$A9 $81&#160;requests&#160;again&#160;once&#160;the&#160;“End&#160;of&#160;DTC&#160;<br/>
report”&#160;message has&#160;been sent..&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
If&#160;the&#160;application&#160;cannot&#160;find&#160;any&#160;DTCs&#160;matching&#160;the&#160;requested&#160;status mask,&#160;CANdesc will&#160;<br/>only&#160;send&#160;the&#160;final UUDT&#160;response&#160;as shown&#160;below:&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
56&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=57></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByStatusMask&#160;(No&#160;DTC&#160;found)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$A9&#160;$81&#160;[DTC]&#160;[StatusMask]<br/>
ApplDescGetDtcStatusByMask(iter&#160;=&#160;0,&#160;StatusMask)<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;time&#160;=&#160;P3Max]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
DescRdiDtcStatusByMaskNotFound(StatusAvailabilityMask)<br/>
[UUDT]&#160;$81&#160;$00&#160;$00&#160;$00&#160;[StatusAvailabilityMask]<br/>
&#160;<br/>
Figure&#160;6-16&#160;&#160;Request&#160;$A9&#160;$81&#160;where&#160;the&#160;application&#160;cannot&#160;find&#160;any&#160;DTCs&#160;with&#160;the&#160;requested&#160;status&#160;mask&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
57&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=58></a>Technical Reference&#160;CANdesc&#160;<br/>
Here&#160;are the&#160;detailed&#160;descriptions&#160;of&#160;the&#160;APIs&#160;used&#160;in&#160;the&#160;above&#160;diagrams:&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescGetDtcStatusByMask</b>&#160;(vuint16 iterPos, vuint8 statusMask)&#160;<br/>
<b>Parameter&#160;</b><br/>
iterPos&#160;<br/>
An&#160;iterator for the&#160;search start position (abstract)&#160;<br/>
statusMask&#160;<br/>
The&#160;status&#160;mask&#160;that the&#160;DTC shall&#160;match (OR-ed)&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;to&#160;query&#160;the&#160;application&#160;for the&#160;first/next DTC number&#160;that&#160;has&#160;at&#160;least one bit&#160;<br/>in&#160;its&#160;status&#160;byte matching&#160;the&#160;parameter&#160;<i>statusMask</i>.&#160;When&#160;the&#160;application&#160;finds&#160;this&#160;combination,&#160;it must&#160;<br/>acknowledge&#160;this&#160;by&#160;calling&#160;the function<a href="TechnicalReference_CANdesc_KWP_GMs.html#59">&#160;<i>DescRdiDtcStatusByMaskFound</i>.&#160;</a>If&#160;the application&#160;cannot&#160;find&#160;any&#160;<br/>(more)&#160;matching&#160;DTCs, it must acknowledge this&#160;by&#160;calling the function&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#59"><i>DescRdiDtcStatusByMaskNotFound</i>.</a>&#160;<br/>The&#160;application&#160;can use&#160;the&#160;iterator parameter&#160;as&#160;a&#160;marker to continue&#160;the&#160;search&#160;from&#160;a&#160;certain position&#160;<br/>instead of&#160;implementing&#160;a counter or&#160;state&#160;machine.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$81&#160;<br/>&#160;&#160;The&#160;application&#160;can call<a href="TechnicalReference_CANdesc_KWP_GMs.html#59">&#160;<i>DescRdiDtcStatusByMaskFound</i>&#160;or&#160;<i>DescRdiDtcStatusByMaskNotFound</i>&#160;</a>within&#160;<br/>
this&#160;function,&#160;or&#160;it can&#160;exit&#160;this&#160;function and call&#160;one&#160;of&#160;them&#160;later&#160;on&#160;the&#160;application task&#160;level.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context (same as&#160;DescStateTask()).&#160;<br/>
Table&#160;6-16&#160;&#160;&#160;ApplDescGetDtcStatusByMask&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescRdiDtcStatusByMaskFound</b>&#160;(DescRdiDtcRecord *pDtcReport)&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
58&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=59></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Parameter&#160;</b><br/>
vuint16 nextIterPos&#160;<br/>
The&#160;position&#160;of&#160;the current&#160;matching&#160;DTC&#160;<br/>
vuint16 dtcNum&#160;<br/>
The&#160;DTC number&#160;which matches&#160;the&#160;given mask&#160;<br/>
vuint8 failureTypeByte&#160;&#160;The&#160;failure type&#160;byte&#160;of&#160;the&#160;DTC&#160;<br/>
vuint8 statusByte&#160;<br/>
The&#160;actual&#160;status&#160;byte&#160;value of&#160;the DTC&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;to&#160;acknowledge&#160;the&#160;successful&#160;search result&#160;of&#160;the statusMask&#160;which&#160;<br/>was&#160;passed&#160;as&#160;a&#160;parameter&#160;in the callback&#160;<i>ApplDescGetDtcStatusByMask</i>.&#160;<br/>The&#160;parameter&#160;pDtcReport&#160;is&#160;a&#160;pointer to&#160;a DTC property&#160;structure.&#160;Since CANdesc&#160;will&#160;immediately&#160;copy&#160;<br/>the&#160;contents&#160;of&#160;this&#160;structure,&#160;the ECU developer&#160;can&#160;use an&#160;automatic&#160;variable to save RAM.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$81.&#160;<br/>&#160;&#160;CANdesc&#160;must have&#160;previously&#160;called<a href="TechnicalReference_CANdesc_KWP_GMs.html#58">&#160;<i>ApplDescGetDtcStatusByMask</i>&#160;</a><br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;contex&#160;<br/>
Table&#160;6-17&#160;&#160;&#160;DescRdiDtcStatusByMaskFound&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescRdiDtcStatusByMaskNotFound</b>&#160;(vuint8 dtcSam)&#160;<br/>
<b>Parameter&#160;</b><br/>
dtcSam&#160;<br/>
Represents&#160;the status&#160;availability&#160;mask&#160;of&#160;the fault memory&#160;manager (i.e.&#160;<br/>which&#160;bits&#160;of&#160;the status&#160;mask&#160;are relevant for the&#160;ECU).&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;to&#160;acknowledge&#160;that there&#160;were no (more)&#160;DTCs&#160;found&#160;that match the&#160;<br/>statusMask&#160;which&#160;was&#160;passed&#160;as&#160;a&#160;parameter&#160;in the&#160;callback&#160;<i>ApplDescGetDtcStatusByMask</i>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$81.&#160;<br/>&#160;&#160;CANdesc&#160;has&#160;previously&#160;called<a href="TechnicalReference_CANdesc_KWP_GMs.html#58">&#160;<i>ApplDescGetDtcStatusByMask.</i></a>&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context&#160;<br/>
Table&#160;6-18&#160;&#160;&#160;DescRdiDtcStatusByMaskNotFound&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
59&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=60></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>6.12.3&#160;&#160;SendOnChangeDTCCount&#160;($A9&#160;$82)&#160;<br/></b>This&#160;&#160;service&#160;&#160;manages&#160;&#160;the&#160;&#160;background&#160;&#160;application&#160;&#160;monitor&#160;&#160;which&#160;&#160;detects&#160;&#160;DTC&#160;&#160;count&#160;<br/>changes.&#160;&#160;In&#160;&#160;an&#160;&#160;effort&#160;&#160;to&#160;&#160;more&#160;&#160;efficiently&#160;&#160;manage&#160;&#160;this&#160;&#160;functionality,&#160;&#160;CANdesc&#160;&#160;notifies&#160;&#160;the&#160;<br/>application&#160;via&#160;function&#160;callbacks to&#160;activate/deactivate&#160;the&#160;monitor.&#160;&#160;<br/>CANdesc processes this service&#160;as shown&#160;below.&#160;<br/>If&#160;the&#160;tester&#160;sends&#160;a&#160;request&#160;for&#160;this&#160;service&#160;with&#160;a&#160;non-zero&#160;status&#160;mask,&#160;the&#160;DTC&#160;count&#160;<br/>monitor shall&#160;be&#160;activated:&#160;<br/>
<b>sd&#160;Send&#160;on&#160;change&#160;DTC&#160;count&#160;request&#160;&#160;(Enable)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[StatusMask&#160;!=&#160;0]:&#160;[USDT]&#160;$A9&#160;$82&#160;[StatusMask]<br/>
ApplDescEnableOnChangeDtcCount<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;time&#160;=&#160;P3Max]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
DescRdiOnDtcCountChanged(NewCount0)<br/>
[UUDT]&#160;$82&#160;[NewCount0]<br/>
DescRdiOnDtcCountChanged(NewCount1)<br/>
[UUDT]&#160;$82&#160;[NewCount1]<br/>
&#160;<br/>
Figure&#160;6-17&#160;&#160;Request&#160;$A9&#160;$82&#160;with&#160;activation&#160;of&#160;the&#160;background&#160;DTC&#160;count&#160;monitor&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
60&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=61></a>Technical Reference&#160;CANdesc&#160;<br/>
If&#160;the&#160;tester&#160;sends&#160;a&#160;request&#160;for&#160;this&#160;service&#160;with&#160;a&#160;status&#160;&#160;mask&#160;of&#160;zero,&#160;&#160;the&#160;background&#160;<br/>monitoring&#160;shall&#160;be&#160;deactivated:&#160;<br/>
<b>sd&#160;Send&#160;on&#160;change&#160;DTC&#160;count&#160;request&#160;&#160;(Disable)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[StatusMask&#160;==&#160;0]:&#160;[USDT]&#160;$A9&#160;$82&#160;[StatusMask]<br/>
ApplDescDisableOnChangeDtcCount<br/>
[UUDT]&#160;$82&#160;$00&#160;$00<br/>
&#160;<br/>
Figure&#160;6-18&#160;&#160;Request&#160;$A9&#160;$82&#160;with&#160;explicit&#160;deactivation&#160;of&#160;the&#160;background&#160;DTC&#160;count&#160;monitor.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
61&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-62_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
Since&#160;&#160;this&#160;&#160;service&#160;&#160;is&#160;&#160;monitored&#160;&#160;for&#160;&#160;tester&#160;&#160;present&#160;&#160;timeouts,&#160;&#160;when&#160;&#160;no&#160;&#160;more&#160;&#160;$3E&#160;&#160;requests&#160;<br/>are received&#160;the&#160;DTC&#160;count&#160;monitor shall&#160;be&#160;deactivated:&#160;<br/>
<b>sd&#160;Send&#160;on&#160;change&#160;DTC&#160;count&#160;request&#160;&#160;(Timeout)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[StatusMask&#160;!=&#160;0]:&#160;[USDT]&#160;$A9&#160;$82&#160;[StatusMask]<br/>
ApplDescEnableOnChangeDtcCount<br/>
[ResponsePending&#160;time&#160;=&#160;P2]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;time&#160;=&#160;P3Max]:&#160;[USDT]&#160;$7F&#160;$A9&#160;$78<br/>
DescRdiOnDtcCountChanged(NewCount0)<br/>
[UUDT]&#160;$82&#160;[NewCount0]<br/>
DescRdiOnDtcCountChanged(NewCount1)<br/>
[UUDT]&#160;$82&#160;[NewCount1]<br/>
TesterPresent&#160;Timeout<br/>
ApplDescDisableOnChangeDtcCount<br/>
&#160;<br/>
Figure&#160;6-19&#160;&#160;Request&#160;$A9&#160;$82&#160;with&#160;deactivation&#160;of&#160;the&#160;background&#160;DTC&#160;count&#160;monitor&#160;by&#160;timeout.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>In&#160;&#160;addition&#160;&#160;to&#160;&#160;tester&#160;&#160;present&#160;&#160;timeout,&#160;&#160;CANdesc&#160;&#160;will&#160;&#160;react&#160;&#160;in&#160;&#160;the&#160;&#160;same&#160;&#160;way&#160;&#160;on&#160;&#160;the&#160;<br/>
&#160;&#160;following&#160;events:&#160;<br/>
&#160;&#160;The&#160;tester&#160;sends&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">a&#160;<i>Service ReturnToNormalMode ($20)</i>&#160;</a>request&#160;<br/>
&#160;&#160;The&#160;application calls&#160;the&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#64">&#160;<i>DescRdiDeactivateOnChangeDtcCount</i>.</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
CANdesc&#160;can&#160;process&#160;this&#160;request&#160;in&#160;parallel&#160;to&#160;an&#160;$A9&#160;$81&#160;request&#160;&#160;after&#160;the&#160;first&#160;UUDT&#160;<br/>response&#160;has been&#160;sent.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
62&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=63></a>Technical Reference&#160;CANdesc&#160;<br/>
Here&#160;are the&#160;detailed&#160;descriptions&#160;of&#160;the&#160;APIs&#160;used&#160;in&#160;the&#160;above&#160;diagrams:&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescEnableOnChangeDtcCount</b>&#160;(vuint8 statusMask)&#160;<br/>
<b>Parameter&#160;</b><br/>
statusMask&#160;<br/>
The&#160;status&#160;mask&#160;which the&#160;application&#160;shall&#160;apply&#160;as&#160;a&#160;filter for the&#160;DTC count&#160;<br/>monitor (i.e.&#160;which&#160;DTCs&#160;shall&#160;be&#160;monitored)&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;to&#160;tell&#160;the&#160;application&#160;that&#160;it&#160;shall&#160;activate&#160;DTC count&#160;monitoring.&#160;From&#160;this&#160;point&#160;<br/>on, the&#160;application&#160;shall&#160;send&#160;the DTC count&#160;on&#160;change by&#160;calling&#160;the&#160;function&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#64"><i>DescRdiOnDtcCountChanged</i>.</a>&#160;<br/>CANdesc&#160;does&#160;not&#160;store&#160;the requested&#160;statusMask; it&#160;must be stored&#160;by&#160;the&#160;application&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context (same as&#160;DescStateTask()).&#160;<br/>
Table&#160;6-19&#160;&#160;&#160;ApplDescEnableOnChangeDtcCount&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>ApplDescDisableOnChangeDtcCount</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
CANdesc&#160;calls&#160;this&#160;function&#160;to&#160;notify&#160;the&#160;application that it shall&#160;deactivate DTC count&#160;monitoring.&#160;From&#160;this&#160;<br/>point&#160;on,&#160;the application&#160;shall&#160;not&#160;send&#160;the&#160;DTC count&#160;on&#160;change&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context (same as&#160;DescStateTask()).&#160;<br/>
Table&#160;6-20&#160;&#160;&#160;ApplDescDisableOnChangeDtcCount&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescRdiOnDtcCountChanged</b>&#160;(vuint16 newCount)&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
63&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=64></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Parameter&#160;</b><br/>
newCount&#160;<br/>
The&#160;new&#160;count&#160;of&#160;DTCs&#160;that&#160;match the&#160;mask&#160;that&#160;was&#160;passed&#160;as&#160;a&#160;parameter&#160;<br/>by&#160;the&#160;function&#160;<i>ApplDescEnableOnChangeDtcCount</i>.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;to&#160;notify&#160;CANdesc&#160;that&#160;the DTC count&#160;has&#160;changed.&#160;CANdesc&#160;will&#160;<br/>send a&#160;UUDT&#160;response back&#160;to&#160;the tester.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>&#160;&#160;CANdesc&#160;must have&#160;previously&#160;called&#160;the&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">&#160;<i>ApplDescEnableOnChangeDtcCount.</i></a>&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context&#160;<br/>
Table&#160;6-21&#160;&#160;&#160;DescRdiOnDtcCountChanged&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescRdiDeactivateOnChangeDtcCount</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;application&#160;can call&#160;this&#160;function&#160;to&#160;notify&#160;CANdesc&#160;that&#160;it has&#160;stopped&#160;DTC count&#160;monitoring.&#160;<br/>CANdesc&#160;will&#160;call&#160;the&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">&#160;<i>ApplDescDisableOnChangeDtcCount</i>&#160;</a>to&#160;acknowledge&#160;this&#160;event.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;Only&#160;available&#160;if&#160;the&#160;ECU&#160;supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>&#160;&#160;CANdesc&#160;must have&#160;previously&#160;called&#160;the&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#63">&#160;<i>ApplDescEnableOnChangeDtcCount.</i></a>&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context.&#160;<br/>
Table&#160;6-22&#160;&#160;&#160;DescRdiDeactivateOnChangeDtcCount&#160;<br/>
<b>6.13&#160;&#160;Service&#160;ReadDataByPacketIdentifier ($AA)&#160;</b><br/>
This&#160;&#160;service&#160;&#160;allows&#160;&#160;the&#160;&#160;tester&#160;&#160;to&#160;&#160;read&#160;&#160;a&#160;&#160;DPID&#160;&#160;(data&#160;&#160;packet&#160;&#160;identifier)&#160;&#160;either&#160;&#160;once&#160;&#160;or&#160;<br/>periodically&#160;&#160;with&#160;&#160;three&#160;&#160;possible&#160;&#160;speeds&#160;&#160;(slow,&#160;&#160;medium,&#160;&#160;or&#160;&#160;fast).&#160;&#160;CANdesc&#160;&#160;completely&#160;<br/>handles&#160;this&#160;service.&#160;Only&#160;the&#160;PacketHandlers&#160;may&#160;be&#160;implemented&#160;by&#160;the&#160;application&#160;as&#160;<br/>described&#160;in&#160;section<a href="TechnicalReference_CANdesc_KWP_GMs.html#26">&#160;5.7&#160;The&#160;PacketHandler (another type&#160;of&#160;service&#160;processor).</a>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
64&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-65_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>6.13.1&#160;&#160;Handling undefined use&#160;cases&#160;<br/></b>There&#160;are&#160;some&#160;use&#160;cases&#160;which&#160;are&#160;not&#160;covered&#160;or&#160;completely&#160;described&#160;in&#160;the&#160;GM/Opel&#160;<br/>diagnostic&#160;&#160;specification.&#160;&#160;The&#160;&#160;following&#160;&#160;sections&#160;&#160;describe&#160;&#160;these&#160;&#160;cases&#160;&#160;along&#160;&#160;with&#160;&#160;the&#160;<br/>resulting&#160;CANdesc behaviour.&#160;&#160;<br/>
<b>6.13.1.1&#160;&#160;Service&#160;$AA&#160;handling for undefined&#160;dynamically&#160;definable&#160;DPIDs&#160;<br/></b>According&#160;&#160;to&#160;&#160;GMW-3110&#160;&#160;version&#160;&#160;1.6,&#160;&#160;if&#160;&#160;the&#160;&#160;tester&#160;&#160;requests&#160;&#160;an&#160;&#160;undefined&#160;&#160;dynamically&#160;<br/>definable&#160;DPID&#160;with&#160;service&#160;$AA&#160;the&#160;result&#160;is&#160;undefined.&#160;In&#160;this&#160;situation,&#160;CANdesc&#160;sends&#160;<br/>a&#160;UUDT&#160;response&#160;with&#160;no&#160;actual&#160;data&#160;(byte&#160;zero&#160;is&#160;the&#160;DPID&#160;number&#160;and&#160;the&#160;remaining&#160;<br/>bytes are padded).&#160;<br/>
<b>6.13.1.2&#160;&#160;Service&#160;$AA&#160;handling for undefined&#160;referenced dynamically&#160;defined&#160;PIDs&#160;<br/></b>As&#160;mentioned&#160;in&#160;&#160;section<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">&#160;&#160;<i>6.4.1</i>&#160;&#160;<i>Reading&#160;a&#160;dynamically&#160;defined&#160;PID&#160;(Parameter&#160;Identifier),</i></a>&#160;<br/>the&#160;undefined&#160;PID&#160;contained&#160;by&#160;the&#160;DPID&#160;will&#160;contain&#160;no&#160;data.&#160;In&#160;this&#160;situation,&#160;CANdesc&#160;<br/>sends&#160;&#160;a&#160;&#160;UUDT&#160;&#160;response&#160;&#160;with&#160;&#160;no&#160;&#160;actual&#160;&#160;data&#160;&#160;(byte&#160;&#160;zero&#160;&#160;is&#160;&#160;the&#160;&#160;DPID&#160;&#160;number&#160;&#160;and&#160;&#160;the&#160;<br/>remaining&#160;bytes&#160;are padded).&#160;<br/>
<b>6.13.1.3&#160;&#160;Service&#160;$AA&#160;handling for unaccessible&#160;referenced&#160;PIDs&#160;<br/></b>A&#160;&#160;dynamically&#160;&#160;defined&#160;&#160;DPID&#160;&#160;references&#160;&#160;one&#160;&#160;or&#160;&#160;more&#160;&#160;PIDs.&#160;&#160;If&#160;&#160;any&#160;&#160;of&#160;&#160;those&#160;&#160;PIDs&#160;&#160;are&#160;&#160;not&#160;<br/>accessible&#160;&#160;to&#160;&#160;the&#160;&#160;application&#160;&#160;for&#160;&#160;any&#160;&#160;reason&#160;&#160;(e.g.&#160;&#160;security&#160;&#160;access,&#160;&#160;current&#160;&#160;ECU&#160;&#160;state,&#160;<br/>memory&#160;&#160;access&#160;&#160;error,&#160;&#160;etc.)&#160;at&#160;&#160;the&#160;&#160;time&#160;the&#160;scheduler&#160;&#160;needs&#160;&#160;the&#160;data,&#160;&#160;CANdesc&#160;&#160;sends&#160;a&#160;<br/>UUDT&#160;&#160;response&#160;&#160;with&#160;&#160;no&#160;&#160;actual&#160;&#160;data&#160;&#160;(byte&#160;&#160;zero&#160;&#160;is&#160;&#160;the&#160;&#160;DPID&#160;&#160;number&#160;&#160;and&#160;&#160;the&#160;&#160;remaining&#160;<br/>bytes are padded).&#160;<br/>
<b>6.14&#160;&#160;Service&#160;DeviceControl ($AE)&#160;</b><br/>
The&#160;&#160;application&#160;&#160;must&#160;&#160;completely&#160;&#160;implement&#160;&#160;this&#160;&#160;service.&#160;&#160;In&#160;&#160;addition,&#160;&#160;the&#160;&#160;GM/Opel&#160;<br/>diagnostic&#160;&#160;specification&#160;&#160;requires&#160;&#160;that&#160;&#160;the&#160;&#160;tester&#160;&#160;present&#160;&#160;timeout&#160;&#160;monitoring&#160;&#160;shall&#160;&#160;be&#160;<br/>activated&#160;once&#160;a&#160;DeviceControl&#160;service&#160;has&#160;been&#160;executed.&#160;Since&#160;CANdesc&#160;manages&#160;the&#160;<br/>tester&#160;&#160;present&#160;&#160;timer,&#160;&#160;the&#160;&#160;application&#160;&#160;must&#160;&#160;call&#160;&#160;the&#160;&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">&#160;&#160;<i>DescActivateS1Timer</i>&#160;&#160;</a>to&#160;&#160;fulfill&#160;<br/>this&#160;requirement.&#160;The&#160;proper&#160;location&#160;for&#160;this&#160;is&#160;the&#160;PostHandler&#160;for&#160;every&#160;CPID&#160;(Control&#160;<br/>Packet&#160;&#160;Identifier)&#160;&#160;except&#160;&#160;0x00&#160;&#160;(reserved&#160;&#160;for&#160;&#160;“terminate&#160;&#160;device&#160;&#160;control”).&#160;&#160;To&#160;&#160;facilitate&#160;&#160;this,&#160;<br/>the&#160;&#160;ECU&#160;&#160;developer&#160;&#160;should&#160;&#160;select&#160;&#160;‘User’&#160;&#160;as&#160;&#160;the&#160;&#160;PostHandler&#160;&#160;attribute&#160;&#160;for&#160;&#160;these&#160;&#160;CPIDs&#160;&#160;in&#160;<br/>CANdela&#160;&#160;Studio.&#160;&#160;These&#160;&#160;PostHandlers&#160;&#160;must&#160;&#160;then&#160;&#160;evaluate&#160;&#160;the&#160;&#160;status&#160;&#160;parameter&#160;&#160;(see&#160;<br/>TechnicalReference_CANdesc)&#160;and&#160;if&#160;the&#160;result&#160;is&#160;ok&#160;(i.e.&#160;CANdesc&#160;has&#160;successfully&#160;sent&#160;<br/>the&#160;positive&#160;response)&#160;the&#160;application&#160;must&#160;call&#160;the&#160;function<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">&#160;<i>DescActivateS1Timer</i>.</a>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>To&#160;reduce&#160;ROM&#160;usage and&#160;improve&#160;run-time,&#160;the&#160;ECU&#160;developer&#160;can&#160;use&#160;the&#160;<br/>
&#160;&#160;“PostHanlderOverrideName”&#160;attribute&#160;in CANdelaStudio to&#160;define&#160;a&#160;single&#160;PostHandler&#160;<br/>
used by&#160;all&#160;CPIDs.&#160;<br/>Please refer&#160;to sectio<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">n&#160;<i>7.3&#160;Service&#160;attributes</i>&#160;</a>for&#160;more&#160;details.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>Here&#160;is an&#160;example&#160;how&#160;the&#160;ECU&#160;developer could&#160;implement&#160;the&#160;PostHandler:&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
65&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-66_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-66_2.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-20&#160;PostHandler&#160;for&#160;“DeviceControl”&#160;($AE)&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescActivateS1Timer</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;application can&#160;call&#160;this&#160;function&#160;to&#160;enable&#160;tester&#160;present&#160;timeout&#160;monitoring.&#160;This&#160;function&#160;is&#160;<br/>normally&#160;only&#160;used in&#160;the&#160;“DeviceControl”&#160;($AE)&#160;service PostHandler.&#160;<br/>&#160;<br/>This&#160;function&#160;will&#160;not&#160;restart&#160;the tester present&#160;timer!&#160; Only&#160;the tester can reset&#160;the&#160;timer, by&#160;sending&#160;the&#160;<br/>“TesterPresent”&#160;($3E)&#160;service.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;&#160;None&#160;<br/>
Call&#160;context&#160;<br/>&#160;&#160;Background-loop&#160;level&#160;task&#160;context (same as&#160;DescStateTask()).&#160;<br/>
Table&#160;6-23&#160;&#160;&#160;DescActivateS1Timer&#160;<br/>
&#160;<br/>
<b>6.15&#160;&#160;Service&#160;TesterPresent ($3E)&#160;</b><br/>
CANdesc&#160;&#160;implements&#160;&#160;this&#160;&#160;service&#160;&#160;by&#160;&#160;reloading&#160;&#160;the&#160;&#160;tester&#160;&#160;present&#160;&#160;timer&#160;&#160;with&#160;&#160;the&#160;&#160;original&#160;<br/>timeout&#160;value.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>This&#160;service does not&#160;activate&#160;tester&#160;present&#160;timeout&#160;monitoring!&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
66&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-67_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>7&#160;&#160;CANdelaStudio&#160;default&#160;attribute&#160;settings&#160;</b><br/>
In&#160;order&#160;to&#160;use&#160;the&#160;features&#160;of&#160;CANdesc&#160;described&#160;in&#160;this&#160;document,&#160;the&#160;ECU&#160;developer&#160;<br/>must&#160;set&#160;the&#160;CANdelaStudio&#160;attributes&#160;appropriately&#160;for&#160;the&#160;corresponding&#160;services&#160;and/or&#160;<br/>their&#160;instances&#160;as described&#160;below.&#160;<br/>The&#160;ECU&#160;developer configures&#160;CANdelaStudio&#160;attributes&#160;on&#160;three&#160;levels:&#160;<br/>
<b>&#160;&#160;Diagnostic&#160;Class</b>&#160;(like&#160;“Ecu&#160;identification”, “Security&#160;access”, etc.)&#160;<br/>
<b>&#160;&#160;Diagnostic&#160;Instance</b>&#160;(like&#160;“(DID $90) Vehicle&#160;Identification&#160;Number”,&#160;<br/>
“RequestProgrammingModeHighSpeed”, etc.)&#160;<br/>
<b>&#160;&#160;Service</b>&#160;(like&#160;“Read” or&#160;“Write”&#160;on&#160;<b>Diagnostic&#160;Instance</b>&#160;“(DID $90) Vehicle&#160;Identification&#160;<br/>
Number”).&#160;<br/>
The&#160;picture below&#160;illustrates these&#160;three&#160;levels in&#160;CANdelaStudio:&#160;<br/>
<b>&#160;</b><br/>
Figure&#160;7-1&#160;CANdelaStudio&#160;views&#160;<br/>
Legend:&#160;&#160;<br/>
<b>&#160;&#160;</b>RED:&#160;&#160;<br/>
&#160;Diagnostic Class&#160;<br/>
<b>&#160;&#160;</b>BLUE:&#160;&#160;<br/>
&#160;Diagnostic Instance&#160;<br/>
<b>&#160;&#160;</b>YELLOW:&#160;&#160;&#160;&#160;Service&#160;<br/>
<b>7.1&#160;</b><br/>
<b>Diagnostic&#160;class&#160;attributes&#160;</b><br/>
CANdesc&#160;is&#160;designed&#160;to&#160;handle&#160;certain&#160;events&#160;on&#160;a&#160;diagnostic&#160;class&#160;basis;&#160;therefore,&#160;the&#160;<br/>ECU&#160;&#160;developer&#160;&#160;must&#160;&#160;configure&#160;&#160;the&#160;&#160;attributes&#160;&#160;on&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;class&#160;&#160;level.&#160;&#160;The&#160;&#160;relevant&#160;<br/>services&#160;and&#160;their&#160;attribute&#160;configurations&#160;are&#160;listed&#160;below.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
67&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-68_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;7-2&#160;Diagnostic&#160;Class&#160;level&#160;attributes&#160;<br/>
<b>Diagnostic&#160;Class&#160;name&#160;</b><br/>
<b>MainHandler&#160;&#160;PreHandler&#160;</b><br/>
<b>PacketHandler&#160;&#160;PostHandler&#160;</b><br/>
<b>Support&#160;(for&#160;&#160;Support&#160;(for&#160;&#160;Support&#160;</b><br/>
<b>Support&#160;(for&#160;</b><br/>
<b>all&#160;Protocol&#160;</b><br/>
<b>all&#160;Protocol&#160;</b><br/>
<b>all&#160;Protocol&#160;</b><br/>
<b>Service)&#160;</b><br/>
<b>Services)&#160;</b><br/>
<b>Services)&#160;</b><br/>
Failure&#160;Record Data&#160;–&#160;<br/>
<b>USER&#160;</b><br/>
None&#160;<br/>
None&#160;<br/>
None&#160;<br/>
Parameters&#160;<br/>Dynamic&#160;Data&#160;Packets&#160;<br/>
None&#160;<br/>
None&#160;<br/>
<b>All</b>&#160;<br/>
None&#160;<br/>
Data&#160;Packet&#160;<br/>
<b>OEM</b>&#160;<br/>
None&#160;<br/>
<b>All&#160;</b><br/>
<b>OEM&#160;</b><br/>
Programming&#160;mode&#160;<br/>
<b>OEM</b>&#160;<br/>
None&#160;<br/>
None&#160;<br/>
<b>OEM</b>&#160;<br/>
Table&#160;7-1&#160;&#160;&#160;Default&#160;‘Diagnostic&#160;Class’&#160;attribute&#160;settings&#160;<br/>
&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Diagnostic&#160;instance&#160;attributes&#160;</b><br/>
CANdesc&#160;is&#160;designed&#160;to&#160;handle&#160;certain&#160;events&#160;on&#160;a&#160;diagnostic&#160;instance&#160;basis;&#160;therefore,&#160;<br/>the&#160;&#160;ECU&#160;&#160;developer&#160;&#160;must&#160;&#160;configure&#160;&#160;the&#160;&#160;attributes&#160;&#160;on&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;instance&#160;&#160;level.&#160;&#160;The&#160;<br/>relevant&#160;services&#160;and&#160;their&#160;attribute&#160;configurations are listed&#160;below.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
68&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-69_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;7-3&#160;Diagnostic&#160;Instance&#160;level&#160;attributes&#160;<br/>
&#160;<br/>
<b>Diagnostic&#160;Class&#160;name&#160;where&#160;Diagnostic&#160;</b><br/>
<b>PacketHandler&#160;Option&#160;</b><br/>
<b>Instances&#160;shall&#160;be&#160;configured&#160;</b><br/>
&#160;<br/>
<b>Default&#160;</b><br/>
<b>Optional&#160;</b><br/>
Data&#160;Packet&#160;<br/>
<b>USER&#160;</b><br/>
<b>Generated&#160;</b><br/>
Table&#160;7-2&#160;&#160;&#160;Default&#160;‘Diagnostic&#160;instance’&#160;attribute&#160;settings&#160;<br/>
<b>7.3&#160;</b><br/>
<b>Service&#160;attributes&#160;</b><br/>
CANdesc&#160;is&#160;designed&#160;to&#160;handle&#160;certain&#160;events&#160;on&#160;a&#160;diagnostic&#160;service&#160;basis; therefore,&#160;the&#160;<br/>ECU&#160;developer&#160;must&#160;configure&#160;the&#160;attributes&#160;on&#160;the&#160;diagnostic&#160;service&#160;level.&#160;The&#160;relevant&#160;<br/>services&#160;and&#160;their&#160;attribute&#160;configurations&#160;are&#160;listed&#160;below.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
69&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-70_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;7-4&#160;&#160;Service&#160;related&#160;attributes&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
70&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=71></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-71_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
<b>Notes</b>:&#160;<br/>
<b>Service&#160;(and&#160;</b><br/>
<b>MainHandler&#160;&#160;PreHandler&#160;&#160;PreHandler&#160;</b><br/>
<b>PostHandler&#160;&#160;PostHandler&#160;</b><br/>
<b>sub-service)&#160;ID&#160;&#160;Support&#160;(for&#160;&#160;Support&#160;&#160;</b><br/>
<b>OverrideName&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>OverrideName&#160;</b><br/>
<b>that&#160;shall&#160;be&#160;</b><br/>
<b>Service)&#160;</b><br/>
<b>configured&#160;<br/></b>$10 $02&#160;<br/>
<b>Generated&#160;</b><br/>
None&#160;<br/>
&#160;<br/>
<b>OEM&#160;</b><br/>
&#160;<br/>
<b>(User)&#160;</b><br/>
$10 $03&#160;<br/>
<b>Generated&#160;</b><br/>
None&#160;<br/>
&#160;<br/>
<b>OEM</b>&#160;<br/>
&#160;<br/>
<b>(User)</b>&#160;<br/>
$20&#160;<br/>
<b>OEM</b>&#160;<br/>
None&#160;<br/>
<b>&#160;</b><br/>
<b>OEM&#160;</b><br/>
<b>&#160;</b><br/>
$28&#160;<br/>
<b>OEM&#160;</b>1)&#160;<br/>
None&#160;<br/>
&#160;<br/>
None&#160;<br/>
&#160;<br/>
$3E&#160;<br/>
<b>Generated&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>OEM&#160;</b><br/>
&#160;<br/>
<b>(User)&#160;&#160;</b><br/>
$A9 $80&#160;<br/>
<b>OEM&#160;</b><br/>
<b>OEM</b>&#160;<br/>
&#160;<br/>
None&#160;<br/>
&#160;<br/>
$A9 $81&#160;<br/>
<b>OEM&#160;</b><br/>
<b>OEM</b>&#160;<br/>
&#160;<br/>
None&#160;<br/>
&#160;<br/>
$A9 $82&#160;<br/>
<b>OEM&#160;</b><br/>
None&#160;<br/>
&#160;<br/>
<b>OEM</b>&#160;<br/>
&#160;<br/>
$AE&#160;$00&#160;<br/>
User&#160;<br/>
None&#160;<br/>
&#160;<br/>
None&#160;<br/>
&#160;<br/>
$AE&#160;$01-$FF&#160;<br/>
User&#160;<br/>
None&#160;<br/>
&#160;<br/>
<b>User&#160;</b><br/>
One&#160;function&#160;for&#160;all&#160;<br/>sub-services (see&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#65"><i>Service&#160;<br/>DeviceControl&#160;<br/>($AE)</i>)</a>&#160;<br/>
Table&#160;7-3&#160;&#160;&#160;Default&#160;‘Service’&#160;attribute&#160;settings&#160;<br/>
<b>&gt;&#160;&#160;</b>All&#160;cells defined&#160;as “None” can&#160;optionally&#160;be&#160;replaced&#160;only&#160;by&#160;“User”&#160;attributes when&#160;<br/>
desired.&#160;<br/>
<b>&gt;&#160;&#160;</b>Some&#160;data&#160;access services&#160;(e.g.&#160;$22,&#160;$1A,&#160;$3B&#160;and&#160;$AA)&#160;use&#160;“Generated”&#160;<br/>
MainHandler (for $AA&#160;PacketHandler)&#160;support.&#160;This&#160;eliminates the&#160;need&#160;for the&#160;<br/>application&#160;to&#160;correctly&#160;order the&#160;data&#160;in&#160;the&#160;response&#160;message&#160;(it&#160;must&#160;only&#160;return the&#160;<br/>data;&#160;CANdesc&#160;will assemble&#160;the&#160;response&#160;in&#160;the&#160;correct&#160;order)&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;</b><br/>
1)&#160;It&#160;is&#160;not&#160;possible&#160;to implement&#160;the&#160;<b>MainHandler</b>&#160;for&#160;service&#160;<b>$28</b>&#160;in your&#160;application&#160;<br/>
<b>&#160;&#160;</b>since&#160;CANdesc&#160;(since&#160;version 5.05.04)&#160;uses&#160;this&#160;service callback.&#160;To evaluate&#160;the&#160;<br/>
service execution&#160;conditions,&#160;you&#160;can&#160;use&#160;the&#160;<b>PreHandler</b>&#160;to perform&#160;those checks&#160;and&#160;<br/>to&#160;reject&#160;the&#160;service if&#160;needed.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
71&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-72_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>7.4&#160;</b><br/>
<b>State&#160;group&#160;for the&#160;Programming Sequence&#160;</b><br/>
The&#160;&#160;CANdesc&#160;&#160;implementation&#160;&#160;for&#160;&#160;the&#160;&#160;programming&#160;&#160;mode&#160;&#160;sequence&#160;&#160;relies&#160;&#160;on&#160;&#160;a&#160;&#160;state&#160;<br/>machine&#160;that&#160;can&#160;be&#160;defined&#160;as CANdela&#160;Studio&#160;state&#160;group.&#160;&#160;<br/>
<b>State&#160;Group&#160;</b><br/>
<b>State&#160;Qualifier&#160;</b><br/>
<b>Blocked&#160;&#160;Transitions&#160;</b><br/>
<b>Qualifier&#160;</b><br/>
<b>Services&#160;&#160;</b><br/>
ProgrammingMode&#160;&#160;Normal&#160;<br/>
$A5&#160;$xx&#160;&#160;$28&#160;-&gt;&#160;CommHalted&#160;<br/>
CommHalted&#160;<br/>
$A5 $03&#160;&#160;$A5 $01&#160;-&gt;&#160;Requested&#160;<br/>
$A5 $02&#160;-&gt;&#160;Requested_HiSpeed&#160;<br/>$20&#160;-&gt;&#160;Normal&#160;<br/>
Requested&#160;<br/>
None&#160;<br/>
$A5 $02&#160;-&gt;&#160;Requested_HiSpeed&#160;<br/>$A5 $03&#160;-&gt;&#160;Active&#160;<br/>$20&#160;-&gt;&#160;Normal&#160;<br/>
Requested_HiSpeed&#160;&#160;None&#160;<br/>
$A5 $01&#160;-&gt;&#160;Requested&#160;<br/>$A5 $03&#160;-&gt;&#160;Active&#160;<br/>$20&#160;-&gt;&#160;Normal&#160;<br/>
Active&#160;&#160;<br/>
$A5 $xx&#160;&#160;$20&#160;-&gt;&#160;Normal&#160;<br/>
Table&#160;7-4&#160;&#160;&#160;Programming&#160;Sequence&#160;state&#160;group&#160;<br/>
CANdesc&#160;will&#160;generate&#160;these&#160;states&#160;and&#160;transitions&#160;even&#160;if&#160;they&#160;do&#160;not&#160;&#160;exist&#160;in&#160;&#160;the&#160;CDD&#160;<br/>file.&#160;Otherwise,&#160;CANdesc&#160;will&#160;reuse&#160;&#160;what&#160;&#160;is&#160;already&#160;present,&#160;and&#160;add/remove&#160;all&#160;missing&#160;<br/>states&#160;and/or transitions.&#160;<br/>This&#160;&#160;means&#160;&#160;you&#160;&#160;cannot&#160;&#160;change&#160;&#160;the&#160;&#160;programming&#160;&#160;sequence&#160;&#160;by&#160;&#160;means&#160;&#160;of&#160;&#160;changing&#160;&#160;the&#160;<br/>state&#160;configuration,&#160;but&#160;you&#160;<b>can</b>&#160;put&#160;the&#160;correct&#160;sequence&#160;in&#160;the&#160;CDD&#160;file&#160;(using&#160;the&#160;exact&#160;<br/>qualifiers&#160;from&#160;the&#160;table&#160;above).&#160;This&#160;opens&#160;up&#160;the&#160;possibility&#160;to&#160;block&#160;further&#160;services&#160;from&#160;<br/>executing&#160;in&#160;any&#160;of&#160;these&#160;states.&#160;&#160;<br/>E.g.&#160;&#160;if&#160;&#160;you&#160;&#160;want&#160;&#160;to&#160;&#160;block&#160;&#160;all&#160;&#160;$AE&#160;&#160;services&#160;&#160;from&#160;&#160;executing&#160;&#160;while&#160;&#160;programming&#160;&#160;mode&#160;&#160;is&#160;<br/>‘Active’, you&#160;can&#160;model&#160;this in&#160;CANdela&#160;Studio,&#160;and&#160;CANdesc will do&#160;the&#160;rest&#160;for you.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>Since&#160;the&#160;StateGroup&#160;‘ProgrammingMode’&#160;follows&#160;the&#160;usual&#160;state&#160;group&#160;<br/>
&#160;&#160;implementation,&#160;all&#160;functionality&#160;regarding&#160;state&#160;groups is available for&#160;use.&#160;Especially&#160;<br/>
the&#160;callback&#160;ApplDescOnTransitionProgrammingMode&#160;will&#160;notify&#160;your&#160;application of&#160;any&#160;<br/>state&#160;change.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
72&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=73></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>8&#160;&#160;OBD&#160;support&#160;</b><br/>
What&#160;is&#160;special&#160;about&#160;OBD&#160;support?&#160;&#160;GM/Opel&#160;uses&#160;extended&#160;addressing&#160;for&#160;functionally&#160;<br/>addressed&#160;enhanced&#160;diagnostic&#160;services;&#160;however,&#160;functionally&#160;addressed&#160;OBD&#160;requests&#160;<br/>must&#160;&#160;use&#160;&#160;normal&#160;&#160;addressing.&#160;&#160;Due&#160;&#160;to&#160;&#160;this,&#160;&#160;CANdesc&#160;&#160;uses&#160;&#160;two&#160;&#160;separate&#160;&#160;reception&#160;&#160;paths.&#160;<br/>Additionally,&#160;&#160;the&#160;&#160;message&#160;&#160;definition&#160;&#160;of&#160;&#160;some&#160;&#160;OBD&#160;&#160;services&#160;&#160;does&#160;&#160;not&#160;&#160;match&#160;&#160;the&#160;&#160;generic&#160;<br/>service&#160;&#160;instance&#160;&#160;generator&#160;&#160;used&#160;&#160;by&#160;&#160;CANdesc&#160;&#160;so&#160;&#160;they&#160;&#160;can&#160;&#160;only&#160;&#160;be&#160;&#160;supported&#160;&#160;on&#160;&#160;the&#160;<br/>protocol service&#160;level.&#160;&#160;<br/>
<b>8.1&#160;</b><br/>
<b>CAN identifiers&#160;</b><br/>
<b>Enhanced diagnostic&#160;services&#160;</b><br/>
GM specifies&#160;enhanced&#160;diagnostic service&#160;requirements&#160;in&#160;GMW-3110.&#160;<br/>
<b>CAN ID 0x101&#160;-&#160;11-bit extended&#160;addressing USDT&#160;</b><br/>
This&#160;ID&#160;is&#160;only&#160;used&#160;for&#160;functionally&#160;addressed&#160;enhanced&#160;diagnostic&#160;requests.&#160;Functionally&#160;<br/>addressed&#160;OBD requests&#160;must&#160;use&#160;CAN&#160;ID&#160;0x7DF.&#160;<br/>
<b>OBD services&#160;</b><br/>
GM uses the&#160;OBD service&#160;requirements&#160;described&#160;in&#160;ISO15031-5.<b>&#160;</b><br/>
<b>CAN ID 0x7DF&#160;-&#160;11-bit normal&#160;addressing USDT&#160;</b><br/>
This&#160;&#160;ID&#160;&#160;is&#160;&#160;only&#160;&#160;used&#160;&#160;for&#160;&#160;functionally&#160;&#160;addressed&#160;&#160;OBD&#160;&#160;requests.&#160;&#160;Functionally&#160;&#160;addressed&#160;<br/>enhanced&#160;diagnostic requests&#160;must&#160;use&#160;CAN&#160;ID 0x101.&#160;<br/>
<b>CAN ID 0x7E0-0x7EF&#160;-&#160;11-bit normal&#160;addressing&#160;USDT&#160;</b><br/>
These&#160;&#160;IDs&#160;&#160;are&#160;&#160;used&#160;&#160;for&#160;&#160;physically&#160;&#160;addressed&#160;&#160;OBD&#160;&#160;requests&#160;&#160;to&#160;&#160;individual&#160;&#160;ECUs&#160;&#160;that&#160;<br/>support&#160;OBD&#160;services.&#160;ECUs&#160;using&#160;these&#160;IDs&#160;for&#160;OBD&#160;services&#160;may&#160;also&#160;elect&#160;to&#160;use&#160;the&#160;<br/>same&#160;IDs&#160;for&#160;physically&#160;addressed&#160;enhanced&#160;diagnostic&#160;services;&#160;however,&#160;ECUs&#160;that&#160;do&#160;<br/>not&#160;support OBD services may&#160;not&#160;use&#160;these&#160;IDs&#160;for enhanced&#160;diagnostic services.&#160;<br/>
<b>8.2&#160;</b><br/>
<b>Restrictions&#160;</b><br/>
SID&#160;$01,&#160;$02,&#160;$06,&#160;$08&#160;and&#160;$09&#160;must&#160;be&#160;handled&#160;at&#160;the&#160;diagnostic&#160;class&#160;level&#160;when&#160;the&#160;<br/>‘may&#160;be&#160;combined’&#160;property&#160;is enabled&#160;in&#160;CANdelaStudio.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
73&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=74></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>8.3&#160;</b><br/>
<b>CANdelaStudio default attribute&#160;settings&#160;for OBD&#160;services&#160;</b><br/>
<b>8.3.1&#160;</b><br/>
<b>Diagnostic&#160;classes&#160;</b><br/>
Powertrain&#160;diagnostic&#160;and&#160;freeze&#160;frame&#160;data&#160;(EOBD)&#160;–&#160;SID $01&#160;/&#160;$02&#160;<br/>Emission&#160;related&#160;trouble&#160;codes&#160;–&#160;SID $03&#160;/&#160;$07&#160;/&#160;$04&#160;<br/>Test&#160;results&#160;for non-continuously&#160;monitored&#160;systems (EOBD)&#160;–&#160;SID&#160;$06&#160;<br/>Control of&#160;on-board&#160;system,&#160;test,&#160;or component&#160;(EOBD)&#160;–&#160;SID $08&#160;<br/>Vehicle&#160;information&#160;(EOBD)&#160;–&#160;SID $09&#160;<br/>
&#160;<br/>
<b>Service&#160;</b><br/>
<b>PreHandler&#160;&#160;MainHandler&#160;&#160;PostHandler&#160;&#160;PacketHandler&#160;</b><br/>
<b>ID&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>(On Protocol&#160;</b><br/>
<b>level)&#160;</b><br/>
$01&#160;<br/>
None&#160;<br/>
<b>User&#160;</b><br/>
None&#160;<br/>
None&#160;<br/>
$02&#160;<br/>
None&#160;<br/>
<b>User</b>&#160;<br/>
None&#160;<br/>
None&#160;<br/>
$06&#160;<br/>
None&#160;<br/>
<b>User</b>&#160;<br/>
None&#160;<br/>
None&#160;<br/>
$08&#160;<br/>
None&#160;<br/>
<b>User</b>&#160;<br/>
None&#160;<br/>
None&#160;<br/>
$09&#160;&#160;<br/>
None&#160;<br/>
<b>User</b>&#160;<br/>
None&#160;<br/>
None&#160;<br/>
Table&#160;8-1&#160;&#160;&#160;Diagnostic&#160;class&#160;specific&#160;attributes&#160;<br/>
<b>8.4&#160;</b><br/>
<b>CANgen&#160;configuration&#160;</b><br/>
<b>8.4.1&#160;</b><br/>
<b>DBC attribute&#160;settings&#160;for the&#160;OBD&#160;request message&#160;&#160;</b><br/>
A&#160;&#160;message&#160;&#160;cannot&#160;&#160;be&#160;&#160;supported&#160;&#160;by&#160;&#160;both&#160;&#160;the&#160;&#160;Interaction&#160;&#160;Layer&#160;&#160;and&#160;&#160;CANdesc.&#160;&#160;For&#160;&#160;this&#160;<br/>reason,&#160;diagnostic&#160;messages&#160;must&#160;have&#160;the&#160;attribute&#160;“GenMsgNoIalSupport”&#160;set&#160;to&#160;“yes”&#160;<br/>(or,&#160;depending&#160;on&#160;the&#160;DBC&#160;version,&#160;the&#160;attribute&#160;“GenMsgILSupport”&#160;set&#160;to&#160;“no”).&#160;The&#160;DBC&#160;<br/>author is responsible&#160;for setting&#160;this&#160;attribute.&#160;<br/>
<b>8.4.2&#160;</b><br/>
<b>CANgen&#160;version &lt; 4.15.00&#160;</b><br/>
In&#160;older&#160;CANgen&#160;versions,&#160;no&#160;automatic&#160;configuration&#160;of&#160;OBD&#160;support&#160;is&#160;performed&#160;so&#160;the&#160;<br/>ECU&#160;developer&#160;must&#160;configure it&#160;manually:&#160;<br/>For&#160;&#160;the&#160;&#160;functional&#160;&#160;OBD&#160;&#160;request&#160;&#160;message&#160;&#160;(CAN&#160;&#160;ID&#160;&#160;0x7DF),&#160;&#160;a&#160;&#160;precopy&#160;&#160;function&#160;&#160;with&#160;&#160;the&#160;<br/>name&#160;<b>DescOBDReqInd</b>&#160;must&#160;be&#160;configured&#160;(in&#160;CANgen&#160;on&#160;the&#160;“Receive&#160;Messages”&#160;tab).&#160;<br/>
<b>8.4.3&#160;</b><br/>
<b>CANgen&#160;version&#160;≥&#160;4.15.00&#160;</b><br/>
Since&#160;&#160;CANgen&#160;&#160;version&#160;&#160;4.15.00,&#160;&#160;the&#160;&#160;DBC&#160;&#160;author&#160;&#160;can&#160;&#160;set&#160;&#160;the&#160;&#160;attribute&#160;&#160;‘DiagState’&#160;&#160;for&#160;&#160;the&#160;<br/>functional&#160;&#160;OBD&#160;&#160;request&#160;&#160;message&#160;&#160;(CAN&#160;&#160;ID&#160;&#160;0x7DF)&#160;&#160;to&#160;&#160;‘Yes’.&#160;&#160;In&#160;&#160;this&#160;&#160;case,&#160;&#160;CANgen&#160;&#160;will&#160;<br/>automatically&#160;configure the&#160;precopy&#160;function.&#160;<br/>
<b>8.4.4&#160;</b><br/>
<b>GENy&#160;configuration&#160;</b><br/>
The&#160;DBC&#160;author&#160;can&#160;set&#160;the&#160;attribute&#160;‘DiagState’&#160;for&#160;the&#160;functional&#160;OBD&#160;request&#160;message&#160;<br/>(CAN ID 0x7DF)&#160;to&#160;‘Yes’.&#160;Then,&#160;CANdesc configures&#160;the&#160;precopy&#160;function&#160;automatically.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
74&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=75></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>8.5&#160;</b><br/>
<b>CANdesc&#160;configuration (without a&#160;Powertrain CANdela&#160;template)&#160;</b><br/>
If&#160;the&#160;ECU&#160;developer&#160;is&#160;not&#160;using&#160;a&#160;Powertrain&#160;template&#160;(no&#160;OBD&#160;services&#160;are&#160;available&#160;in&#160;<br/>CANdelaStudio)&#160;but&#160;the&#160;ECU&#160;must&#160;still&#160;support&#160;OBD&#160;services,&#160;a&#160;workaround&#160;is&#160;necessary&#160;<br/>to&#160;&#160;activate&#160;&#160;the&#160;&#160;OBD&#160;&#160;reception&#160;&#160;path&#160;&#160;in&#160;&#160;CANdesc.&#160;&#160;This&#160;&#160;workaround&#160;&#160;requires&#160;&#160;the&#160;&#160;ECU&#160;<br/>developer&#160;&#160;to&#160;&#160;make&#160;&#160;changes&#160;&#160;to&#160;&#160;the&#160;&#160;file&#160;&#160;“CANdelaGenAPI.ini”,&#160;&#160;which&#160;&#160;is&#160;&#160;located&#160;&#160;in&#160;&#160;the&#160;<br/>CANgen&#160;executable&#160;folder.&#160;<br/>To&#160;override&#160;the&#160;look&#160;up&#160;result,&#160;modify:&#160;<br/>[GeneratorController]&#160;<br/>OverrideAnyObdServiceDetection&#160;=&#160;[0&#160;-&#160;don't (default), 1&#160;-&#160;<br/>activate OBD support]&#160;<br/>
The&#160;OBD&#160;services&#160;&#160;themselves&#160;will&#160;be&#160;handled&#160;by&#160;the&#160;application&#160;using&#160;the&#160;‘user-service’&#160;<br/>feature,&#160;which&#160;shall&#160;be&#160;enabled&#160;by&#160;the&#160;same&#160;INI file:&#160;<br/>[Misc]&#160;<br/>UseGenericUserServiceHandler&#160;= [0&#160;-&#160;don't (default),&#160;1&#160;-&#160;<br/>activated]&#160;<br/>
Optionally,&#160;the&#160;following&#160;entry&#160;can&#160;be&#160;used&#160;for&#160;post-handler support:&#160;<br/>UseGenericUserServicePostHandler&#160;=&#160;[0&#160;-&#160;don't (default), 1&#160;-&#160;<br/>activated]&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
75&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=76></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9&#160;&#160;&#160;Debug&#160;assertion&#160;codes&#160;</b><br/>
The&#160;GM/Opel&#160;specific&#160;implementation&#160;has&#160;optional debug&#160;code&#160;for&#160;certain&#160;situations&#160;where&#160;<br/>the&#160;&#160;ECU&#160;&#160;could&#160;&#160;“hang”&#160;&#160;or&#160;&#160;incorrect&#160;&#160;behavior&#160;&#160;could&#160;&#160;occur.&#160;&#160;Depending&#160;&#160;on&#160;&#160;the&#160;&#160;debug&#160;&#160;level&#160;<br/>chosen&#160;in&#160;the&#160;generation&#160;tool, the&#160;following&#160;cases&#160;may&#160;be&#160;checked:&#160;<br/>
<b>Assertion&#160;name&#160;</b><br/>
<b>ID(HEX)&#160;&#160;Description&#160;</b><br/>
kDescAssertInvalidA9Mode&#160;<br/>
91&#160;<br/>
The&#160;&#160;module&#160;&#160;has&#160;&#160;set&#160;&#160;the&#160;&#160;$A9&#160;&#160;sub-<br/>service&#160;&#160;iterator&#160;&#160;incorrectly,&#160;&#160;which&#160;<br/>will&#160;cause&#160;wrong&#160;buffer&#160;assignment&#160;<br/>when&#160;&#160;there&#160;&#160;is&#160;&#160;parallel&#160;&#160;processing&#160;<br/>of&#160;sub-service&#160;&#160;$82&#160;with&#160;one&#160;of&#160;&#160;the&#160;<br/>$80&#160;and&#160;$81&#160;sub-functions.&#160;<br/>
kDescAssertUudtBufferAlreadyUnlocked&#160;<br/>
A0&#160;<br/>
CANdesc&#160;&#160;received&#160;&#160;confirmation&#160;<br/>that&#160;&#160;a&#160;&#160;UUDT&#160;&#160;response&#160;&#160;was&#160;<br/>successfully&#160;&#160;transmitted&#160;&#160;on&#160;&#160;the&#160;<br/>bus,&#160;but&#160;the&#160;internal&#160;state&#160;machine&#160;<br/>indicates&#160;that&#160;no&#160;transmission&#160;was&#160;<br/>in&#160;progress.&#160;<br/>
kDescAssertWrongUudtTransmitterHandle&#160;<br/>
A1&#160;<br/>
CANdesc&#160;&#160;received&#160;&#160;confirmation&#160;<br/>that&#160;&#160;a&#160;&#160;UUDT&#160;&#160;response&#160;&#160;was&#160;<br/>successfully&#160;&#160;transmitted&#160;&#160;on&#160;&#160;the&#160;<br/>bus,&#160;&#160;but&#160;&#160;the&#160;&#160;transmit&#160;&#160;handle&#160;&#160;does&#160;<br/>not&#160;&#160;match&#160;&#160;the&#160;&#160;one&#160;&#160;that&#160;&#160;CANdesc&#160;<br/>actually&#160;tried&#160;to&#160;send.&#160;<br/>
kDescAssertUudtBufferStillLocked&#160;<br/>
A2&#160;<br/>
CANdesc&#160;&#160;attempted&#160;&#160;a&#160;&#160;second&#160;<br/>UUDT&#160;&#160;transmission&#160;&#160;before&#160;&#160;the&#160;<br/>previous&#160;<br/>
one&#160;<br/>
was&#160;<br/>
actually&#160;<br/>
transmitted&#160;on&#160;the&#160;bus.&#160;<br/>
kDescAssertIllegalPostProgModeId&#160;<br/>
A3&#160;<br/>
CANdesc&#160;&#160;began&#160;&#160;the&#160;&#160;internal&#160;&#160;post&#160;<br/>processing&#160;&#160;for&#160;&#160;a&#160;&#160;programming&#160;<br/>mode&#160;&#160;request,&#160;&#160;but&#160;&#160;the&#160;&#160;requested&#160;<br/>programming&#160;&#160;mode&#160;&#160;sub-function&#160;<br/>was invalid.&#160;&#160;<br/>
Table&#160;9-1&#160;&#160;&#160;Debug&#160;assertion&#160;codes&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
76&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=77></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>10&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>
&#160;<br/>
<b>&gt;&#160;&#160;</b>News&#160;<br/>
<b>&gt;&#160;&#160;</b>Products&#160;<br/>
<b>&gt;&#160;&#160;</b>Demo&#160;software&#160;<br/>
<b>&gt;&#160;&#160;</b>Support&#160;<br/>
<b>&gt;&#160;&#160;</b>Training&#160;data&#160;<br/>
<b>&gt;&#160;&#160;</b>Addresses&#160;<br/>
&#160;<br/>
<b>www.vector.com&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.2.0&#160;<br/>
77&#160;/&#160;77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#10">1 Related documents</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#11">2 Overview</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#12">3 CANdesc support by diagnostic service</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#16">4 Important application requirements</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#16">4.1 Initialization</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#17">4.2 DeviceControl ($AE) service requirement</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#17">4.3 Update from earlier versions</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">5 GM/Opel specific functionality</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">5.1 ECU Address configuration</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">5.1.1 Gateway ECUs</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">5.1.2 Virtual network management</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">5.1.3 Diagnostic activity notification</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#19">5.2 Request validation</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#21">5.3 Timeout events</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#21">5.3.1 Tester present timeout</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#21">5.4 Using the extended negative response</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#21">5.4.1 Sending an extended negative response during service processing</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#22">5.4.2 Sending an unsolicited extended negative response</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#23">5.5 Sending an unsolicited single frame response</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#24">5.5.1 Sending the unsolicited response from a different channel on a dynamic TP</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#24">5.6 GM/Opel CANdesc state machine access</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#25">5.6.1 Normal communication state</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#25">5.6.2 Programming mode state</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#26">5.6.3 High speed programming mode state</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#26">5.7 The PacketHandler (another type of service processor)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#27">5.7.1 PacketHandler API</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#30">6 GM/Opel service implementations</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#30">6.1 Service InitiateDiagnosticOperation ($10)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#30">6.1.1 Service DisableAllDTCs ($10 $02)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#30">6.1.2 Service EnableDTCsDuringDeviceControl ($10 $03)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#31">6.2 Service ReadFailureRecordData ($12)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#31">6.2.1 Service ReadFailureRecordIdentifiers ($12 $01)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#32">6.2.2 Service ReadFailureRecordParameters ($12 $02)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#32">6.3 Service ReturnToNormalMode ($20)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#33">6.4 Service ReadDataByParameterIdentifier ($22)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#33">6.4.1 Reading a dynamically defined PID (Parameter Identifier)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#33">6.5 Service SecurityAccess ($27)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#34">6.6 Service DisableNormalCommunication ($28)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#35">6.6.1 Activate a $28 post-handler for the application</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#35">6.7 Service DynamicallyDefineMessage ($2C)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#36">6.8 Operations on dynamically definable DPIDs</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#36">6.8.1 Defining a dynamically definable DPID</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#37">6.8.2 Reading a dynamically definable DPID</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#40">6.9 Service DefinePIDByAddress ($2D)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#41">6.10 Operations on dynamically definable PIDs</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#41">6.10.1 Defining a dynamically definable PID</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#42">6.10.2 Reading a dynamically definable PID</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#48">6.11 Service ProgrammingMode ($A5)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#48">6.11.1 Allowing programming mode ($A5 $01/$02)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#49">6.11.2 Entering programming mode ($A5 $03)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#49">6.11.2.1 FBL start on EnterProgrammingMode ($A5 $03)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#50">6.11.2.2 FBL start on RequestDownload ($34)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#50">6.11.2.3 Concluding programming mode</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#51">6.11.3 Considerations when upgrading</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#51">6.12 Service ReadDiagnosticInformation ($A9)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#52">6.12.1 ReadStatusOfDTCByNumber ($A9 $80)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#55">6.12.2 ReadStatusOfDTCByStatusMask ($A9 $81)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#60">6.12.3 SendOnChangeDTCCount ($A9 $82)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#64">6.13 Service ReadDataByPacketIdentifier ($AA)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.13.1 Handling undefined use cases</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.13.1.1 Service $AA handling for undefined dynamically definable DPIDs</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.13.1.2 Service $AA handling for undefined referenced dynamically defined PIDs</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.13.1.3 Service $AA handling for unaccessible referenced PIDs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#65">6.14 Service DeviceControl ($AE)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#66">6.15 Service TesterPresent ($3E)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7 CANdelaStudio default attribute settings</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.1 Diagnostic class attributes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#68">7.2 Diagnostic instance attributes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#69">7.3 Service attributes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#72">7.4 State group for the Programming Sequence</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#73">8 OBD support</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#73">8.1 CAN identifiers</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#73">8.2 Restrictions</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.3 CANdelaStudio default attribute settings for OBD services</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.3.1 Diagnostic classes</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4 CANgen configuration</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4.1 DBC attribute settings for the OBD request message</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4.2 CANgen version &lt; 4.15.00</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4.3 CANgen version ≥ 4.15.00</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#74">8.4.4 GENy configuration</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#75">8.5 CANdesc configuration (without a Powertrain CANdela template)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#76">9 &#160;Debug assertion codes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#77">10 Contact</a></li>
</ul>
<hr/>
</body>
</html>
