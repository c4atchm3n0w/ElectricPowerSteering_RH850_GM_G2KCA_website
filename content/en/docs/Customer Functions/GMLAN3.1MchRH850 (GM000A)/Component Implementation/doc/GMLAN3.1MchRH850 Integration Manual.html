---
title: GMLAN3.1MchRH850 Integration Manual
linkTitle: GMLAN3.1MchRH850 Integration Manual
weight: 29
---

<p><strong>Integration Manual</strong></p>
<p><strong>For</strong></p>
<p><strong>GMLAN3.1MchRH850</strong></p>
<p><strong>VERSION: 1</strong></p>
<p><strong>DATE: 02/01/17</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Software Group,</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA</strong></p>
<p><strong>Location:</strong> The official version of this document is stored in the Nexteer Configuration Management System.</p>
<p><strong>Revision History</strong></p>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 27%" />
<col style="width: 27%" />
<col style="width: 10%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sl. No.</strong></td>
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>Initial version</td>
<td>Lucas Wendling</td>
<td>1.0</td>
<td>02/01/17</td>
</tr>
</tbody>
</table>
<p>Table of Contents</p>
<p><a href="#abbrevations-and-acronyms">1 Abbrevations And Acronyms 4</a></p>
<p><a href="#references">2 References 5</a></p>
<p><a href="#dependencies">3 Dependencies 6</a></p>
<p><a href="#swcs">3.1 SWCs 6</a></p>
<p><a href="#global-functionsnon-rte-to-be-provided-to-integration-project">3.2 Global Functions(Non RTE) to be provided to Integration Project 6</a></p>
<p><a href="#configuration-requirements">4 Configuration REQUIREMeNTS 7</a></p>
<p><a href="#build-time-config">4.1 Build Time Config 7</a></p>
<p><a href="#configuration-files-to-be-provided-by-integration-project">4.2 Configuration Files to be provided by Integration Project 7</a></p>
<p><a href="#da-vinci-parameter-configuration-changes">4.3 Da Vinci Parameter Configuration Changes 7</a></p>
<p><a href="#__RefHeading___Toc389222325">4.4 DaVinci Interrupt Configuration Changes 7</a></p>
<p><a href="#manual-configuration-changes">4.5 Manual Configuration Changes 7</a></p>
<p><a href="#integration-dataflow-requirements">5 Integration DATAFLOW REQUIREMENTS 8</a></p>
<p><a href="#required-global-data-inputs">5.1 Required Global Data Inputs 8</a></p>
<p><a href="#required-global-data-outputs">5.2 Required Global Data Outputs 8</a></p>
<p><a href="#specific-include-path-present">5.3 Specific Include Path present 8</a></p>
<p><a href="#runnable-scheduling">6 Runnable Scheduling 9</a></p>
<p><a href="#memory-map-requirements">7 Memory Map REQUIREMENTS 10</a></p>
<p><a href="#mapping">7.1 Mapping 10</a></p>
<p><a href="#usage">7.2 Usage 10</a></p>
<p><a href="#nvm-blocks">7.3 Non RTE NvM Blocks 10</a></p>
<p><a href="#__RefHeading___Toc389222336">7.4 RTE NvM Blocks 10</a></p>
<p><a href="#compiler-settings">8 Compiler Settings 11</a></p>
<p><a href="#preprocessor-macro">8.1 Preprocessor MACRO 11</a></p>
<p><a href="#optimization-settings">8.2 Optimization Settings 11</a></p>
<p><a href="#appendix">9 Appendix 12</a></p>
<h1 id="abbrevations-and-acronyms">Abbrevations And Acronyms</h1>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Abbreviation</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="references">References</h1>
<p>This section lists the title &amp; version of all the documents that are referred for development of this document</p>
<table>
<colgroup>
<col style="width: 11%" />
<col style="width: 65%" />
<col style="width: 22%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sr. No.</strong></td>
<td><strong>Title</strong></td>
<td><strong>Version</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="dependencies">Dependencies</h1>
<h2 id="swcs">SWCs</h2>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 69%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Module</strong></td>
<td><strong>Required Feature</strong></td>
</tr>
<tr class="even">
<td><strong>VectorBswSuprt</strong></td>
<td>Integration of this version of GMLAN3.1MchRH850 requires using the 01.04.00_03.08.00 versions of files in the VectorBswSuprt component. This includes ensuring the overall project include path points to: “VectorBswSuprt\include\01.04.00_03.08.00” and the project green hills .gpj file associates the following green hills .gpj subproject file: “VStdLib_01.04.00_03.08.00.gpj”</td>
</tr>
</tbody>
</table>
<p>Note : Referencing the external components should be avoided in most cases. Only in unavoidable circumstance external components should be referred. Developer should track the references.</p>
<h2 id="global-functionsnon-rte-to-be-provided-to-integration-project">Global Functions(Non RTE) to be provided to Integration Project</h2>
<p>Per the CAN Driver documentation:</p>
<p>"If an exclusive write access to the CAN related EI level interrupt control registers (ICn) is<br />
not possible or if the driver must not access registers outside the CAN address space the<br />
switch C_ENABLE_OSEK_CAN_INTCTRL has to be defined via the user configuration file.<br />
<br />
In this case the driver does not access the registers of the interrupt controller at all and the<br />
application has to ensure proper initialization, disabling and restoring of the CAN interrupt<br />
sources.<br />
The initialization of all necessary ICn has to be performed additionally by the application<br />
before the call of CanInitPowerOn()if this switch is defined. All used sources (see<br />
remarks in table 10-1) have to be enabled after initialization whereas unused sources have<br />
to be disabled.<br />
<br />
In context of the interrupt disable/restore mechanism the driver implements application<br />
call-backs that are used whenever the functions CanCanInterruptDisable() or<br />
CanCanInterruptRestore() are invoked (see section 9.4 for API definitions). The<br />
function OsCanCanInterruptDisable() should save the current mask status (MK bits)<br />
of all used CAN interrupt sources that are linked to the given logical channel and then set<br />
these bits to 1 in order to disable the sources. OsCanCanInterruptRestore() has to<br />
restore the previously saved mask bits for the given logical channel. These actions may<br />
differ based on the actual software configuration, but all CAN interrupts on the<br />
corresponding channel have to be locked after the first call (nested calls can occur) of<br />
OsCanCanInterruptDisable() and be available not until the last nested call of<br />
OsCanCanInterruptRestore(). Keep in mind that the right physical channel has to be<br />
chosen based on the given logical controller (to get the right ICn) and that the receive<br />
FIFO and global status interrupt are used by all controllers."</p>
<p>It is assumed that integration of the CAN driver is done in a user-mode application that has no direct access to the hardware interrupt registers, and therefore the above “C_ENABLE_OSEK_CAN_INTCTRL” needs to be defined in a user configuration file. <strong>A user configuration file is added in the “/tools/” folder of this component (CanDrv.cfg), and this can be included in the Geny Can Driver User configuration file selection to enable this interrupt feature mentioned above.</strong> When this is done, the following callouts need to be defined in the integration project:</p>
<p>OsCanCanInterruptDisable</p>
<p>OsCanCanInterruptRestore</p>
<p>These functions need to be implemented to be able to be nested calls, as well as are required to disable all CAN related interrupts. As an example, the OS API “SuspendOSInterrupts” and “ResumeOSInterrupts” can be called from these functions so long as the CAN interrupts are configured to be Category 2 ISRs in the OS (these OS APIs allow nested calls). This may not, however, always be the most efficient implementation as it disables all OS interrupts, not just the CAN related OS interrupts.</p>
<h1 id="configuration-requirements">Configuration REQUIREMeNTS</h1>
<p>Third party documentation can be referenced as needed.</p>
<h2 id="build-time-config">Build Time Config</h2>
<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 53%" />
<col style="width: 9%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Modules</strong></td>
<td><strong>Notes</strong></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="configuration-files-to-be-provided-by-integration-project">Configuration Files to be provided by Integration Project</h2>
<p>N/A</p>
<h2 id="da-vinci-parameter-configuration-changes">Da Vinci Parameter Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Parameter</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="davinci-interrupt-configuration-changes">DaVinci Interrupt Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 60%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>ISR Name</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="manual-configuration-changes">Manual Configuration Changes</h2>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 47%" />
<col style="width: 12%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Constant</strong></td>
<td><strong>Notes</strong></td>
<td><strong>SWC</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="integration-dataflow-requirements">Integration DATAFLOW REQUIREMENTS</h1>
<h2 id="required-global-data-inputs">Required Global Data Inputs</h2>
<h2 id="required-global-data-outputs">Required Global Data Outputs</h2>
<h2 id="specific-include-path-present">Specific Include Path present</h2>
<p>Yes</p>
<h1 id="runnable-scheduling">Runnable Scheduling </h1>
<p>Third party documentation can be referenced as needed.</p>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 54%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Init</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table style="width:100%;">
<colgroup>
<col style="width: 25%" />
<col style="width: 54%" />
<col style="width: 20%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Runnable</strong></td>
<td><strong>Scheduling Requirements</strong></td>
<td><strong>Trigger</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>.</strong></p>
<h1 id="memory-map-requirements">Memory Map REQUIREMENTS</h1>
<h2 id="mapping">Mapping</h2>
<table>
<colgroup>
<col style="width: 45%" />
<col style="width: 26%" />
<col style="width: 28%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Memory Section</strong></td>
<td><strong>Contents</strong></td>
<td><strong>Notes</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>* Each …START_SEC… constant is terminated by a …STOP_SEC… constant as specified in the AUTOSAR Memory Mapping requirements.</p>
<h2 id="usage">Usage</h2>
<table>
<colgroup>
<col style="width: 55%" />
<col style="width: 23%" />
<col style="width: 21%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Feature</strong></td>
<td><strong>RAM</strong></td>
<td><strong>ROM</strong></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="nvm-blocks">NvM Blocks</h2>
<h1 id="compiler-settings">Compiler Settings</h1>
<h2 id="preprocessor-macro"> Preprocessor MACRO</h2>
<h2 id="optimization-settings">Optimization Settings</h2>
<h1 id="appendix">Appendix</h1>
<h2 id="updates-from-original-delivery">Updates from Original Delivery</h2>
<p>The delivery from Vector for this SIP contained an incorrect “Gateway.pcu” file found in the “/tools/Generators/Components/” directory. Attached is an email from Vector explaining the issue. Also, attached are the original SIP file as well as the updated one from Vector that needs to be used in this SIP.</p>
<p><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/static/media/image1.wmf" /><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/static/media/image2.wmf" /><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/static/media/image3.wmf" /></p>
