---
title: SnsrMeasStrt_MDD
linkTitle: SnsrMeasStrt_MDD
weight: 3
---

<p><strong>Module Design Document</strong></p>
<p><strong>For</strong></p>
<p><strong>SnsrMeasStrt</strong></p>
<p><strong>Nov 18, 2016</strong></p>
<p><strong>Prepared For:</strong></p>
<p><strong>Software Engineering</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Shruthi Raghavan,</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA<br />
<u>Change History</u></strong></p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 28%" />
<col style="width: 18%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>Initial Version</td>
<td>Shruthi Raghavan</td>
<td>EA4 01.00.01</td>
<td>11/18/16</td>
</tr>
</tbody>
</table>
<p><strong><br />
</strong></p>
<p><strong><u>Table of Contents</u></strong></p>
<p>1 Introduction <a href="#introduction">4</a></p>
<p><a href="#purpose">1.1 Purpose <span>4</span></a></p>
<p><a href="#snsrmeasstrt-high-level-description">2 SnsrMeasStrt &amp; High-Level Description <span>5</span></a></p>
<p><a href="#design-details-of-software-module">3 Design details of software module <span>6</span></a></p>
<p><a href="#graphical-representation-of-snsrmeasstrt">3.1 Graphical representation of SnsrMeasStrt <span>6</span></a></p>
<p><a href="#data-flow-diagram">3.2 Data Flow Diagram <span>6</span></a></p>
<p><a href="#component-level-dfd">3.2.1 Component level DFD <span>6</span></a></p>
<p><a href="#function-level-dfd">3.2.2 Function level DFD <span>6</span></a></p>
<p><a href="#constant-data-dictionary">4 Constant Data Dictionary <span>7</span></a></p>
<p><a href="#program-fixed-constants">4.1 Program (fixed) Constants <span>7</span></a></p>
<p><a href="#embedded-constants">4.1.1 Embedded Constants <span>7</span></a></p>
<p><a href="#software-component-implementation">5 Software Component Implementation <span>8</span></a></p>
<p><a href="#sub-module-functions">5.1 Sub-Module Functions <span>8</span></a></p>
<p><a href="#init-snsrmeasstrt_init1">5.1.1 Init: SnsrMeasStrt_Init1 <span>8</span></a></p>
<p><a href="#design-rationale">5.1.1.1 Design Rationale <span>8</span></a></p>
<p><a href="#module-outputs">5.1.1.2 Module Outputs <span>8</span></a></p>
<p><a href="#per-snsrmeasstrt_per1">5.1.2 Per: SnsrMeasStrt_Per1 <span>8</span></a></p>
<p><a href="#design-rationale-1">5.1.2.1 Design Rationale <span>8</span></a></p>
<p><a href="#processing-of-function">5.1.2.2 Processing of function <span>8</span></a></p>
<p><a href="#server-runnables">5.2 Server Runnables <span>8</span></a></p>
<p><a href="#interrupt-functions">5.3 Interrupt Functions <span>9</span></a></p>
<p><a href="#snsrmeasstrtirq">5.3.1 SnsrMeasStrtIrq <span>9</span></a></p>
<p><a href="#design-rationale-2">5.3.1.1 Design Rationale <span>9</span></a></p>
<p><a href="#processing-of-the-isr-function">5.3.1.2 Processing of the ISR function <span>9</span></a></p>
<p><a href="#module-internal-local-functions">5.4 Module Internal (Local) Functions <span>9</span></a></p>
<p><a href="#global-functionmacro-definitions">5.5 GLOBAL Function/Macro Definitions <span>9</span></a></p>
<p><a href="#known-limitations-with-design">6 Known Limitations with Design <span>10</span></a></p>
<p><a href="#unit-test-consideration">7 UNIT TEST CONSIDERATION <span>11</span></a></p>
<p><a href="#abbreviations-and-acronyms">Appendix A Abbreviations and Acronyms <span>12</span></a></p>
<p><a href="#glossary">Appendix B Glossary <span>13</span></a></p>
<p><a href="#references">Appendix C References <span>14</span></a></p>
<h1 id="introduction">Introduction</h1>
<h2 id="purpose">Purpose</h2>
<p>Module Design Document for CM410B SnsrMeasStrt</p>
<h1 id="snsrmeasstrt-high-level-description">SnsrMeasStrt &amp; High-Level Description</h1>
<blockquote>
<p>Torque Leg is critical factor in Feel issue. In order to minimize lag, it is required to synchronize trigger and time to read torque data should be just in time, so there will be minimum lag.</p>
</blockquote>
<h1 id="design-details-of-software-module">Design details of software module</h1>
<h2 id="graphical-representation-of-snsrmeasstrt">Graphical representation of SnsrMeasStrt</h2>
<p><img src="ElectricPowerSteering_RH850_GM_G2KCA_website/static/media/image1.png" style="width:2.80383in;height:1.33221in" /></p>
<h2 id="data-flow-diagram">Data Flow Diagram</h2>
<p>Refer FDD</p>
<h3 id="component-level-dfd">Component level DFD</h3>
<p>Refer FDD</p>
<h3 id="function-level-dfd">Function level DFD</h3>
<p>Refer FDD</p>
<h1 id="constant-data-dictionary">Constant Data Dictionary</h1>
<h2 id="program-fixed-constants">Program (fixed) Constants</h2>
<h3 id="embedded-constants">Embedded Constants</h3>
<h4 id="local-constants">Local Constants</h4>
<p>Refer to DataDict.m file for rest of the constants.</p>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 20%" />
<col style="width: 14%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th>Constant Name</th>
<th>Resolution</th>
<th>Units</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="software-component-implementation">Software Component Implementation</h1>
<h2 id="sub-module-functions">Sub-Module Functions</h2>
<h2 id="init-snsrmeasstrt_init1">Init: SnsrMeasStrt_Init1</h2>
<h2 id="design-rationale">Design Rationale</h2>
<blockquote>
<p>OSTM1 Timer has choosen for timing synchronization, because it was close to tied with OSTM0, same clock for accuracy Purpose, but TAUJ or TAUD any real time timer mechanism would work. Initialize OS Timer registers. Refer to CM410B_SnsrMeasStrt_PeripheralCfg.xlsx in the design package to see the specific register configurations. Unmask the OSTM1 EI-level mask able interrupt according to the instructions in Model for which both Os.h and osekext.h are required.</p>
</blockquote>
<h2 id="module-outputs">Module Outputs</h2>
<blockquote>
<p>Refer FDD</p>
</blockquote>
<h2 id="per-snsrmeasstrt_per1">Per: SnsrMeasStrt_Per1</h2>
<h2 id="design-rationale-1">Design Rationale</h2>
<blockquote>
<p>OSTM0 is a free running counter for 2ms. OSTM0CNT is used to trigger torque measure sensor reads with a calibrated trigger delay to start this read (by setting a count value to OSTM1CMP for triggering its interval timer mode interrupt) before the periodic is called again.</p>
</blockquote>
<h2 id="processing-of-function"> Processing of function</h2>
<blockquote>
<p>Refer to FDD</p>
</blockquote>
<h2 id="server-runnables">Server Runnables</h2>
<p>None</p>
<h2 id="interrupt-functions">Interrupt Functions</h2>
<h2 id="snsrmeasstrtirq">SnsrMeasStrtIrq</h2>
<h2 id="design-rationale-2">Design Rationale</h2>
<blockquote>
<p>PIMs belong to the RTE and so the corresponding header file is included in this file for the ISR to have TqMsgTrigCnt defined in scope. Client calls to Hw0TqMeas &amp; Hw1TqMeas server runnables are possible from ISR because they are implemented as non-RTE also in the respective components.</p>
</blockquote>
<h2 id="processing-of-the-isr-function">Processing of the ISR function</h2>
<blockquote>
<p>ISR calls the HwTq0MeasTrigStrt_Oper, HwTq1MeasTrigStrt_Oper server runnables from CM650B and CM660B respectively. Each of these in turn triggers the TqSENT measurement from the corresponding Handwheel Torque Sensor.</p>
</blockquote>
<p>Only client calls to server runnables are part of this ISR. Increments a PIM to capture how many timer triggers happen.</p>
<h2 id="module-internal-local-functions">Module Internal (Local) Functions</h2>
<blockquote>
<p>None</p>
</blockquote>
<h2 id="global-functionmacro-definitions">GLOBAL Function/Macro Definitions</h2>
<blockquote>
<p>None</p>
</blockquote>
<h1 id="known-limitations-with-design">Known Limitations with Design</h1>
<p><strong>ISR needs to execute in the same application region of the Torque Measurement Components.</strong></p>
<p><strong>DataDict.m</strong> file has known issues:</p>
<ol type="1">
<li><p>Context of ISR is wrong</p></li>
<li><p>The register given as input is OSTM0CMP whereas the one need is OSTM0CNT.</p></li>
</ol>
<blockquote>
<p>An anomaly has been submitted to fix this.</p>
</blockquote>
<h1 id="unit-test-consideration">UNIT TEST CONSIDERATION</h1>
<p>Overflow for the variable <strong>Rte_Pim_TqMsgTrigCnt</strong> is intentional as this is used as a rolling counter.</p>
<p class="heading" id="abbreviations-and-acronyms">Abbreviations and Acronyms</p>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Abbreviation or Acronym</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>DFD</td>
<td>Design functional diagram</td>
</tr>
<tr class="even">
<td>MDD</td>
<td>Module design Document</td>
</tr>
</tbody>
</table>
<p class="heading" id="glossary">Glossary</p>
<p><strong>Note</strong>: Terms and definitions from the source “Nexteer Automotive” take precedence over all other definitions of the same term. Terms and definitions from the source “Nexteer Automotive” are formulated from multiple sources, including the following:</p>
<ul>
<li><p>ISO 9000</p></li>
<li><p>ISO/IEC 12207</p></li>
<li><p>ISO/IEC 15504</p></li>
<li><p>Automotive SPICE® Process Reference Model (PRM)</p></li>
<li><p>Automotive SPICE® Process Assessment Model (PAM)</p></li>
<li><p>ISO/IEC 15288</p></li>
<li><p>ISO 26262</p></li>
<li><p>IEEE Standards</p></li>
<li><p>SWEBOK</p></li>
<li><p>PMBOK</p></li>
<li><p>Existing Nexteer Automotive documentation</p></li>
</ul>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 53%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Term</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Source</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MDD</td>
<td>Module Design Document</td>
<td></td>
</tr>
<tr class="even">
<td>DFD</td>
<td>Data Flow Diagram</td>
<td></td>
</tr>
</tbody>
</table>
<p class="heading" id="references">References</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 69%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Ref. #</strong></th>
<th><strong>Title</strong></th>
<th><strong>Version</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>AUTOSAR Specification of Memory Mapping (Link:<a href="http://www.autosar.org/download/R4.0/AUTOSAR_SWS_MemoryMapping.pdf">AUTOSAR_SWS_MemoryMapping.pdf</a>)</td>
<td>v1.3.0 R4.0 Rev 2</td>
</tr>
<tr class="even">
<td>2</td>
<td>MDD Guideline</td>
<td>EA4 01.00.01</td>
</tr>
<tr class="odd">
<td>3</td>
<td>EA3 <a href="http://misagweb01.nexteer.com/eRoomReq/Files/erooms8/NextGeneration/0_fc55f/Software%20Naming%20Conventions%2003x(In%20Work).doc">Software Naming Conventions.doc</a></td>
<td>2.0</td>
</tr>
<tr class="even">
<td>4</td>
<td><a href="http://eroom1.nexteer.com/eRoomReq/Files/erooms8/NextGeneration/0_1a67a9/Software%20Design%20and%20Coding%20Standards.doc">Software Design and Coding Standards.doc</a></td>
<td>2.1</td>
</tr>
<tr class="odd">
<td>5</td>
<td>FDD CM410B</td>
<td>Refer to Design Subproject in Synergy</td>
</tr>
</tbody>
</table>
